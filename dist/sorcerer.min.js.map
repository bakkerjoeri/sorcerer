{"version":3,"sources":["webpack:///sorcerer.min.js","webpack:///webpack/bootstrap ba33b74eac50b5a864a4","webpack:///./scripts/core/SpriteAtlas.js","webpack:///./scripts/modules/Log.js","webpack:///./scripts/core/Entity.js","webpack:///./scripts/core/PubSub.js","webpack:///./scripts/entities/Actor.js","webpack:///./scripts/core/SpriteFrame.js","webpack:///./scripts/main.js","webpack:///./scripts/core/Room.js","webpack:///./scripts/core/Viewport.js","webpack:///./scripts/modules/Game.js","webpack:///./scripts/modules/Map.js","webpack:///./scripts/modules/Tile.js","webpack:///./scripts/entities/Player.js","webpack:///./scripts/core/Sprite.js","webpack:///./scripts/entities/NonPlayer.js","webpack:///./scripts/entities/Wall.js","webpack:///./scripts/entities/Tree.js","webpack:///./scripts/creatureTypes/Knight.js","webpack:///./scripts/creatureTypes/GreenKnight.js","webpack:///./scripts/creatureTypes/Slime.js","webpack:///./scripts/creatureTypes/KingSlime.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","_classCallCheck","instance","Constructor","TypeError","createFramesFromDefinition","definition","frames","image","Image","src","file","forEach","frameData","frame","_SpriteFrame2","origin","size","push","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_Sprite","_Sprite2","_SpriteFrame","SpriteAtlas","this","frameName","find","getName","frameNames","_this","map","getFrame","logElement","document","querySelector","Log","message","messageElement","createElement","classList","add","innerHTML","appendChild","Entity","options","arguments","setSprite","sprite","setPosition","position","setSolidity","solid","setSize","time","change","currentPosition","getPosition","x","y","topics","Map","PubSub","topic","callback","has","set","data","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","getDeadSprite","_SpriteAtlas2","JSON","parse","createSpriteWithFrames","_Entity2","_Entity3","_SpriteAtlas","_Log","_Log2","STATS_DEFAULT","strength","maxHealth","Actor","_Entity","creatureDefinition","getPrototypeOf","applyCreatureDefinition","health","stats","type","applyStats","assign","canBeAttacked","showMessage","attackTarget","applyDamage","calculateAttackDamage","damage","reduceHealth","amount","changeHealth","die","newMapPosition","_this2","hasTileAtPosition","hasSolidEntitiesInBoundaries","areBoundariesWithinMapBoundaries","moveActorFromPositionToPosition","mapPosition","updateMapPosition","solidActorsOnNewPosition","getSolidActorsInBoundaries","actionTaken","solidActor","bumpInto","moveTo","dead","width","height","SpriteFrame","setName","setImage","setOrigin","imageLoaded","addEventListener","onChance","denominator","Math","round","random","_Room","_Room2","_Viewport","_Viewport2","_Game","_Game2","_Map","_Map2","_Player","_Player2","_NonPlayer","_NonPlayer2","_Wall","_Wall2","_Tree","_Tree2","_Knight","_GreenKnight","_Slime","_KingSlime","canvas","room","setBackgroundColor","viewport","showRoom","game","setCurrentMap","player","GreenKnight","addActor","setPlayer","followEntity","forEachTile","tile","hasSolidEntities","Slime","Knight","addStructure","KingSlime","Room","entities","Set","entity","backgroundColor","context","offset","fillStyle","fillRect","strokeStyle","strokeRect","changeCanvasToSize","calculatePositionInViewportFromPosition","Viewport","useCanvas","startUpdating","getContext","entityToFollow","window","requestAnimationFrame","update","bind","newViewportPosition","step","draw","clearDrawing","drawBackground","beginPath","lineTo","stroke","clearRect","_PubSub","_PubSub2","Game","subscribe","tick","performNonPlayerTurns","playerEntity","actors","actor","takeTurn","createTilesetWithSize","tiles","_Tile2","_Tile","structures","forEachTileInBoundaries","addEntity","structure","tileRow","tilePosition","findTileAtPosition","Boolean","oldPosition","newPosition","removeActor","exclude","solidEntities","concat","getSolidEntities","getSolidEntitiesInBoundaries","solidActors","getSolidActors","Tile","actorIndex","indexOf","splice","structureIndex","findIndex","getEntities","filter","includes","getActors","_Actor2","_Actor3","Player","_Actor","onKeyDown","event","preventDefault","moveUp","moveRight","moveDown","moveLeft","publish","calculateNewFrameIndexWithChange","currentFrameIndex","amountOfFrames","looping","newFrameIndex","calculateMaximumSizeFromFrames","biggestWidth","biggestHeight","Sprite","setFrames","getFrames","setCurrentFrameIndex","frameIndex","setFramesPerSecond","framesPerSecond","timeOfPreviousFrame","Array","isArray","newCurrentFrameIndex","currentFrame","getCurrentFrame","drawImage","getImage","getOrigin","getSize","getFramesPerSecond","timeSincePreviousFrame","frameChange","floor","ceil","NonPlayer","decision","Wall","spriteAtlas","wallSprite","Tree","knightSprite","slimeSprite"],"mappings":"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","file":"sorcerer.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Sprite = __webpack_require__(13);\n\nvar _Sprite2 = _interopRequireDefault(_Sprite);\n\nvar _SpriteFrame = __webpack_require__(5);\n\nvar _SpriteFrame2 = _interopRequireDefault(_SpriteFrame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SpriteAtlas = function () {\n\tfunction SpriteAtlas(definition) {\n\t\t_classCallCheck(this, SpriteAtlas);\n\n\t\tthis.frames = createFramesFromDefinition(definition);\n\t}\n\n\t_createClass(SpriteAtlas, [{\n\t\tkey: 'getFrame',\n\t\tvalue: function getFrame(frameName) {\n\t\t\treturn this.frames.find(function (frame) {\n\t\t\t\treturn frame.getName() === frameName;\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'createSpriteWithFrames',\n\t\tvalue: function createSpriteWithFrames(frameNames) {\n\t\t\tvar _this = this;\n\n\t\t\tvar frames = frameNames.map(function (frameName) {\n\t\t\t\treturn _this.getFrame(frameName);\n\t\t\t});\n\n\t\t\treturn new _Sprite2.default(frames);\n\t\t}\n\t}]);\n\n\treturn SpriteAtlas;\n}();\n\nexports.default = SpriteAtlas;\n\n\nfunction createFramesFromDefinition(definition) {\n\tvar frames = [];\n\n\tif (definition.hasOwnProperty('file')) {\n\t\tvar image = new Image();\n\t\timage.src = definition.file;\n\n\t\tdefinition.frames.forEach(function (frameData) {\n\t\t\tvar frame = new _SpriteFrame2.default(frameData.name, image, frameData.origin, frameData.size);\n\n\t\t\tframes.push(frame);\n\t\t});\n\t}\n\n\treturn frames;\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logElement = document.querySelector('.js-log');\n\nvar Log = function () {\n\tfunction Log() {\n\t\t_classCallCheck(this, Log);\n\t}\n\n\t_createClass(Log, null, [{\n\t\tkey: 'showMessage',\n\t\tvalue: function showMessage(message) {\n\t\t\tvar messageElement = document.createElement('li');\n\t\t\tmessageElement.classList.add('log__item');\n\t\t\tmessageElement.innerHTML = message;\n\t\t\tlogElement.appendChild(messageElement);\n\t\t}\n\t}]);\n\n\treturn Log;\n}();\n\nexports.default = Log;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Entity = function () {\n\tfunction Entity() {\n\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t_classCallCheck(this, Entity);\n\n\t\tif (options.hasOwnProperty('sprite')) {\n\t\t\tthis.setSprite(options.sprite);\n\t\t}\n\n\t\tif (options.hasOwnProperty('position')) {\n\t\t\tthis.setPosition(options.position);\n\t\t}\n\n\t\tif (options.hasOwnProperty('solid')) {\n\t\t\tthis.setSolidity(options.solid);\n\t\t}\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.setSize(options.size);\n\t\t}\n\t}\n\n\t_createClass(Entity, [{\n\t\tkey: 'step',\n\t\tvalue: function step(time) {}\n\t}, {\n\t\tkey: 'setSprite',\n\t\tvalue: function setSprite(sprite) {\n\t\t\tthis.sprite = sprite;\n\t\t}\n\t}, {\n\t\tkey: 'setPosition',\n\t\tvalue: function setPosition(position) {\n\t\t\tthis.position = position;\n\t\t}\n\t}, {\n\t\tkey: 'getPosition',\n\t\tvalue: function getPosition() {\n\t\t\treturn this.position;\n\t\t}\n\t}, {\n\t\tkey: 'setSolidity',\n\t\tvalue: function setSolidity(solid) {\n\t\t\tthis.solid = solid;\n\t\t}\n\t}, {\n\t\tkey: 'isSolid',\n\t\tvalue: function isSolid() {\n\t\t\treturn this.solid;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\t\t}\n\t}, {\n\t\tkey: 'getSize',\n\t\tvalue: function getSize() {\n\t\t\treturn this.size;\n\t\t}\n\t}, {\n\t\tkey: 'changePosition',\n\t\tvalue: function changePosition(change) {\n\t\t\tvar currentPosition = this.getPosition();\n\n\t\t\tthis.setPosition({\n\t\t\t\tx: currentPosition.x + change.x,\n\t\t\t\ty: currentPosition.y + change.y\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Entity;\n}();\n\nexports.default = Entity;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar topics = new Map();\n\nvar PubSub = function () {\n\tfunction PubSub() {\n\t\t_classCallCheck(this, PubSub);\n\t}\n\n\t_createClass(PubSub, null, [{\n\t\tkey: \"subscribe\",\n\t\tvalue: function subscribe(topic, callback) {\n\t\t\tif (!topics.has(topic)) {\n\t\t\t\ttopics.set(topic, []);\n\t\t\t}\n\n\t\t\tvar topicCallbacks = topics.get(topic);\n\t\t\ttopicCallbacks.push(callback);\n\t\t}\n\t}, {\n\t\tkey: \"publish\",\n\t\tvalue: function publish(topic, data) {\n\t\t\tif (topics.has(topic)) {\n\t\t\t\ttopics.get(topic).forEach(function (callback) {\n\t\t\t\t\tcallback(data);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn PubSub;\n}();\n\nexports.default = PubSub;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Entity2 = __webpack_require__(2);\n\nvar _Entity3 = _interopRequireDefault(_Entity2);\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nvar _Log = __webpack_require__(1);\n\nvar _Log2 = _interopRequireDefault(_Log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar STATS_DEFAULT = {\n\tstrength: 1,\n\tmaxHealth: 1\n};\n\nvar Actor = function (_Entity) {\n\t_inherits(Actor, _Entity);\n\n\tfunction Actor(creatureDefinition, options) {\n\t\t_classCallCheck(this, Actor);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Actor.__proto__ || Object.getPrototypeOf(Actor)).call(this, options));\n\n\t\t_this.applyCreatureDefinition(creatureDefinition);\n\n\t\t_this.health = _this.stats.maxHealth;\n\t\treturn _this;\n\t}\n\n\t_createClass(Actor, [{\n\t\tkey: 'applyCreatureDefinition',\n\t\tvalue: function applyCreatureDefinition(creatureDefinition) {\n\t\t\tthis.type = creatureDefinition.type;\n\t\t\tthis.applyStats(creatureDefinition.stats);\n\t\t\tthis.setSprite(creatureDefinition.sprite);\n\t\t\tthis.setSize(creatureDefinition.size);\n\t\t\tthis.setSolidity(creatureDefinition.solid);\n\t\t}\n\t}, {\n\t\tkey: 'applyStats',\n\t\tvalue: function applyStats(stats) {\n\t\t\tthis.stats = Object.assign({}, STATS_DEFAULT, stats);\n\t\t}\n\t}, {\n\t\tkey: 'bumpInto',\n\t\tvalue: function bumpInto(target) {\n\t\t\tif (target.canBeAttacked()) {\n\t\t\t\t_Log2.default.showMessage('<em>' + this.type + '</em> attacks <em>' + target.type + '</em>');\n\n\t\t\t\tthis.attackTarget(target);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}, {\n\t\tkey: 'attackTarget',\n\t\tvalue: function attackTarget(target) {\n\t\t\ttarget.applyDamage(this.calculateAttackDamage());\n\t\t}\n\t}, {\n\t\tkey: 'calculateAttackDamage',\n\t\tvalue: function calculateAttackDamage() {\n\t\t\treturn this.stats.strength;\n\t\t}\n\t}, {\n\t\tkey: 'applyDamage',\n\t\tvalue: function applyDamage(damage) {\n\t\t\t_Log2.default.showMessage('<em>' + this.type + '</em> takes ' + damage + ' damage');\n\t\t\tthis.reduceHealth(damage);\n\t\t}\n\t}, {\n\t\tkey: 'restoreHealth',\n\t\tvalue: function restoreHealth(amount) {\n\t\t\tthis.changeHealth(this.health + amount);\n\t\t}\n\t}, {\n\t\tkey: 'reduceHealth',\n\t\tvalue: function reduceHealth(amount) {\n\t\t\tthis.changeHealth(this.health - amount);\n\t\t}\n\t}, {\n\t\tkey: 'changeHealth',\n\t\tvalue: function changeHealth(health) {\n\t\t\tif (health > this.stats.maxHealth) {\n\t\t\t\tthis.health = this.stats.maxHealth;\n\t\t\t\t_Log2.default.showMessage('<em>' + this.type + '</em> health max at ' + this.health);\n\t\t\t} else if (health <= 0) {\n\t\t\t\tthis.health = 0;\n\t\t\t\tthis.die();\n\t\t\t} else {\n\t\t\t\tthis.health = health;\n\t\t\t\t_Log2.default.showMessage('<em>' + this.type + '</em> health is ' + this.health + '/' + this.stats.maxHealth);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'moveTo',\n\t\tvalue: function moveTo(newMapPosition) {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (!this.map.hasTileAtPosition(newMapPosition)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.map.hasSolidEntitiesInBoundaries(newMapPosition, this.size, [this]) && this.map.areBoundariesWithinMapBoundaries(newMapPosition, this.size)) {\n\t\t\t\tthis.map.moveActorFromPositionToPosition(this, this.mapPosition, newMapPosition);\n\t\t\t\tthis.updateMapPosition(newMapPosition);\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar solidActorsOnNewPosition = this.map.getSolidActorsInBoundaries(newMapPosition, this.size, [this]);\n\n\t\t\tif (solidActorsOnNewPosition.length > 0) {\n\t\t\t\tvar actionTaken = false;\n\n\t\t\t\tsolidActorsOnNewPosition.forEach(function (solidActor) {\n\t\t\t\t\tvar bumpIntoResult = _this2.bumpInto(solidActor);\n\n\t\t\t\t\tif (bumpIntoResult) {\n\t\t\t\t\t\tactionTaken = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn actionTaken;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}, {\n\t\tkey: 'moveUp',\n\t\tvalue: function moveUp() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.mapPosition.x,\n\t\t\t\ty: this.mapPosition.y - 1\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'moveRight',\n\t\tvalue: function moveRight() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.mapPosition.x + 1,\n\t\t\t\ty: this.mapPosition.y\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'moveDown',\n\t\tvalue: function moveDown() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.mapPosition.x,\n\t\t\t\ty: this.mapPosition.y + 1\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'moveLeft',\n\t\tvalue: function moveLeft() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.mapPosition.x - 1,\n\t\t\t\ty: this.mapPosition.y\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'canBeAttacked',\n\t\tvalue: function canBeAttacked() {\n\t\t\treturn !this.dead;\n\t\t}\n\t}, {\n\t\tkey: 'die',\n\t\tvalue: function die() {\n\t\t\tthis.dead = true;\n\t\t\tthis.size = {\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\t\t\tthis.sprite = getDeadSprite();\n\n\t\t\t_Log2.default.showMessage('<em>' + this.type + '</em> is dead');\n\t\t}\n\t}, {\n\t\tkey: 'updateMapPosition',\n\t\tvalue: function updateMapPosition(mapPosition) {\n\t\t\tthis.mapPosition = mapPosition;\n\t\t\tthis.position = {\n\t\t\t\tx: mapPosition.x * 16,\n\t\t\t\ty: mapPosition.y * 16\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn Actor;\n}(_Entity3.default);\n\nexports.default = Actor;\n\n\nfunction getDeadSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/grave-sheet.png\", \"frames\": [ { \"name\": \"grave_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar graveSprite = spriteAtlas.createSpriteWithFrames(['grave_0']);\n\n\treturn graveSprite;\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SpriteFrame = function () {\n\tfunction SpriteFrame(name, image, position, size) {\n\t\t_classCallCheck(this, SpriteFrame);\n\n\t\tthis.setName(name);\n\t\tthis.setImage(image);\n\t\tthis.setOrigin(position);\n\t\tthis.setSize(size);\n\t}\n\n\t_createClass(SpriteFrame, [{\n\t\tkey: 'setName',\n\t\tvalue: function setName(name) {\n\t\t\tthis.name = name;\n\t\t}\n\t}, {\n\t\tkey: 'setImage',\n\t\tvalue: function setImage(image) {\n\t\t\tvar _this = this;\n\n\t\t\tthis.imageLoaded = false;\n\t\t\tthis.image = image;\n\n\t\t\tthis.image.addEventListener('load', function () {\n\t\t\t\t_this.imageLoaded = true;\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'setOrigin',\n\t\tvalue: function setOrigin(origin) {\n\t\t\tthis.origin = origin;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\t\t}\n\t}, {\n\t\tkey: 'getName',\n\t\tvalue: function getName() {\n\t\t\treturn this.name;\n\t\t}\n\t}, {\n\t\tkey: 'getImage',\n\t\tvalue: function getImage() {\n\t\t\treturn this.image;\n\t\t}\n\t}, {\n\t\tkey: 'getOrigin',\n\t\tvalue: function getOrigin() {\n\t\t\treturn this.origin;\n\t\t}\n\t}, {\n\t\tkey: 'getSize',\n\t\tvalue: function getSize() {\n\t\t\treturn this.size;\n\t\t}\n\t}, {\n\t\tkey: 'onImageLoaded',\n\t\tvalue: function onImageLoaded(callback) {\n\t\t\tif (this.imageLoaded) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\tthis.image.addEventListener('load', callback);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn SpriteFrame;\n}();\n\nexports.default = SpriteFrame;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _Room = __webpack_require__(7);\n\nvar _Room2 = _interopRequireDefault(_Room);\n\nvar _Viewport = __webpack_require__(8);\n\nvar _Viewport2 = _interopRequireDefault(_Viewport);\n\nvar _Game = __webpack_require__(9);\n\nvar _Game2 = _interopRequireDefault(_Game);\n\nvar _Map = __webpack_require__(10);\n\nvar _Map2 = _interopRequireDefault(_Map);\n\nvar _Player = __webpack_require__(12);\n\nvar _Player2 = _interopRequireDefault(_Player);\n\nvar _NonPlayer = __webpack_require__(14);\n\nvar _NonPlayer2 = _interopRequireDefault(_NonPlayer);\n\nvar _Wall = __webpack_require__(15);\n\nvar _Wall2 = _interopRequireDefault(_Wall);\n\nvar _Tree = __webpack_require__(16);\n\nvar _Tree2 = _interopRequireDefault(_Tree);\n\nvar _Knight = __webpack_require__(17);\n\nvar _GreenKnight = __webpack_require__(18);\n\nvar _Slime = __webpack_require__(19);\n\nvar _KingSlime = __webpack_require__(20);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n__webpack_require__(21);\n\nvar canvas = document.querySelector('.canvas__sorcerer');\n\nvar room = new _Room2.default({ width: 544, height: 416 });\nroom.setBackgroundColor('#000');\n\nvar viewport = new _Viewport2.default(canvas, { x: 0, y: 0 }, { width: 240, height: 176 });\nviewport.showRoom(room);\n\nvar map = new _Map2.default({\n\twidth: 34,\n\theight: 26\n}, room);\n\nvar game = new _Game2.default();\ngame.setCurrentMap(map);\n\nvar player = new _Player2.default(_GreenKnight.GreenKnight);\n\nmap.addActor(player, { x: 17, y: 13 });\ngame.setPlayer(player);\nviewport.followEntity(player);\n\nmap.forEachTile(function (tile) {\n\tif (!tile.hasSolidEntities()) {\n\t\tif (onChance(160)) {\n\t\t\tmap.addActor(new _NonPlayer2.default(_Slime.Slime), tile.position);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (onChance(240)) {\n\t\t\tmap.addActor(new _NonPlayer2.default(_Knight.Knight), tile.position);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (onChance(40)) {\n\t\t\tmap.addStructure(new _Wall2.default(), tile.position);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (onChance(80)) {\n\t\t\tmap.addStructure(new _Tree2.default(), tile.position);\n\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!map.hasSolidEntitiesInBoundaries(tile.position, _KingSlime.KingSlime.size) && map.areBoundariesWithinMapBoundaries(tile.position, _KingSlime.KingSlime.size)) {\n\t\tif (onChance(320)) {\n\t\t\tmap.addActor(new _NonPlayer2.default(_KingSlime.KingSlime), tile.position);\n\n\t\t\treturn;\n\t\t}\n\t}\n});\n\nfunction onChance(denominator) {\n\treturn Math.round(Math.random() * denominator) === 1;\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Room = function () {\n\tfunction Room(size) {\n\t\t_classCallCheck(this, Room);\n\n\t\tthis.setSize(size);\n\n\t\tthis.entities = new Set();\n\t}\n\n\t_createClass(Room, [{\n\t\tkey: 'addEntity',\n\t\tvalue: function addEntity(entity) {\n\t\t\tthis.entities.add(entity);\n\t\t}\n\t}, {\n\t\tkey: 'getEntities',\n\t\tvalue: function getEntities() {\n\t\t\treturn this.entities;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\t\t}\n\t}, {\n\t\tkey: 'getSize',\n\t\tvalue: function getSize() {\n\t\t\treturn this.size;\n\t\t}\n\t}, {\n\t\tkey: 'setBackgroundColor',\n\t\tvalue: function setBackgroundColor(backgroundColor) {\n\t\t\tthis.backgroundColor = backgroundColor;\n\t\t}\n\t}, {\n\t\tkey: 'getBackgroundColor',\n\t\tvalue: function getBackgroundColor() {\n\t\t\treturn this.backgroundColor;\n\t\t}\n\t}, {\n\t\tkey: 'drawBackground',\n\t\tvalue: function drawBackground(context, offset) {\n\t\t\tcontext.fillStyle = this.backgroundColor;\n\t\t\tcontext.fillRect(offset.x, offset.y, this.size.width, this.size.height);\n\n\t\t\tcontext.strokeStyle = '#bad455';\n\t\t\tcontext.strokeRect(offset.x, offset.y, this.size.width, this.size.height);\n\t\t}\n\t}]);\n\n\treturn Room;\n}();\n\nexports.default = Room;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Viewport = function () {\n\tfunction Viewport(canvas, position, size) {\n\t\t_classCallCheck(this, Viewport);\n\n\t\tthis.useCanvas(canvas);\n\t\tthis.position = position;\n\t\tthis.setSize(size);\n\n\t\tthis.startUpdating();\n\t}\n\n\t_createClass(Viewport, [{\n\t\tkey: 'showRoom',\n\t\tvalue: function showRoom(room) {\n\t\t\tthis.room = room;\n\t\t}\n\t}, {\n\t\tkey: 'useCanvas',\n\t\tvalue: function useCanvas(canvas) {\n\t\t\tthis.canvas = canvas;\n\t\t\tthis.context = canvas.getContext('2d');\n\n\t\t\tif (this.size) {\n\t\t\t\tchangeCanvasToSize(canvas, this.size);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'followEntity',\n\t\tvalue: function followEntity(entity) {\n\t\t\tthis.entityToFollow = entity;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\n\t\t\tif (this.canvas) {\n\t\t\t\tchangeCanvasToSize(this.canvas, size);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'startUpdating',\n\t\tvalue: function startUpdating() {\n\t\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update(time) {\n\t\t\t// update position to follow entity\n\t\t\tif (this.entityToFollow) {\n\t\t\t\tvar newViewportPosition = {\n\t\t\t\t\tx: this.entityToFollow.position.x - this.size.width / 2 + this.entityToFollow.sprite.size.width / 2,\n\t\t\t\t\ty: this.entityToFollow.position.y - this.size.height / 2 + this.entityToFollow.sprite.size.height / 2\n\t\t\t\t};\n\n\t\t\t\tif (newViewportPosition.x < 0) {\n\t\t\t\t\tnewViewportPosition.x = 0;\n\t\t\t\t}\n\n\t\t\t\tif (newViewportPosition.y < 0) {\n\t\t\t\t\tnewViewportPosition.y = 0;\n\t\t\t\t}\n\n\t\t\t\tif (newViewportPosition.x > this.room.size.width - this.size.width) {\n\t\t\t\t\tnewViewportPosition.x = this.room.size.width - this.size.width;\n\t\t\t\t}\n\n\t\t\t\tif (newViewportPosition.y > this.room.size.height - this.size.height) {\n\t\t\t\t\tnewViewportPosition.y = this.room.size.height - this.size.height;\n\t\t\t\t}\n\n\t\t\t\tthis.position = newViewportPosition;\n\t\t\t}\n\n\t\t\tthis.step(time);\n\t\t\tthis.draw(time);\n\n\t\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step(time) {\n\t\t\tthis.room.entities.forEach(function (entity) {\n\t\t\t\tentity.step(time);\n\n\t\t\t\tif (entity.sprite) {\n\t\t\t\t\tentity.sprite.step(time);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'draw',\n\t\tvalue: function draw(time) {\n\t\t\tvar _this = this;\n\n\t\t\t// remove viewport drawings\n\t\t\tthis.clearDrawing(this.context);\n\n\t\t\t// draw room\n\t\t\tthis.room.drawBackground(this.context, {\n\t\t\t\tx: -this.position.x,\n\t\t\t\ty: -this.position.y\n\t\t\t});\n\n\t\t\tthis.room.entities.forEach(function (entity) {\n\t\t\t\tif (entity.hasOwnProperty('sprite') && entity.hasOwnProperty('position') && entity.position.hasOwnProperty('x') && entity.position.hasOwnProperty('y')) {\n\t\t\t\t\tentity.sprite.draw(_this.context, calculatePositionInViewportFromPosition({\n\t\t\t\t\t\tx: entity.position.x + entity.sprite.origin.x,\n\t\t\t\t\t\ty: entity.position.y + entity.sprite.origin.y\n\t\t\t\t\t}, _this));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'drawMiddle',\n\t\tvalue: function drawMiddle(context) {\n\t\t\tcontext.strokeStyle = '#bad455';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(0, 0);\n\t\t\tcontext.lineTo(this.size.width, this.size.height);\n\t\t\tcontext.stroke();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(this.size.width, 0);\n\t\t\tcontext.lineTo(0, this.size.height);\n\t\t\tcontext.stroke();\n\t\t}\n\t}, {\n\t\tkey: 'clearDrawing',\n\t\tvalue: function clearDrawing(context) {\n\t\t\tcontext.clearRect(0, 0, this.size.width, this.size.height);\n\t\t}\n\t}]);\n\n\treturn Viewport;\n}();\n\nexports.default = Viewport;\n\n\nfunction changeCanvasToSize(canvas, size) {\n\tcanvas.width = size.width;\n\tcanvas.height = size.height;\n}\n\nfunction calculatePositionInViewportFromPosition(position, viewport) {\n\treturn {\n\t\tx: position.x - viewport.position.x,\n\t\ty: position.y - viewport.position.y\n\t};\n}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PubSub = __webpack_require__(3);\n\nvar _PubSub2 = _interopRequireDefault(_PubSub);\n\nvar _Log = __webpack_require__(1);\n\nvar _Log2 = _interopRequireDefault(_Log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Game = function () {\n\tfunction Game() {\n\t\t_classCallCheck(this, Game);\n\n\t\tthis.player;\n\n\t\t_PubSub2.default.subscribe('playerTurnTaken', this.tick.bind(this));\n\t}\n\n\t_createClass(Game, [{\n\t\tkey: 'tick',\n\t\tvalue: function tick() {\n\t\t\tthis.performNonPlayerTurns();\n\t\t}\n\t}, {\n\t\tkey: 'setCurrentMap',\n\t\tvalue: function setCurrentMap(map) {\n\t\t\tthis.map = map;\n\t\t}\n\t}, {\n\t\tkey: 'setPlayer',\n\t\tvalue: function setPlayer(playerEntity) {\n\t\t\tthis.player = playerEntity;\n\t\t}\n\t}, {\n\t\tkey: 'performNonPlayerTurns',\n\t\tvalue: function performNonPlayerTurns() {\n\t\t\tvar _this = this;\n\n\t\t\tthis.map.actors.forEach(function (actor) {\n\t\t\t\tif (actor !== _this.player) {\n\t\t\t\t\tactor.takeTurn();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Game;\n}();\n\nexports.default = Game;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Tile = __webpack_require__(11);\n\nvar _Tile2 = _interopRequireDefault(_Tile);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Map = function () {\n\tfunction Map(size, room) {\n\t\t_classCallCheck(this, Map);\n\n\t\tthis.size = size;\n\t\tthis.room = room;\n\t\tthis.tiles = createTilesetWithSize(size);\n\t\tthis.actors = new Set();\n\t\tthis.structures = new Set();\n\t}\n\n\t_createClass(Map, [{\n\t\tkey: 'addActor',\n\t\tvalue: function addActor(actor, position) {\n\t\t\tactor.map = this;\n\t\t\tthis.actors.add(actor);\n\n\t\t\tthis.forEachTileInBoundaries(position, actor.size, function (tile) {\n\t\t\t\ttile.addActor(actor);\n\t\t\t});\n\n\t\t\tactor.updateMapPosition(position);\n\t\t\tthis.room.addEntity(actor);\n\t\t}\n\t}, {\n\t\tkey: 'addStructure',\n\t\tvalue: function addStructure(structure, position) {\n\t\t\tstructure.map = this;\n\t\t\tthis.structures.add(structure);\n\n\t\t\tthis.forEachTileInBoundaries(position, structure.size, function (tile) {\n\t\t\t\ttile.addStructure(structure);\n\t\t\t});\n\n\t\t\tstructure.updateMapPosition(position);\n\t\t\tthis.room.addEntity(structure);\n\t\t}\n\t}, {\n\t\tkey: 'findTileAtPosition',\n\t\tvalue: function findTileAtPosition(position) {\n\t\t\treturn this.tiles[position.x][position.y];\n\t\t}\n\t}, {\n\t\tkey: 'forEachTile',\n\t\tvalue: function forEachTile(callback) {\n\t\t\tthis.tiles.forEach(function (tileRow) {\n\t\t\t\ttileRow.forEach(callback);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'forEachTileInBoundaries',\n\t\tvalue: function forEachTileInBoundaries(position, size, callback) {\n\t\t\tfor (var x = position.x; x < position.x + size.width; x = x + 1) {\n\t\t\t\tfor (var y = position.y; y < position.y + size.height; y = y + 1) {\n\t\t\t\t\tvar tilePosition = { x: x, y: y };\n\n\t\t\t\t\tif (this.hasTileAtPosition(tilePosition)) {\n\t\t\t\t\t\tcallback(this.findTileAtPosition(tilePosition));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'hasTileAtPosition',\n\t\tvalue: function hasTileAtPosition(position) {\n\t\t\treturn Boolean(this.tiles[position.x] && this.tiles[position.x][position.y]);\n\t\t}\n\t}, {\n\t\tkey: 'moveActorFromPositionToPosition',\n\t\tvalue: function moveActorFromPositionToPosition(actor, oldPosition, newPosition) {\n\t\t\tthis.forEachTileInBoundaries(oldPosition, actor.size, function (tile) {\n\t\t\t\ttile.removeActor(actor);\n\t\t\t});\n\n\t\t\tthis.forEachTileInBoundaries(newPosition, actor.size, function (tile) {\n\t\t\t\ttile.addActor(actor);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'getSolidEntitiesInBoundaries',\n\t\tvalue: function getSolidEntitiesInBoundaries(position, size) {\n\t\t\tvar exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n\t\t\tvar solidEntities = [];\n\n\t\t\tthis.forEachTileInBoundaries(position, size, function (tile) {\n\t\t\t\tsolidEntities = solidEntities.concat(tile.getSolidEntities(exclude));\n\t\t\t});\n\n\t\t\treturn solidEntities;\n\t\t}\n\t}, {\n\t\tkey: 'hasSolidEntitiesInBoundaries',\n\t\tvalue: function hasSolidEntitiesInBoundaries(position, size) {\n\t\t\tvar exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n\t\t\treturn this.getSolidEntitiesInBoundaries(position, size, exclude).length > 0;\n\t\t}\n\t}, {\n\t\tkey: 'getSolidActorsInBoundaries',\n\t\tvalue: function getSolidActorsInBoundaries(position, size) {\n\t\t\tvar exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n\t\t\tvar solidActors = [];\n\n\t\t\tthis.forEachTileInBoundaries(position, size, function (tile) {\n\t\t\t\tsolidActors = solidActors.concat(tile.getSolidActors(exclude));\n\t\t\t});\n\n\t\t\treturn solidActors;\n\t\t}\n\t}, {\n\t\tkey: 'hasSolidActorsInBoundaries',\n\t\tvalue: function hasSolidActorsInBoundaries(position, size) {\n\t\t\tvar exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n\t\t\treturn this.getSolidActorsInBoundaries(position, size, exclude).length > 0;\n\t\t}\n\t}, {\n\t\tkey: 'areBoundariesWithinMapBoundaries',\n\t\tvalue: function areBoundariesWithinMapBoundaries(position, size) {\n\t\t\treturn position.x >= 0 && position.y >= 0 && position.x + size.width <= this.size.width && position.y + size.height <= this.size.height;\n\t\t}\n\t}]);\n\n\treturn Map;\n}();\n\nexports.default = Map;\n\n\nfunction createTilesetWithSize(size) {\n\tvar tiles = [];\n\n\tfor (var x = 0; x < size.width; x += 1) {\n\t\ttiles[x] = [];\n\n\t\tfor (var y = 0; y < size.height; y += 1) {\n\t\t\ttiles[x][y] = new _Tile2.default({ x: x, y: y });\n\t\t}\n\t}\n\n\treturn tiles;\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tile = function () {\n\tfunction Tile(position) {\n\t\t_classCallCheck(this, Tile);\n\n\t\tthis.position = position;\n\t\tthis.actors = [];\n\t\tthis.structures = [];\n\t}\n\n\t_createClass(Tile, [{\n\t\tkey: \"addActor\",\n\t\tvalue: function addActor(actor) {\n\t\t\tthis.actors.push(actor);\n\t\t}\n\t}, {\n\t\tkey: \"removeActor\",\n\t\tvalue: function removeActor(actor) {\n\t\t\tvar actorIndex = this.actors.indexOf(actor);\n\n\t\t\tif (actorIndex !== -1) {\n\t\t\t\tthis.actors.splice(actorIndex, 1);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"addStructure\",\n\t\tvalue: function addStructure(structure) {\n\t\t\tthis.structures.push(structure);\n\t\t}\n\t}, {\n\t\tkey: \"removeStructure\",\n\t\tvalue: function removeStructure(structure) {\n\t\t\tvar structureIndex = this.structures.findIndex(structure);\n\n\t\t\tif (structureIndex !== -1) {\n\t\t\t\tthis.actors.splice(structureIndex, 1);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"getEntities\",\n\t\tvalue: function getEntities() {\n\t\t\treturn this.structures.concat(this.actors);\n\t\t}\n\t}, {\n\t\tkey: \"getActors\",\n\t\tvalue: function getActors() {\n\t\t\treturn this.actors;\n\t\t}\n\t}, {\n\t\tkey: \"getSolidEntities\",\n\t\tvalue: function getSolidEntities() {\n\t\t\tvar exclude = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\tvar entities = this.getEntities();\n\n\t\t\treturn entities.filter(function (entity) {\n\t\t\t\treturn entity.solid === true && !exclude.includes(entity);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"getSolidActors\",\n\t\tvalue: function getSolidActors() {\n\t\t\tvar exclude = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\tvar actors = this.getActors();\n\n\t\t\treturn actors.filter(function (actor) {\n\t\t\t\treturn actor.solid === true && !exclude.includes(actor);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"hasSolidEntities\",\n\t\tvalue: function hasSolidEntities() {\n\t\t\tvar exclude = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\treturn this.getSolidEntities().length > 0;\n\t\t}\n\t}, {\n\t\tkey: \"hasSolidActors\",\n\t\tvalue: function hasSolidActors() {\n\t\t\tvar exclude = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\treturn this.getSolidActors().length > 0;\n\t\t}\n\t}]);\n\n\treturn Tile;\n}();\n\nexports.default = Tile;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Actor2 = __webpack_require__(4);\n\nvar _Actor3 = _interopRequireDefault(_Actor2);\n\nvar _PubSub = __webpack_require__(3);\n\nvar _PubSub2 = _interopRequireDefault(_PubSub);\n\nvar _Log = __webpack_require__(1);\n\nvar _Log2 = _interopRequireDefault(_Log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Player = function (_Actor) {\n\t_inherits(Player, _Actor);\n\n\tfunction Player(type, options) {\n\t\t_classCallCheck(this, Player);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Player.__proto__ || Object.getPrototypeOf(Player)).call(this, type, options));\n\n\t\t_Log2.default.showMessage('<em>' + _this.type + '</em> awakens...');\n\t\twindow.addEventListener('keydown', _this.onKeyDown.bind(_this));\n\t\treturn _this;\n\t}\n\n\t_createClass(Player, [{\n\t\tkey: 'onKeyDown',\n\t\tvalue: function onKeyDown(event) {\n\t\t\tif (!this.dead) {\n\t\t\t\tvar actionTaken = false;\n\n\t\t\t\tif (event.key === ' ' || event.key === '5') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t_Log2.default.showMessage(this.type + ' waits...');\n\t\t\t\t\tactionTaken = true;\n\t\t\t\t}\n\n\t\t\t\tif (event.key === 'ArrowUp' || event.key === '8') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveUp();\n\t\t\t\t}\n\n\t\t\t\tif (event.key === 'ArrowRight' || event.key === '6') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveRight();\n\t\t\t\t}\n\n\t\t\t\tif (event.key === 'ArrowDown' || event.key === '2') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveDown();\n\t\t\t\t}\n\n\t\t\t\tif (event.key === 'ArrowLeft' || event.key === '4') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveLeft();\n\t\t\t\t}\n\n\t\t\t\tif (actionTaken) {\n\t\t\t\t\t_PubSub2.default.publish('playerTurnTaken');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Player;\n}(_Actor3.default);\n\nexports.default = Player;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _SpriteFrame = __webpack_require__(5);\n\nvar _SpriteFrame2 = _interopRequireDefault(_SpriteFrame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Sprite = function () {\n\tfunction Sprite(frames) {\n\t\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\t_classCallCheck(this, Sprite);\n\n\t\tthis.setFrames(frames);\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.size = options.size;\n\t\t} else {\n\t\t\tthis.size = calculateMaximumSizeFromFrames(this.getFrames());\n\t\t}\n\n\t\tif (options.hasOwnProperty('origin')) {\n\t\t\tthis.setOrigin(options.origin);\n\t\t} else {\n\t\t\tthis.setOrigin({ x: 0, y: 0 });\n\t\t}\n\n\t\tif (options.hasOwnProperty('frameIndex')) {\n\t\t\tthis.setCurrentFrameIndex(options.frameIndex);\n\t\t} else {\n\t\t\tthis.setCurrentFrameIndex(0);\n\t\t}\n\n\t\tif (options.hasOwnProperty('framesPerSecond')) {\n\t\t\tthis.setFramesPerSecond(options.framesPerSecond);\n\t\t} else {\n\t\t\tthis.setFramesPerSecond(1);\n\t\t}\n\n\t\tif (options.hasOwnProperty('looping')) {\n\t\t\tthis.looping = options.looping;\n\t\t} else {\n\t\t\tthis.looping = true;\n\t\t}\n\n\t\tthis.timeOfPreviousFrame = 0;\n\t}\n\n\t_createClass(Sprite, [{\n\t\tkey: 'setFrames',\n\t\tvalue: function setFrames() {\n\t\t\tvar frames = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\tif (Array.isArray(frames)) {\n\t\t\t\tthis.frames = frames;\n\t\t\t} else if (frames instanceof _SpriteFrame2.default) {\n\t\t\t\tthis.frames = [frames];\n\t\t\t} else {\n\t\t\t\tthis.frames = [];\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'getFrames',\n\t\tvalue: function getFrames() {\n\t\t\treturn this.frames;\n\t\t}\n\t}, {\n\t\tkey: 'setFramesPerSecond',\n\t\tvalue: function setFramesPerSecond(framesPerSecond) {\n\t\t\tthis.framesPerSecond = framesPerSecond;\n\t\t}\n\t}, {\n\t\tkey: 'getFramesPerSecond',\n\t\tvalue: function getFramesPerSecond() {\n\t\t\treturn this.framesPerSecond;\n\t\t}\n\t}, {\n\t\tkey: 'setCurrentFrameIndex',\n\t\tvalue: function setCurrentFrameIndex(newCurrentFrameIndex) {\n\t\t\tif (this.frames[newCurrentFrameIndex]) {\n\t\t\t\tthis.currentFrameIndex = newCurrentFrameIndex;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'getCurrentFrame',\n\t\tvalue: function getCurrentFrame() {\n\t\t\treturn this.frames[this.currentFrameIndex];\n\t\t}\n\t}, {\n\t\tkey: 'draw',\n\t\tvalue: function draw(context, position) {\n\t\t\tvar currentFrame = this.getCurrentFrame();\n\n\t\t\tif (currentFrame) {\n\t\t\t\tcontext.drawImage(currentFrame.getImage(), currentFrame.getOrigin().x, currentFrame.getOrigin().y, currentFrame.getSize().width, currentFrame.getSize().height, position.x, position.y, this.size.width, this.size.height);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step(time) {\n\t\t\tvar framesPerSecond = this.getFramesPerSecond();\n\n\t\t\tif (framesPerSecond !== 0 && !(!this.looping && this.currentFrameIndex === this.frames.length - 1)) {\n\t\t\t\tvar timeSincePreviousFrame = time - this.timeOfPreviousFrame;\n\n\t\t\t\tvar frameChange = timeSincePreviousFrame / (1000 / framesPerSecond);\n\n\t\t\t\tif (frameChange > 0) {\n\t\t\t\t\tframeChange = Math.floor(frameChange);\n\t\t\t\t}\n\n\t\t\t\tif (frameChange < 0) {\n\t\t\t\t\tframeChange = Math.ceil(frameChange);\n\t\t\t\t}\n\n\t\t\t\tif (frameChange !== 0) {\n\t\t\t\t\tthis.timeOfPreviousFrame = time;\n\t\t\t\t\tthis.setCurrentFrameIndex(calculateNewFrameIndexWithChange(this.currentFrameIndex, frameChange, this.frames.length, this.looping));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'nextFrame',\n\t\tvalue: function nextFrame() {\n\t\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, 1, this.frames.length, this.looping);\n\t\t}\n\t}, {\n\t\tkey: 'previousFrame',\n\t\tvalue: function previousFrame() {\n\t\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, -1, this.frames.length, this.looping);\n\t\t}\n\t}, {\n\t\tkey: 'setOrigin',\n\t\tvalue: function setOrigin(origin) {\n\t\t\tthis.origin = origin;\n\t\t}\n\t}, {\n\t\tkey: 'getOrigin',\n\t\tvalue: function getOrigin() {\n\t\t\treturn this.origin;\n\t\t}\n\t}]);\n\n\treturn Sprite;\n}();\n\nexports.default = Sprite;\n\n\nfunction calculateNewFrameIndexWithChange(currentFrameIndex, change, amountOfFrames) {\n\tvar looping = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n\tchange = Math.round(change);\n\n\tif (change === 0) {\n\t\treturn currentFrameIndex;\n\t}\n\n\tif (looping) {\n\t\tvar newFrameIndex = (currentFrameIndex + change) % amountOfFrames;\n\n\t\tif (newFrameIndex < 0) {\n\t\t\treturn newFrameIndex + amountOfFrames;\n\t\t}\n\n\t\treturn newFrameIndex;\n\t}\n\n\tif (!looping) {\n\t\tvar _newFrameIndex = currentFrameIndex + change;\n\n\t\tif (_newFrameIndex > amountOfFrames - 1) {\n\t\t\treturn amountOfFrames - 1;\n\t\t}\n\n\t\tif (_newFrameIndex < 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn _newFrameIndex;\n\t}\n}\n\nfunction calculateMaximumSizeFromFrames(frames) {\n\tvar biggestWidth = 0;\n\tvar biggestHeight = 0;\n\n\tframes.forEach(function (frame) {\n\t\tif (frame.size.width > biggestWidth) {\n\t\t\tbiggestWidth = frame.size.width;\n\t\t}\n\n\t\tif (frame.size.height > biggestHeight) {\n\t\t\tbiggestHeight = frame.size.height;\n\t\t}\n\t});\n\n\treturn {\n\t\twidth: biggestWidth,\n\t\theight: biggestHeight\n\t};\n}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Actor2 = __webpack_require__(4);\n\nvar _Actor3 = _interopRequireDefault(_Actor2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar NonPlayer = function (_Actor) {\n\t_inherits(NonPlayer, _Actor);\n\n\tfunction NonPlayer(type, options) {\n\t\t_classCallCheck(this, NonPlayer);\n\n\t\treturn _possibleConstructorReturn(this, (NonPlayer.__proto__ || Object.getPrototypeOf(NonPlayer)).call(this, type, options));\n\t}\n\n\t_createClass(NonPlayer, [{\n\t\tkey: 'takeTurn',\n\t\tvalue: function takeTurn() {\n\t\t\tif (!this.dead) {\n\t\t\t\tvar decision = Math.round(Math.random() * 8);\n\n\t\t\t\tif (decision === 0) {\n\t\t\t\t\tthis.moveUp();\n\t\t\t\t}\n\n\t\t\t\tif (decision === 1) {\n\t\t\t\t\tthis.moveRight();\n\t\t\t\t}\n\n\t\t\t\tif (decision === 2) {\n\t\t\t\t\tthis.moveDown();\n\t\t\t\t}\n\n\t\t\t\tif (decision === 3) {\n\t\t\t\t\tthis.moveLeft();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn NonPlayer;\n}(_Actor3.default);\n\nexports.default = NonPlayer;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Entity2 = __webpack_require__(2);\n\nvar _Entity3 = _interopRequireDefault(_Entity2);\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Wall = function (_Entity) {\n\t_inherits(Wall, _Entity);\n\n\tfunction Wall(options) {\n\t\t_classCallCheck(this, Wall);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Wall.__proto__ || Object.getPrototypeOf(Wall)).call(this, options));\n\n\t\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/wall-sheet.png\", \"frames\": [ { \"name\": \"wall_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\t\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\t\tvar wallSprite = spriteAtlas.createSpriteWithFrames(['wall_0']);\n\n\t\t_this.setSprite(wallSprite);\n\t\t_this.setSize({ width: 1, height: 1 });\n\n\t\t_this.setSolidity(true);\n\t\t_this.type = 'wall';\n\t\treturn _this;\n\t}\n\n\t_createClass(Wall, [{\n\t\tkey: 'canBeAttacked',\n\t\tvalue: function canBeAttacked() {\n\t\t\treturn false;\n\t\t}\n\t}, {\n\t\tkey: 'updateMapPosition',\n\t\tvalue: function updateMapPosition(mapPosition) {\n\t\t\tthis.mapPosition = mapPosition;\n\t\t\tthis.position = {\n\t\t\t\tx: mapPosition.x * 16,\n\t\t\t\ty: mapPosition.y * 16\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn Wall;\n}(_Entity3.default);\n\nexports.default = Wall;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Entity2 = __webpack_require__(2);\n\nvar _Entity3 = _interopRequireDefault(_Entity2);\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Tree = function (_Entity) {\n\t_inherits(Tree, _Entity);\n\n\tfunction Tree(options) {\n\t\t_classCallCheck(this, Tree);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Tree.__proto__ || Object.getPrototypeOf(Tree)).call(this, options));\n\n\t\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/deadtree-sheet.png\", \"frames\": [ { \"name\": \"deadtree\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 32 } } ] }';\n\t\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\t\tvar wallSprite = spriteAtlas.createSpriteWithFrames(['deadtree']);\n\n\t\t_this.setSprite(wallSprite);\n\t\t_this.setSize({ width: 1, height: 1 });\n\t\t_this.sprite.setOrigin({ x: 0, y: -16 });\n\n\t\t_this.setSolidity(true);\n\t\t_this.type = 'wall';\n\t\treturn _this;\n\t}\n\n\t_createClass(Tree, [{\n\t\tkey: 'canBeAttacked',\n\t\tvalue: function canBeAttacked() {\n\t\t\treturn false;\n\t\t}\n\t}, {\n\t\tkey: 'updateMapPosition',\n\t\tvalue: function updateMapPosition(mapPosition) {\n\t\t\tthis.mapPosition = mapPosition;\n\t\t\tthis.position = {\n\t\t\t\tx: mapPosition.x * 16,\n\t\t\t\ty: mapPosition.y * 16\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn Tree;\n}(_Entity3.default);\n\nexports.default = Tree;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Knight = undefined;\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Knight = exports.Knight = {\n\ttype: 'knight',\n\tstats: {\n\t\tmaxHealth: 10,\n\t\tstrength: 3\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 1,\n\t\theight: 1\n\t},\n\tsolid: true\n};\n\nfunction getSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/character-sheet.png\", \"frames\": [ { \"name\": \"player_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_2\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_3\", \"origin\": { \"x\": 48, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, {\"name\": \"player_idle_4\", \"origin\": { \"x\": 64, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_5\", \"origin\": { \"x\": 80, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar knightSprite = spriteAtlas.createSpriteWithFrames(['player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_1', 'player_idle_2', 'player_idle_3', 'player_idle_3', 'player_idle_3', 'player_idle_3', 'player_idle_4', 'player_idle_5']);\n\n\tknightSprite.looping = true;\n\tknightSprite.setFramesPerSecond(10);\n\n\treturn knightSprite;\n}\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.GreenKnight = undefined;\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GreenKnight = exports.GreenKnight = {\n\ttype: 'green knight',\n\tstats: {\n\t\tmaxHealth: 10,\n\t\tstrength: 3\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 1,\n\t\theight: 1\n\t},\n\tsolid: true\n};\n\nfunction getSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/character-sheet-green.png\", \"frames\": [ { \"name\": \"player_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_2\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_3\", \"origin\": { \"x\": 48, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, {\"name\": \"player_idle_4\", \"origin\": { \"x\": 64, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_5\", \"origin\": { \"x\": 80, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar knightSprite = spriteAtlas.createSpriteWithFrames(['player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_1', 'player_idle_2', 'player_idle_3', 'player_idle_3', 'player_idle_3', 'player_idle_3', 'player_idle_4', 'player_idle_5']);\n\n\tknightSprite.looping = true;\n\tknightSprite.setFramesPerSecond(10);\n\n\treturn knightSprite;\n}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Slime = undefined;\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Slime = exports.Slime = {\n\ttype: 'slime',\n\tstats: {\n\t\tmaxHealth: 16,\n\t\tstrength: 1\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 1,\n\t\theight: 1\n\t},\n\tsolid: true\n};\n\nfunction getSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/slime-sheet.png\", \"frames\": [ { \"name\": \"slime_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"slime_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar slimeSprite = spriteAtlas.createSpriteWithFrames(['slime_idle_0', 'slime_idle_1']);\n\n\tslimeSprite.setFramesPerSecond(2);\n\n\treturn slimeSprite;\n}\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.KingSlime = undefined;\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar KingSlime = exports.KingSlime = {\n\ttype: 'king slime',\n\tstats: {\n\t\tmaxHealth: 28,\n\t\tstrength: 2\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 2,\n\t\theight: 2\n\t},\n\tsolid: true\n};\n\nfunction getSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/king-slime-sheet.png\", \"frames\": [ { \"name\": \"slime_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 32, \"height\": 32 } }, { \"name\": \"slime_idle_1\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 32, \"height\": 32 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar slimeSprite = spriteAtlas.createSpriteWithFrames(['slime_idle_0', 'slime_idle_1']);\n\n\tslimeSprite.setFramesPerSecond(1);\n\n\treturn slimeSprite;\n}\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// sorcerer.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ba33b74eac50b5a864a4","import Sprite from './Sprite';\nimport SpriteFrame from './SpriteFrame';\n\nexport default class SpriteAtlas {\n\tconstructor(definition) {\n\t\tthis.frames = createFramesFromDefinition(definition);\n\t}\n\n\tgetFrame(frameName) {\n\t\treturn this.frames.find((frame) => {\n\t\t\treturn frame.getName() === frameName;\n\t\t});\n\t}\n\n\tcreateSpriteWithFrames(frameNames) {\n\t\tlet frames = frameNames.map((frameName) => {\n\t\t\treturn this.getFrame(frameName);\n\t\t})\n\n\t\treturn new Sprite(frames);\n\t}\n}\n\nfunction createFramesFromDefinition(definition) {\n\tlet frames = [];\n\n\tif (definition.hasOwnProperty('file')) {\n\t\tlet image = new Image();\n\t\timage.src = definition.file;\n\n\t\tdefinition.frames.forEach((frameData) => {\n\t\t\tlet frame = new SpriteFrame(\n\t\t\t\tframeData.name,\n\t\t\t\timage,\n\t\t\t\tframeData.origin,\n\t\t\t\tframeData.size,\n\t\t\t);\n\n\t\t\tframes.push(frame);\n\t\t});\n\t}\n\n\treturn frames;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/SpriteAtlas.js","const logElement = document.querySelector('.js-log')\n\nexport default class Log {\n\tstatic showMessage(message) {\n\t\tlet messageElement = document.createElement('li');\n\t\tmessageElement.classList.add('log__item');\n\t\tmessageElement.innerHTML = message;\n\t\tlogElement.appendChild(messageElement);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/modules/Log.js","export default class Entity {\n\tconstructor(options = {}) {\n\t\tif (options.hasOwnProperty('sprite')) {\n\t\t\tthis.setSprite(options.sprite);\n\t\t}\n\n\t\tif (options.hasOwnProperty('position')) {\n\t\t\tthis.setPosition(options.position);\n\t\t}\n\n\t\tif (options.hasOwnProperty('solid')) {\n\t\t\tthis.setSolidity(options.solid);\n\t\t}\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.setSize(options.size);\n\t\t}\n\t}\n\n\tstep(time) {\n\n\t}\n\n\tsetSprite(sprite) {\n\t\tthis.sprite = sprite;\n\t}\n\n\tsetPosition(position) {\n\t\tthis.position = position;\n\t}\n\n\tgetPosition() {\n\t\treturn this.position;\n\t}\n\n\tsetSolidity(solid) {\n\t\tthis.solid = solid;\n\t}\n\n\tisSolid() {\n\t\treturn this.solid;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\t}\n\n\tgetSize() {\n\t\treturn this.size;\n\t}\n\n\tchangePosition(change) {\n\t\tlet currentPosition = this.getPosition();\n\n\t\tthis.setPosition({\n\t\t\tx: currentPosition.x + change.x,\n\t\t\ty: currentPosition.y + change.y,\n\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Entity.js","const topics = new Map();\n\nexport default class PubSub {\n\tstatic subscribe(topic, callback) {\n\t\tif (!topics.has(topic)) {\n\t\t\ttopics.set(topic, []);\n\t\t}\n\n\t\tlet topicCallbacks = topics.get(topic);\n\t\ttopicCallbacks.push(callback);\n\t}\n\n\tstatic publish(topic, data) {\n\t\tif (topics.has(topic)) {\n\t\t\ttopics.get(topic).forEach((callback) => {\n\t\t\t\tcallback(data);\n\t\t\t});\n\t\t}\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/PubSub.js","import Entity from './../core/Entity';\nimport SpriteAtlas from './../core/SpriteAtlas';\nimport Log from './../modules/Log';\n\nconst STATS_DEFAULT = {\n\tstrength: 1,\n\tmaxHealth: 1,\n}\n\nexport default class Actor extends Entity {\n\tconstructor (creatureDefinition, options) {\n\t\tsuper(options);\n\t\tthis.applyCreatureDefinition(creatureDefinition);\n\n\t\tthis.health = this.stats.maxHealth;\n\t}\n\n\tapplyCreatureDefinition(creatureDefinition) {\n\t\tthis.type = creatureDefinition.type;\n\t\tthis.applyStats(creatureDefinition.stats);\n\t\tthis.setSprite(creatureDefinition.sprite);\n\t\tthis.setSize(creatureDefinition.size);\n\t\tthis.setSolidity(creatureDefinition.solid);\n\t}\n\n\tapplyStats(stats) {\n\t\tthis.stats = Object.assign({}, STATS_DEFAULT, stats);\n\t}\n\n\tbumpInto(target) {\n\t\tif (target.canBeAttacked()) {\n\t\t\tLog.showMessage(`<em>${this.type}</em> attacks <em>${target.type}</em>`);\n\n\t\t\tthis.attackTarget(target);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tattackTarget(target) {\n\t\ttarget.applyDamage(this.calculateAttackDamage());\n\t}\n\n\tcalculateAttackDamage() {\n\t\treturn this.stats.strength;\n\t}\n\n\tapplyDamage(damage) {\n\t\tLog.showMessage(`<em>${this.type}</em> takes ${damage} damage`);\n\t\tthis.reduceHealth(damage);\n\t}\n\n\trestoreHealth(amount) {\n\t\tthis.changeHealth(this.health + amount);\n\t}\n\n\treduceHealth(amount) {\n\t\tthis.changeHealth(this.health - amount);\n\t}\n\n\tchangeHealth(health) {\n\t\tif (health > this.stats.maxHealth) {\n\t\t\tthis.health = this.stats.maxHealth;\n\t\t\tLog.showMessage(`<em>${this.type}</em> health max at ${this.health}`);\n\t\t} else if (health <= 0) {\n\t\t\tthis.health = 0;\n\t\t\tthis.die();\n\t\t} else {\n\t\t\tthis.health = health;\n\t\t\tLog.showMessage(`<em>${this.type}</em> health is ${this.health}/${this.stats.maxHealth}`);\n\t\t}\n\t}\n\n\tmoveTo(newMapPosition) {\n\t\tif (!this.map.hasTileAtPosition(newMapPosition)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t!this.map.hasSolidEntitiesInBoundaries(newMapPosition, this.size, [this])\n\t\t\t&& this.map.areBoundariesWithinMapBoundaries(newMapPosition, this.size)\n\t\t) {\n\t\t\tthis.map.moveActorFromPositionToPosition(this, this.mapPosition, newMapPosition);\n\t\t\tthis.updateMapPosition(newMapPosition);\n\n\t\t\treturn true;\n\t\t}\n\n\t\tlet solidActorsOnNewPosition = this.map.getSolidActorsInBoundaries(newMapPosition, this.size, [this]);\n\n\t\tif (solidActorsOnNewPosition.length > 0) {\n\t\t\tlet actionTaken = false;\n\n\t\t\tsolidActorsOnNewPosition.forEach((solidActor) => {\n\t\t\t\tlet bumpIntoResult = this.bumpInto(solidActor);\n\n\t\t\t\tif (bumpIntoResult) {\n\t\t\t\t\tactionTaken = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn actionTaken;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tmoveUp() {\n\t\treturn this.moveTo({\n\t\t\tx: this.mapPosition.x,\n\t\t\ty: this.mapPosition.y - 1\n\t\t});\n\t}\n\n\tmoveRight() {\n\t\treturn this.moveTo({\n\t\t\tx: this.mapPosition.x + 1,\n\t\t\ty: this.mapPosition.y\n\t\t});\n\t}\n\n\tmoveDown() {\n\t\treturn this.moveTo({\n\t\t\tx: this.mapPosition.x,\n\t\t\ty: this.mapPosition.y + 1\n\t\t});\n\t}\n\n\tmoveLeft() {\n\t\treturn this.moveTo({\n\t\t\tx: this.mapPosition.x - 1,\n\t\t\ty: this.mapPosition.y,\n\t\t});\n\t}\n\n\tcanBeAttacked() {\n\t\treturn !this.dead;\n\t}\n\n\tdie() {\n\t\tthis.dead = true;\n\t\tthis.size = {\n\t\t\twidth: 1,\n\t\t\theight: 1,\n\t\t}\n\t\tthis.sprite = getDeadSprite();\n\n\t\tLog.showMessage(`<em>${this.type}</em> is dead`);\n\t}\n\n\tupdateMapPosition(mapPosition) {\n\t\tthis.mapPosition = mapPosition;\n\t\tthis.position = {\n\t\t\tx: mapPosition.x * 16,\n\t\t\ty: mapPosition.y * 16,\n\t\t};\n\t}\n}\n\nfunction getDeadSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/grave-sheet.png\", \"frames\": [ { \"name\": \"grave_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet graveSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'grave_0',\n\t]);\n\n\treturn graveSprite;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Actor.js","export default class SpriteFrame {\n\tconstructor(name, image, position, size) {\n\t\tthis.setName(name);\n\t\tthis.setImage(image);\n\t\tthis.setOrigin(position);\n\t\tthis.setSize(size);\n\t}\n\n\tsetName(name) {\n\t\tthis.name = name;\n\t}\n\n\tsetImage(image) {\n\t\tthis.imageLoaded = false;\n\t\tthis.image = image;\n\n\t\tthis.image.addEventListener('load', () => {\n\t\t\tthis.imageLoaded = true;\n\t\t});\n\t}\n\n\tsetOrigin(origin) {\n\t\tthis.origin = origin;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\tgetImage() {\n\t\treturn this.image;\n\t}\n\n\tgetOrigin() {\n\t\treturn this.origin;\n\t}\n\n\tgetSize() {\n\t\treturn this.size;\n\t}\n\n\tonImageLoaded(callback) {\n\t\tif (this.imageLoaded) {\n\t\t\tcallback();\n\t\t} else {\n\t\t\tthis.image.addEventListener('load', callback);\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/SpriteFrame.js","require('../style/main.scss');\n\nimport Room from './core/Room';\nimport Viewport from './core/Viewport';\n\nimport Game from './modules/Game';\nimport Map from './modules/Map';\n\nimport Player from './entities/Player';\nimport NonPlayer from './entities/NonPlayer';\nimport Wall from './entities/Wall';\nimport Tree from './entities/Tree';\n\nimport {Knight} from './creatureTypes/Knight';\nimport {GreenKnight} from './creatureTypes/GreenKnight';\nimport {Slime} from './creatureTypes/Slime';\nimport {KingSlime} from './creatureTypes/KingSlime';\n\nconst canvas = document.querySelector('.canvas__sorcerer');\n\nconst room = new Room({width: 544, height: 416});\nroom.setBackgroundColor('#000');\n\nconst viewport = new Viewport(canvas, {x: 0, y: 0}, {width: 240, height: 176});\nviewport.showRoom(room);\n\nconst map = new Map({\n\twidth: 34,\n\theight: 26,\n}, room);\n\nconst game = new Game();\ngame.setCurrentMap(map);\n\nconst player = new Player(GreenKnight);\n\nmap.addActor(player, {x: 17, y: 13});\ngame.setPlayer(player);\nviewport.followEntity(player);\n\nmap.forEachTile((tile) => {\n\tif (!tile.hasSolidEntities()) {\n\t\tif (onChance(160)) {\n\t\t\tmap.addActor(new NonPlayer(Slime), tile.position);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (onChance(240)) {\n\t\t\tmap.addActor(new NonPlayer(Knight), tile.position);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (onChance(40)) {\n\t\t\tmap.addStructure(new Wall(), tile.position);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (onChance(80)) {\n\t\t\tmap.addStructure(new Tree(), tile.position);\n\n\t\t\treturn;\n\t\t}\n\t}\n\tif (\n\t\t!map.hasSolidEntitiesInBoundaries(tile.position, KingSlime.size)\n\t\t&& map.areBoundariesWithinMapBoundaries(tile.position, KingSlime.size)\n\t) {\n\t\tif (onChance(320)) {\n\t\t\tmap.addActor(new NonPlayer(KingSlime), tile.position);\n\n\t\t\treturn;\n\t\t}\n\t}\n});\n\nfunction onChance(denominator) {\n\treturn Math.round(Math.random() * denominator) === 1;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/main.js","export default class Room {\n\tconstructor(size) {\n\t\tthis.setSize(size);\n\n\t\tthis.entities = new Set();\n\t}\n\n\taddEntity(entity) {\n\t\tthis.entities.add(entity);\n\t}\n\n\tgetEntities() {\n\t\treturn this.entities;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\t}\n\n\tgetSize() {\n\t\treturn this.size;\n\t}\n\n\tsetBackgroundColor(backgroundColor) {\n\t\tthis.backgroundColor = backgroundColor;\n\t}\n\n\tgetBackgroundColor() {\n\t\treturn this.backgroundColor;\n\t}\n\n\tdrawBackground(context, offset) {\n\t\tcontext.fillStyle = this.backgroundColor;\n\t\tcontext.fillRect(\n\t\t\toffset.x,\n\t\t\toffset.y,\n\t\t\tthis.size.width,\n\t\t\tthis.size.height,\n\t\t);\n\n\t\tcontext.strokeStyle = '#bad455';\n\t\tcontext.strokeRect(\n\t\t\toffset.x,\n\t\t\toffset.y,\n\t\t\tthis.size.width,\n\t\t\tthis.size.height,\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Room.js","export default class Viewport {\n\tconstructor(canvas, position, size) {\n\t\tthis.useCanvas(canvas);\n\t\tthis.position = position;\n\t\tthis.setSize(size);\n\n\t\tthis.startUpdating();\n\t}\n\n\tshowRoom(room) {\n\t\tthis.room = room;\n\t}\n\n\tuseCanvas(canvas) {\n\t\tthis.canvas = canvas;\n\t\tthis.context = canvas.getContext('2d');\n\n\t\tif (this.size) {\n\t\t\tchangeCanvasToSize(canvas, this.size);\n\t\t}\n\t}\n\n\tfollowEntity(entity) {\n\t\tthis.entityToFollow = entity;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\n\t\tif (this.canvas) {\n\t\t\tchangeCanvasToSize(this.canvas, size);\n\t\t}\n\t}\n\n\tstartUpdating() {\n\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t}\n\n\tupdate(time) {\n\t\t// update position to follow entity\n\t\tif (this.entityToFollow) {\n\t\t\tlet newViewportPosition = {\n\t\t\t\tx: this.entityToFollow.position.x - (this.size.width / 2) + (this.entityToFollow.sprite.size.width / 2),\n\t\t\t\ty: this.entityToFollow.position.y - (this.size.height / 2) + (this.entityToFollow.sprite.size.height / 2),\n\t\t\t};\n\n\t\t\tif (newViewportPosition.x < 0) {\n\t\t\t\tnewViewportPosition.x = 0;\n\t\t\t}\n\n\t\t\tif (newViewportPosition.y < 0) {\n\t\t\t\tnewViewportPosition.y = 0;\n\t\t\t}\n\n\t\t\tif (newViewportPosition.x > (this.room.size.width - this.size.width)) {\n\t\t\t\tnewViewportPosition.x = this.room.size.width - this.size.width;\n\t\t\t}\n\n\t\t\tif (newViewportPosition.y > (this.room.size.height - this.size.height)) {\n\t\t\t\tnewViewportPosition.y = this.room.size.height - this.size.height;\n\t\t\t}\n\n\t\t\tthis.position = newViewportPosition;\n\t\t}\n\n\t\tthis.step(time);\n\t\tthis.draw(time);\n\n\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t}\n\n\tstep(time) {\n\t\tthis.room.entities.forEach((entity) => {\n\t\t\tentity.step(time);\n\n\t\t\tif (entity.sprite) {\n\t\t\t\tentity.sprite.step(time);\n\t\t\t}\n\t\t});\n\t}\n\n\tdraw(time) {\n\t\t// remove viewport drawings\n\t\tthis.clearDrawing(this.context);\n\n\t\t// draw room\n\t\tthis.room.drawBackground(this.context, {\n\t\t\tx: -this.position.x,\n\t\t\ty: -this.position.y,\n\t\t});\n\n\t\tthis.room.entities.forEach((entity) => {\n\t\t\tif (\n\t\t\t\tentity.hasOwnProperty('sprite')\n\t\t\t\t&& entity.hasOwnProperty('position')\n\t\t\t\t&& entity.position.hasOwnProperty('x')\n\t\t\t\t&& entity.position.hasOwnProperty('y')\n\t\t\t) {\n\t\t\t\tentity.sprite.draw(this.context, calculatePositionInViewportFromPosition({\n\t\t\t\t\tx: entity.position.x + entity.sprite.origin.x,\n\t\t\t\t\ty: entity.position.y + entity.sprite.origin.y\n\t\t\t\t}, this));\n\t\t\t}\n\t\t});\n\t}\n\n\tdrawMiddle(context) {\n\t\tcontext.strokeStyle = '#bad455';\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(0, 0);\n\t\tcontext.lineTo(this.size.width, this.size.height);\n\t\tcontext.stroke();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(this.size.width, 0);\n\t\tcontext.lineTo(0, this.size.height);\n\t\tcontext.stroke();\n\t}\n\n\tclearDrawing(context) {\n\t\tcontext.clearRect(\n\t\t\t0,\n\t\t\t0,\n\t\t\tthis.size.width,\n\t\t\tthis.size.height\n\t\t);\n\t}\n}\n\nfunction changeCanvasToSize(canvas, size) {\n\tcanvas.width = size.width;\n\tcanvas.height = size.height;\n}\n\nfunction calculatePositionInViewportFromPosition(position, viewport) {\n\treturn {\n\t\tx: position.x - viewport.position.x,\n\t\ty: position.y - viewport.position.y\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Viewport.js","import PubSub from './../core/PubSub';\nimport Log from './../modules/Log';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.player;\n\n\t\tPubSub.subscribe('playerTurnTaken', this.tick.bind(this));\n\t}\n\n\ttick() {\n\t\tthis.performNonPlayerTurns();\n\t}\n\n\tsetCurrentMap(map) {\n\t\tthis.map = map;\n\t}\n\n\tsetPlayer(playerEntity) {\n\t\tthis.player = playerEntity;\n\t}\n\n\tperformNonPlayerTurns() {\n\t\tthis.map.actors.forEach((actor) => {\n\t\t\tif (actor !== this.player) {\n\t\t\t\tactor.takeTurn();\n\t\t\t}\n\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/modules/Game.js","import Tile from './../modules/Tile';\n\nexport default class Map {\n\tconstructor(size, room) {\n\t\tthis.size = size;\n\t\tthis.room = room;\n\t\tthis.tiles = createTilesetWithSize(size)\n\t\tthis.actors = new Set();\n\t\tthis.structures = new Set();\n\t}\n\n\taddActor(actor, position) {\n\t\tactor.map = this;\n\t\tthis.actors.add(actor);\n\n\t\tthis.forEachTileInBoundaries(position, actor.size, (tile) => {\n\t\t\ttile.addActor(actor);\n\t\t});\n\n\t\tactor.updateMapPosition(position);\n\t\tthis.room.addEntity(actor);\n\t}\n\n\taddStructure(structure, position) {\n\t\tstructure.map = this;\n\t\tthis.structures.add(structure);\n\n\t\tthis.forEachTileInBoundaries(position, structure.size, (tile) => {\n\t\t\ttile.addStructure(structure);\n\t\t});\n\n\t\tstructure.updateMapPosition(position);\n\t\tthis.room.addEntity(structure);\n\t}\n\n\tfindTileAtPosition(position) {\n\t\treturn this.tiles[position.x][position.y];\n\t}\n\n\tforEachTile(callback) {\n\t\tthis.tiles.forEach((tileRow) => {\n\t\t\ttileRow.forEach(callback);\n\t\t});\n\t}\n\n\tforEachTileInBoundaries(position, size, callback) {\n\t\tfor (let x = position.x; x < position.x + size.width; x = x + 1) {\n\t\t\tfor (let y = position.y; y < position.y + size.height; y = y + 1) {\n\t\t\t\tlet tilePosition = {x: x, y: y};\n\n\t\t\t\tif (this.hasTileAtPosition(tilePosition)) {\n\t\t\t\t\tcallback(this.findTileAtPosition(tilePosition));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thasTileAtPosition(position) {\n\t\treturn Boolean(\n\t\t\tthis.tiles[position.x]\n\t\t\t&& this.tiles[position.x][position.y]\n\t\t);\n\t}\n\n\tmoveActorFromPositionToPosition(actor, oldPosition, newPosition) {\n\t\tthis.forEachTileInBoundaries(oldPosition, actor.size, (tile) => {\n\t\t\ttile.removeActor(actor);\n\t\t});\n\n\t\tthis.forEachTileInBoundaries(newPosition, actor.size, (tile) => {\n\t\t\ttile.addActor(actor);\n\t\t});\n\t}\n\n\tgetSolidEntitiesInBoundaries(position, size, exclude = []) {\n\t\tlet solidEntities = [];\n\n\t\tthis.forEachTileInBoundaries(position, size, (tile) => {\n\t\t\tsolidEntities = solidEntities.concat(tile.getSolidEntities(exclude));\n\t\t});\n\n\t\treturn solidEntities;\n\t}\n\n\thasSolidEntitiesInBoundaries(position, size, exclude = []) {\n\t\treturn this.getSolidEntitiesInBoundaries(position, size, exclude).length > 0;\n\t}\n\n\tgetSolidActorsInBoundaries(position, size, exclude = []) {\n\t\tlet solidActors = [];\n\n\t\tthis.forEachTileInBoundaries(position, size, (tile) => {\n\t\t\tsolidActors = solidActors.concat(tile.getSolidActors(exclude));\n\t\t});\n\n\t\treturn solidActors;\n\t}\n\n\thasSolidActorsInBoundaries(position, size, exclude = []) {\n\t\treturn this.getSolidActorsInBoundaries(position, size, exclude).length > 0;\n\t}\n\n\tareBoundariesWithinMapBoundaries(position, size) {\n\t\treturn position.x >= 0\n\t\t\t&& position.y >= 0\n\t\t\t&& position.x + size.width <= this.size.width\n\t\t\t&& position.y + size.height <=  this.size.height;\n\t}\n}\n\nfunction createTilesetWithSize(size) {\n\tlet tiles = [];\n\n\tfor(let x = 0; x < size.width; x += 1) {\n\t\ttiles[x] = [];\n\n\t\tfor(let y = 0; y < size.height; y += 1) {\n\t\t\ttiles[x][y] = new Tile({x: x, y: y});\n\t\t}\n\t}\n\n\treturn tiles;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/modules/Map.js","export default class Tile {\n\tconstructor(position) {\n\t\tthis.position = position;\n\t\tthis.actors = [];\n\t\tthis.structures = [];\n\t}\n\n\taddActor(actor) {\n\t\tthis.actors.push(actor);\n\t}\n\n\tremoveActor(actor) {\n\t\tlet actorIndex = this.actors.indexOf(actor);\n\n\t\tif (actorIndex !== -1) {\n\t\t\tthis.actors.splice(actorIndex, 1);\n\t\t}\n\t}\n\n\taddStructure(structure) {\n\t\tthis.structures.push(structure);\n\t}\n\n\tremoveStructure(structure) {\n\t\tlet structureIndex = this.structures.findIndex(structure);\n\n\t\tif (structureIndex !== -1) {\n\t\t\tthis.actors.splice(structureIndex, 1);\n\t\t}\n\t}\n\n\tgetEntities() {\n\t\treturn this.structures.concat(this.actors);\n\t}\n\n\tgetActors() {\n\t\treturn this.actors;\n\t}\n\n\tgetSolidEntities(exclude = []) {\n\t\tlet entities = this.getEntities();\n\n\t\treturn entities.filter((entity) => {\n\t\t\treturn entity.solid === true && !exclude.includes(entity);\n\t\t});\n\t}\n\n\tgetSolidActors(exclude = []) {\n\t\tlet actors = this.getActors();\n\n\t\treturn actors.filter((actor) => {\n\t\t\treturn actor.solid === true && !exclude.includes(actor);\n\t\t});\n\t}\n\n\thasSolidEntities(exclude = []) {\n\t\treturn this.getSolidEntities().length > 0;\n\t}\n\n\thasSolidActors(exclude = []) {\n\t\treturn this.getSolidActors().length > 0;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/modules/Tile.js","import Actor from './Actor';\nimport PubSub from './../core/PubSub';\nimport Log from './../modules/Log';\n\nexport default class Player extends Actor {\n\tconstructor(type, options) {\n\t\tsuper(type, options);\n\t\tLog.showMessage(`<em>${this.type}</em> awakens...`);\n\t\twindow.addEventListener('keydown', this.onKeyDown.bind(this));\n\t}\n\n\tonKeyDown(event) {\n\t\tif (!this.dead) {\n\t\t\tlet actionTaken = false;\n\n\t\t\tif (event.key === ' ' || event.key === '5') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tLog.showMessage(`${this.type} waits...`);\n\t\t\t\tactionTaken = true;\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowUp' || event.key === '8') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveUp();\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowRight' || event.key === '6') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveRight();\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowDown' || event.key === '2') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveDown();\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowLeft' || event.key === '4') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveLeft();\n\t\t\t}\n\n\t\t\tif (actionTaken) {\n\t\t\t\tPubSub.publish('playerTurnTaken');\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Player.js","import SpriteFrame from './../core/SpriteFrame';\n\nexport default class Sprite {\n\tconstructor(frames, options = {}) {\n\t\tthis.setFrames(frames);\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.size = options.size;\n\t\t} else {\n\t\t\tthis.size = calculateMaximumSizeFromFrames(this.getFrames());\n\t\t}\n\n\t\tif (options.hasOwnProperty('origin')) {\n\t\t\tthis.setOrigin(options.origin);\n\t\t} else {\n\t\t\tthis.setOrigin({x: 0, y: 0});\n\t\t}\n\n\t\tif (options.hasOwnProperty('frameIndex')) {\n\t\t\tthis.setCurrentFrameIndex(options.frameIndex);\n\t\t} else {\n\t\t\tthis.setCurrentFrameIndex(0);\n\t\t}\n\n\t\tif (options.hasOwnProperty('framesPerSecond')) {\n\t\t\tthis.setFramesPerSecond(options.framesPerSecond);\n\t\t} else {\n\t\t\tthis.setFramesPerSecond(1);\n\t\t}\n\n\t\tif (options.hasOwnProperty('looping') ) {\n\t\t\tthis.looping = options.looping;\n\t\t} else {\n\t\t\tthis.looping = true;\n\t\t}\n\n\t\tthis.timeOfPreviousFrame = 0;\n\t}\n\n\tsetFrames(frames = []) {\n\t\tif (Array.isArray(frames)) {\n\t\t\tthis.frames = frames;\n\t\t} else if (frames instanceof SpriteFrame) {\n\t\t\tthis.frames = [frames];\n\t\t} else {\n\t\t\tthis.frames = [];\n\t\t}\n\t}\n\n\tgetFrames() {\n\t\treturn this.frames;\n\t}\n\n\tsetFramesPerSecond(framesPerSecond) {\n\t\tthis.framesPerSecond = framesPerSecond;\n\t}\n\n\tgetFramesPerSecond() {\n\t\treturn this.framesPerSecond;\n\t}\n\n\tsetCurrentFrameIndex(newCurrentFrameIndex) {\n\t\tif (this.frames[newCurrentFrameIndex]) {\n\t\t\tthis.currentFrameIndex = newCurrentFrameIndex;\n\t\t}\n\t}\n\n\tgetCurrentFrame() {\n\t\treturn this.frames[this.currentFrameIndex];\n\t}\n\n\tdraw(context, position) {\n\t\tlet currentFrame = this.getCurrentFrame();\n\n\t\tif (currentFrame) {\n\t\t\tcontext.drawImage(\n\t\t\t\tcurrentFrame.getImage(),\n\t\t\t\tcurrentFrame.getOrigin().x, currentFrame.getOrigin().y,\n\t\t\t\tcurrentFrame.getSize().width, currentFrame.getSize().height,\n\t\t\t\tposition.x, position.y,\n\t\t\t\tthis.size.width, this.size.height,\n\t\t\t);\n\t\t}\n\t}\n\n\tstep(time) {\n\t\tlet framesPerSecond = this.getFramesPerSecond();\n\n\t\tif (framesPerSecond !== 0 && !(!this.looping && this.currentFrameIndex === (this.frames.length - 1))) {\n\t\t\tlet timeSincePreviousFrame = time - this.timeOfPreviousFrame;\n\n\t\t\tlet frameChange = timeSincePreviousFrame / (1000 / framesPerSecond);\n\n\t\t\tif (frameChange > 0) {\n\t\t\t\tframeChange = Math.floor(frameChange);\n\t\t\t}\n\n\t\t\tif (frameChange < 0) {\n\t\t\t\tframeChange = Math.ceil(frameChange);\n\t\t\t}\n\n\t\t\tif (frameChange !== 0) {\n\t\t\t\tthis.timeOfPreviousFrame = time;\n\t\t\t\tthis.setCurrentFrameIndex(calculateNewFrameIndexWithChange(this.currentFrameIndex, frameChange, this.frames.length, this.looping));\n\t\t\t}\n\t\t}\n\t}\n\n\tnextFrame() {\n\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, 1, this.frames.length, this.looping);\n\t}\n\n\tpreviousFrame() {\n\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, -1, this.frames.length, this.looping);\n\t}\n\n\tsetOrigin(origin) {\n\t\tthis.origin = origin;\n\t}\n\n\tgetOrigin() {\n\t\treturn this.origin;\n\t}\n}\n\nfunction calculateNewFrameIndexWithChange(currentFrameIndex, change, amountOfFrames, looping = true) {\n\tchange = Math.round(change);\n\n\tif (change === 0) {\n\t\treturn currentFrameIndex;\n\t}\n\n\tif (looping) {\n\t\tlet newFrameIndex = (currentFrameIndex + change) % amountOfFrames\n\n\t\tif (newFrameIndex < 0) {\n\t\t\treturn newFrameIndex + amountOfFrames;\n\t\t}\n\n\t\treturn newFrameIndex;\n\t}\n\n\tif (!looping) {\n\t\tlet newFrameIndex = currentFrameIndex + change;\n\n\t\tif (newFrameIndex > (amountOfFrames - 1)) {\n\t\t\treturn (amountOfFrames - 1);\n\t\t}\n\n\t\tif (newFrameIndex < 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn newFrameIndex;\n\t}\n}\n\nfunction calculateMaximumSizeFromFrames(frames) {\n\tlet biggestWidth = 0;\n\tlet biggestHeight = 0;\n\n\tframes.forEach((frame) => {\n\t\tif (frame.size.width > biggestWidth) {\n\t\t\tbiggestWidth = frame.size.width;\n\t\t}\n\n\t\tif (frame.size.height > biggestHeight) {\n\t\t\tbiggestHeight = frame.size.height;\n\t\t}\n\t});\n\n\treturn {\n\t\twidth: biggestWidth,\n\t\theight: biggestHeight,\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Sprite.js","import Actor from './Actor';\n\nexport default class NonPlayer extends Actor {\n\tconstructor(type, options) {\n\t\tsuper(type, options);\n\t}\n\n\ttakeTurn() {\n\t\tif (!this.dead) {\n\t\t\tlet decision = Math.round(Math.random() * 8);\n\n\t\t\tif (decision === 0) {\n\t\t\t\tthis.moveUp();\n\t\t\t}\n\n\t\t\tif (decision === 1) {\n\t\t\t\tthis.moveRight();\n\t\t\t}\n\n\t\t\tif (decision === 2) {\n\t\t\t\tthis.moveDown();\n\t\t\t}\n\n\t\t\tif (decision === 3) {\n\t\t\t\tthis.moveLeft();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/NonPlayer.js","import Entity from './../core/Entity';\nimport SpriteAtlas from './../core/SpriteAtlas';\n\nexport default class Wall extends Entity {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/wall-sheet.png\", \"frames\": [ { \"name\": \"wall_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\t\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\t\tlet wallSprite = spriteAtlas.createSpriteWithFrames([\n\t\t\t'wall_0'\n\t\t]);\n\n\t\tthis.setSprite(wallSprite);\n\t\tthis.setSize({width: 1, height: 1});\n\n\t\tthis.setSolidity(true);\n\t\tthis.type = 'wall';\n\t}\n\n\tcanBeAttacked() {\n\t\treturn false;\n\t}\n\n\tupdateMapPosition(mapPosition) {\n\t\tthis.mapPosition = mapPosition;\n\t\tthis.position = {\n\t\t\tx: mapPosition.x * 16,\n\t\t\ty: mapPosition.y * 16,\n\t\t};\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Wall.js","import Entity from './../core/Entity';\nimport SpriteAtlas from './../core/SpriteAtlas';\n\nexport default class Tree extends Entity {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/deadtree-sheet.png\", \"frames\": [ { \"name\": \"deadtree\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 32 } } ] }';\n\t\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\t\tlet wallSprite = spriteAtlas.createSpriteWithFrames([\n\t\t\t'deadtree'\n\t\t]);\n\n\t\tthis.setSprite(wallSprite);\n\t\tthis.setSize({width: 1, height: 1});\n\t\tthis.sprite.setOrigin({x: 0, y: -16});\n\n\t\tthis.setSolidity(true);\n\t\tthis.type = 'wall';\n\t}\n\n\tcanBeAttacked() {\n\t\treturn false;\n\t}\n\n\tupdateMapPosition(mapPosition) {\n\t\tthis.mapPosition = mapPosition;\n\t\tthis.position = {\n\t\t\tx: mapPosition.x * 16,\n\t\t\ty: mapPosition.y * 16,\n\t\t};\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Tree.js","import SpriteAtlas from './../core/SpriteAtlas';\n\nexport const Knight = {\n\ttype: 'knight',\n\tstats: {\n\t\tmaxHealth: 10,\n\t\tstrength: 3,\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 1,\n\t\theight: 1,\n\t},\n\tsolid: true,\n};\n\nfunction getSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/character-sheet.png\", \"frames\": [ { \"name\": \"player_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_2\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_3\", \"origin\": { \"x\": 48, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, {\"name\": \"player_idle_4\", \"origin\": { \"x\": 64, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_5\", \"origin\": { \"x\": 80, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet knightSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_1',\n\t\t'player_idle_2',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_4',\n\t\t'player_idle_5',\n\t]);\n\n\tknightSprite.looping = true;\n\tknightSprite.setFramesPerSecond(10);\n\n\treturn knightSprite\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/creatureTypes/Knight.js","import SpriteAtlas from './../core/SpriteAtlas';\n\nexport const GreenKnight = {\n\ttype: 'green knight',\n\tstats: {\n\t\tmaxHealth: 10,\n\t\tstrength: 3,\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 1,\n\t\theight: 1,\n\t},\n\tsolid: true,\n};\n\nfunction getSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/character-sheet-green.png\", \"frames\": [ { \"name\": \"player_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_2\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_3\", \"origin\": { \"x\": 48, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, {\"name\": \"player_idle_4\", \"origin\": { \"x\": 64, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_5\", \"origin\": { \"x\": 80, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet knightSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_1',\n\t\t'player_idle_2',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_4',\n\t\t'player_idle_5',\n\t]);\n\n\tknightSprite.looping = true;\n\tknightSprite.setFramesPerSecond(10);\n\n\treturn knightSprite\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/creatureTypes/GreenKnight.js","import SpriteAtlas from './../core/SpriteAtlas';\n\nexport const Slime = {\n\ttype: 'slime',\n\tstats: {\n\t\tmaxHealth: 16,\n\t\tstrength: 1,\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 1,\n\t\theight: 1,\n\t},\n\tsolid: true,\n};\n\nfunction getSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/slime-sheet.png\", \"frames\": [ { \"name\": \"slime_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"slime_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet slimeSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'slime_idle_0',\n\t\t'slime_idle_1',\n\t]);\n\n\tslimeSprite.setFramesPerSecond(2);\n\n\treturn slimeSprite;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/creatureTypes/Slime.js","import SpriteAtlas from './../core/SpriteAtlas';\n\nexport const KingSlime = {\n\ttype: 'king slime',\n\tstats: {\n\t\tmaxHealth: 28,\n\t\tstrength: 2,\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 2,\n\t\theight: 2,\n\t},\n\tsolid: true,\n};\n\nfunction getSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/king-slime-sheet.png\", \"frames\": [ { \"name\": \"slime_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 32, \"height\": 32 } }, { \"name\": \"slime_idle_1\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 32, \"height\": 32 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet slimeSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'slime_idle_0',\n\t\t'slime_idle_1',\n\t]);\n\n\tslimeSprite.setFramesPerSecond(1);\n\n\treturn slimeSprite;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/creatureTypes/KingSlime.js"],"sourceRoot":""}