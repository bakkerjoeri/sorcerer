{"version":3,"sources":["webpack:///sorcerer.min.js","webpack:///webpack/bootstrap 95d578c7ec69ee865173","webpack:///./scripts/core/SpriteAtlas.js","webpack:///./scripts/core/Entity.js","webpack:///./scripts/core/PubSub.js","webpack:///./scripts/entities/Actor.js","webpack:///./scripts/core/SpriteFrame.js","webpack:///./scripts/main.js","webpack:///./scripts/core/Room.js","webpack:///./scripts/core/Viewport.js","webpack:///./scripts/entities/Game.js","webpack:///./scripts/entities/Player.js","webpack:///./scripts/core/Sprite.js","webpack:///./scripts/entities/NonPlayer.js","webpack:///./scripts/entities/Wall.js","webpack:///./scripts/entities/Tree.js","webpack:///./scripts/creatureTypes/Knight.js","webpack:///./scripts/creatureTypes/Slime.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","_classCallCheck","instance","Constructor","TypeError","createFramesFromDefinition","definition","frames","image","Image","src","file","forEach","frameData","frame","_SpriteFrame2","origin","size","push","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_Sprite","_Sprite2","_SpriteFrame","SpriteAtlas","this","frameName","find","getName","frameNames","_this","map","getFrame","Entity","options","arguments","setSprite","sprite","setPosition","position","setSolidity","solid","setSize","setOrigin","x","y","time","change","currentPosition","getPosition","boundaries","height","width","topics","Map","PubSub","topic","callback","has","set","data","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","getDeadSprite","_SpriteAtlas2","JSON","parse","createSpriteWithFrames","_Entity2","_Entity3","_SpriteAtlas","STATS_DEFAULT","strength","maxHealth","Actor","_Entity","creatureDefinition","getPrototypeOf","applyCreatureDefinition","health","stats","type","applyStats","assign","canBeAttacked","console","log","attackTarget","applyDamage","calculateAttackDamage","damage","reduceHealth","amount","changeHealth","die","_this2","isInBoundsOfRoomAtPosition","room","entitiesAtPosition","findSolidEntitiesInBoundaries","actionTaken","entity","bumpInto","moveTo","dead","SpriteFrame","setName","setImage","imageLoaded","addEventListener","onChance","denominator","Math","round","random","_Room","_Room2","_Viewport","_Viewport2","_Game","_Game2","_Player","_Player2","_NonPlayer","_NonPlayer2","_Wall","_Wall2","_Tree","_Tree2","_Knight","_Slime","canvas","document","querySelector","setBackgroundColor","viewport","showRoom","game","player","Knight","setPlayer","followEntity","hasSolidEntityInBoundaries","addNonPlayer","Slime","addObject","Room","entities","Set","add","backgroundColor","context","offset","fillStyle","fillRect","strokeStyle","strokeRect","exclude","isWithinBoundaries","includes","changeCanvasToSize","calculatePositionInViewportFromPositionInRoom","positionInRoom","Viewport","useCanvas","startUpdating","getContext","entityToFollow","window","requestAnimationFrame","update","bind","newViewportPosition","step","draw","clearDrawing","drawBackground","beginPath","lineTo","stroke","clearRect","_PubSub","_PubSub2","Game","nonPlayers","objects","subscribe","tick","performTurns","playerEntity","addEntity","nonPlayerEntity","objectEntity","nonPlayer","takeTurn","_Actor2","_Actor3","Player","_Actor","onKeyDown","event","preventDefault","moveUp","moveRight","moveDown","moveLeft","publish","calculateNewFrameIndexWithChange","currentFrameIndex","amountOfFrames","looping","newFrameIndex","calculateMaximumSizeFromFrames","biggestWidth","biggestHeight","Sprite","setFrames","getFrames","setCurrentFrameIndex","frameIndex","setFramesPerSecond","framesPerSecond","timeOfPreviousFrame","Array","isArray","newCurrentFrameIndex","currentFrame","getCurrentFrame","drawImage","getImage","getOrigin","getSize","getFramesPerSecond","timeSincePreviousFrame","frameChange","floor","ceil","NonPlayer","decision","Wall","spriteAtlas","wallSprite","Tree","knightSprite","slimeSprite"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAI,EAAAJ,EACAK,KACAH,WAUA,OANAJ,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,KAGAF,EAAAD,QAvBA,GAAAD,KA4BAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,SAAAP,EAAAQ,EAAAC,GACAZ,EAAAa,EAAAV,EAAAQ,IACAG,OAAAC,eAAAZ,EAAAQ,GACAK,gBACAC,cACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAf,GACA,GAAAQ,GAAAR,KAAAgB,WACA,WAA2B,MAAAhB,GAAAiB,SAC3B,WAAiC,MAAAjB,GAEjC,OADAJ,GAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAS,EAAAC,GAAsD,MAAAT,QAAAU,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDvB,EAAA0B,EAAA,IAGA1B,IAAA2B,EAAA,KDMM,SAAUvB,EAAQD,EAASH,GAEjC,YAiBA,SAAS4B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCEjEhH,QAASC,GAA2BC,GACnC,GAAIC,KAEJ,IAAID,EAAWV,eAAe,QAAS,CACtC,GAAIY,GAAQ,GAAIC,MAChBD,GAAME,IAAMJ,EAAWK,KAEvBL,EAAWC,OAAOK,QAAQ,SAACC,GAC1B,GAAIC,GAAQ,GAAAC,GAAAvB,QACXqB,EAAU/B,KACV0B,EACAK,EAAUG,OACVH,EAAUI,KAGXV,GAAOW,KAAKJ,KAId,MAAOP,GF8BRtB,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,ME5EhiB2B,EAAA3D,EAAA,IFgFI4D,EAAWhC,EAAuB+B,GE/EtCE,EAAA7D,EAAA,GFmFI4C,EAAgBhB,EAAuBiC,GEjFtBC,EFuFH,WEtFjB,QAAAA,GAAY3B,GAAYL,EAAAiC,KAAAD,GACvBC,KAAK3B,OAASF,EAA2BC,GFgH1C,MApBAc,GAAaa,IACZN,IAAK,WACLR,MAAO,SE3FCgB,GACR,MAAOD,MAAK3B,OAAO6B,KAAK,SAACtB,GACxB,MAAOA,GAAMuB,YAAcF,OF+F5BR,IAAK,yBACLR,MAAO,SE5FemB,GAAY,GAAAC,GAAAL,KAC9B3B,EAAS+B,EAAWE,IAAI,SAACL,GAC5B,MAAOI,GAAKE,SAASN,IAGtB,OAAO,IAAAJ,GAAAvC,QAAWe,OFkGZ0B,IAGR3D,GAAQkB,QErHayC,GF2If,SAAU1D,EAAQD,EAASH,GAEjC,YASA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHnB,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MGvJ3gBuC,EH2JR,WG1JZ,QAAAA,KAA0B,GAAdC,GAAcC,UAAApB,OAAA,YAAAoB,UAAA,GAAAA,UAAA,KAAA3C,GAAAiC,KAAAQ,GACrBC,EAAQ/C,eAAe,WAC1BsC,KAAKW,UAAUF,EAAQG,QAGpBH,EAAQ/C,eAAe,aAC1BsC,KAAKa,YAAYJ,EAAQK,UAGtBL,EAAQ/C,eAAe,UAC1BsC,KAAKe,YAAYN,EAAQO,OAGtBP,EAAQ/C,eAAe,SAC1BsC,KAAKiB,QAAQR,EAAQ1B,MAGlB0B,EAAQ/C,eAAe,UAC1BsC,KAAKkB,UAAUT,EAAQ3B,QAEvBkB,KAAKkB,WAAWC,EAAG,EAAGC,EAAG,IHoO3B,MAjEAlC,GAAasB,IACZf,IAAK,OACLR,MAAO,SGjKHoC,OHmKJ5B,IAAK,YACLR,MAAO,SGhKE2B,GACTZ,KAAKY,OAASA,KHmKdnB,IAAK,cACLR,MAAO,SGjKI6B,GACXd,KAAKc,SAAWA,KHoKhBrB,IAAK,cACLR,MAAO,WGjKP,MAAOe,MAAKc,YHqKZrB,IAAK,cACLR,MAAO,SGnKI+B,GACXhB,KAAKgB,MAAQA,KHsKbvB,IAAK,UACLR,MAAO,WGnKP,MAAOe,MAAKgB,SHuKZvB,IAAK,UACLR,MAAO,SGrKAF,GACPiB,KAAKjB,KAAOA,KHwKZU,IAAK,UACLR,MAAO,WGrKP,MAAOe,MAAKjB,QHyKZU,IAAK,YACLR,MAAO,SGvKEH,GACTkB,KAAKlB,OAASA,KH0KdW,IAAK,YACLR,MAAO,WGvKP,MAAOe,MAAKlB,UH2KZW,IAAK,iBACLR,MAAO,SGzKOqC,GACd,GAAIC,GAAkBvB,KAAKwB,aAE3BxB,MAAKa,aACJM,EAAGI,EAAgBJ,EAAIG,EAAOH,EAC9BC,EAAGG,EAAgBH,EAAIE,EAAOF,OH6K/B3B,IAAK,qBACLR,MAAO,SG1KWwC,GAClB,MACCzB,MAAKc,SAASM,EAAIK,EAAWL,EAAIK,EAAWC,QACzC1B,KAAKc,SAASK,EAAInB,KAAKjB,KAAK4C,MAAQF,EAAWN,GAC/CnB,KAAKc,SAASM,EAAIpB,KAAKjB,KAAK2C,OAASD,EAAWL,GAChDpB,KAAKc,SAASK,EAAIM,EAAWN,EAAIM,EAAWE,UH0K1CnB,IAGRpE,GAAQkB,QG5PakD,GHgQf,SAAUnE,EAAQD,EAASH,GAEjC,YASA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHnB,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MIzQ1hB2D,EAAS,GAAIC,KAEEC,EJ6QR,WACZ,QAASA,KACR/D,EAAgBiC,KAAM8B,GAwBvB,MArBA5C,GAAa4C,EAAQ,OACpBrC,IAAK,YACLR,MAAO,SInRS8C,EAAOC,GAClBJ,EAAOK,IAAIF,IACfH,EAAOM,IAAIH,MAGSH,EAAOzE,IAAI4E,GACjB/C,KAAKgD,MJsRpBvC,IAAK,UACLR,MAAO,SIpRO8C,EAAOI,GACjBP,EAAOK,IAAIF,IACdH,EAAOzE,IAAI4E,GAAOrD,QAAQ,SAACsD,GAC1BA,EAASG,SJ0RLL,IAGR1F,GAAQkB,QI1SawE,GJ8Sf,SAAUzF,EAAQD,EAASH,GAEjC,YAiBA,SAAS4B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASkE,GAA2BC,EAAM7F,GAAQ,IAAK6F,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO9F,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B6F,EAAP7F,EAElO,QAAS+F,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIvE,WAAU,iEAAoEuE,GAAeD,GAAS/E,UAAYV,OAAO2F,OAAOD,GAAcA,EAAWhF,WAAakF,aAAe1D,MAAOuD,EAAUtF,cAAmBsC,YAAgBvC,mBAA6BwF,IAAY1F,OAAO6F,eAAiB7F,OAAO6F,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GK/Kje,QAASK,KAOR,MALkB,IAAAC,GAAAzF,QAAgB0F,KAAKC,MADX,0JAEEC,wBAC7B,YLuJFnG,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MKzThiBkF,EAAAlH,EAAA,GL6TImH,EAAWvF,EAAuBsF,GK5TtCE,EAAApH,EAAA,GLgUI8G,EAAgBlF,EAAuBwF,GK9TrCC,GACLC,SAAU,EACVC,UAAW,GAGSC,ELwUT,SAAUC,GKvUrB,QAAAD,GAAaE,EAAoBlD,GAAS1C,EAAAiC,KAAAyD,EAAA,IAAApD,GAAA+B,EAAApC,MAAAyD,EAAAZ,WAAA9F,OAAA6G,eAAAH,IAAAjH,KAAAwD,KACnCS,GADmC,OAEzCJ,GAAKwD,wBAAwBF,GAE7BtD,EAAKyD,OAASzD,EAAK0D,MAAMP,UAJgBnD,ELgf1C,MAxKAkC,GAAUkB,EAAOC,GAajBxE,EAAauE,IACZhE,IAAK,0BACLR,MAAO,SKhVgB0E,GACvB3D,KAAKgE,KAAOL,EAAmBK,KAC/BhE,KAAKiE,WAAWN,EAAmBI,OACnC/D,KAAKW,UAAUgD,EAAmB/C,QAClCZ,KAAKiB,QAAQ0C,EAAmB5E,MAChCiB,KAAKe,YAAY4C,EAAmB3C,ULmVpCvB,IAAK,aACLR,MAAO,SKjVG8E,GACV/D,KAAK+D,MAAQhH,OAAOmH,UAAWZ,EAAeS,MLoV9CtE,IAAK,WACLR,MAAO,SKlVCG,GACR,QAAIA,EAAO+E,kBACVC,QAAQC,IAAOrE,KAAKgE,KAApB,YAAoC5E,EAAO4E,MAE3ChE,KAAKsE,aAAalF,ULyVnBK,IAAK,eACLR,MAAO,SKnVKG,GACZA,EAAOmF,YAAYvE,KAAKwE,4BLsVxB/E,IAAK,wBACLR,MAAO,WKnVP,MAAOe,MAAK+D,MAAMR,YLuVlB9D,IAAK,cACLR,MAAO,SKrVIwF,GACXL,QAAQC,IAAOrE,KAAKgE,KAApB,UAAkCS,EAAlC,WAEAzE,KAAK0E,aAAaD,MLwVlBhF,IAAK,gBACLR,MAAO,SKtVM0F,GACb3E,KAAK4E,aAAa5E,KAAK8D,OAASa,MLyVhClF,IAAK,eACLR,MAAO,SKvVK0F,GACZ3E,KAAK4E,aAAa5E,KAAK8D,OAASa,ML0VhClF,IAAK,eACLR,MAAO,SKxVK6E,GACRA,EAAS9D,KAAK+D,MAAMP,WACvBxD,KAAK8D,OAAS9D,KAAK+D,MAAMP,UAEzBY,QAAQC,IAAOrE,KAAKgE,KAApB,gCAAwDhE,KAAK8D,SACnDA,GAAU,GACpB9D,KAAK8D,OAAS,EACd9D,KAAK6E,MAELT,QAAQC,IAAOrE,KAAKgE,KAApB,kBAA0ChE,KAAK8D,QAC/CM,QAAQC,IAAOrE,KAAKgE,KAApB,cAEAhE,KAAK8D,OAASA,EAEdM,QAAQC,IAAOrE,KAAKgE,KAApB,kBAA0ChE,KAAK8D,YL4VhDrE,IAAK,SACLR,MAAO,SKzVD6B,GAAU,GAAAgE,GAAA9E,IAChB,IAAIA,KAAK+E,2BAA2B/E,KAAKgF,KAAMlE,GAAW,CACzD,GAAImE,GAAqBjF,KAAKgF,KAAKE,+BAClC/D,EAAGL,EAASK,EACZC,EAAGN,EAASM,EACZO,MAAO3B,KAAKY,OAAO7B,KAAK4C,MACxBD,OAAQ1B,KAAKY,OAAO7B,KAAK2C,SACtB1B,MAEJ,IAAkC,IAA9BiF,EAAmB3F,OAEtB,MADAU,MAAKa,YAAYC,KAEX,IAAImE,EAAmB3F,OAAS,EAAG,CACzC,GAAI6F,KAUJ,OARAF,GAAmBvG,QAAQ,SAAC0G,GACNN,EAAKO,SAASD,KAGlCD,QAIKA,GAIT,YL8VA1F,IAAK,SACLR,MAAO,WK3VP,MAAOe,MAAKsF,QACXnE,EAAGnB,KAAKc,SAASK,EACjBC,EAAGpB,KAAKc,SAASM,EAAI,QLgWtB3B,IAAK,YACLR,MAAO,WK5VP,MAAOe,MAAKsF,QACXnE,EAAGnB,KAAKc,SAASK,EAAI,GACrBC,EAAGpB,KAAKc,SAASM,OLiWlB3B,IAAK,WACLR,MAAO,WK7VP,MAAOe,MAAKsF,QACXnE,EAAGnB,KAAKc,SAASK,EACjBC,EAAGpB,KAAKc,SAASM,EAAI,QLkWtB3B,IAAK,WACLR,MAAO,WK9VP,MAAOe,MAAKsF,QACXnE,EAAGnB,KAAKc,SAASK,EAAI,GACrBC,EAAGpB,KAAKc,SAASM,OLmWlB3B,IAAK,gBACLR,MAAO,WK/VP,OAAQe,KAAKuF,QLmWb9F,IAAK,MACLR,MAAO,WKhWPe,KAAKuF,QACLvF,KAAKY,OAASkC,OLoWdrD,IAAK,6BACLR,MAAO,SKlWmB+F,EAAMlE,GAChC,MAAOA,GAASK,GAAK,GACjBL,EAASM,GAAK,GACdN,EAASK,EAAInB,KAAKjB,KAAK4C,OAASqD,EAAKjG,KAAK4C,OAC1Cb,EAASM,EAAIpB,KAAKjB,KAAK2C,QAAUsD,EAAKjG,KAAK2C,WLmWzC+B,GACNL,EAAS9F,QAEXlB,GAAQkB,QKpfamG,GLigBf,SAAUpH,EAAQD,EAASH,GAEjC,YASA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHnB,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MMlhB3gBuH,ENshBH,WMrhBjB,QAAAA,GAAY5I,EAAM0B,EAAOwC,EAAU/B,GAAMhB,EAAAiC,KAAAwF,GACxCxF,KAAKyF,QAAQ7I,GACboD,KAAK0F,SAASpH,GACd0B,KAAKkB,UAAUJ,GACfd,KAAKiB,QAAQlC,GNqlBd,MA1DAG,GAAasG,IACZ/F,IAAK,UACLR,MAAO,SM1hBArC,GACPoD,KAAKpD,KAAOA,KN6hBZ6C,IAAK,WACLR,MAAO,SM3hBCX,GAAO,GAAA+B,GAAAL,IACfA,MAAK2F,eACL3F,KAAK1B,MAAQA,EAEb0B,KAAK1B,MAAMsH,iBAAiB,OAAQ,WACnCvF,EAAKsF,oBNiiBNlG,IAAK,YACLR,MAAO,SM9hBEH,GACTkB,KAAKlB,OAASA,KNiiBdW,IAAK,UACLR,MAAO,SM/hBAF,GACPiB,KAAKjB,KAAOA,KNkiBZU,IAAK,UACLR,MAAO,WM/hBP,MAAOe,MAAKpD,QNmiBZ6C,IAAK,WACLR,MAAO,WMhiBP,MAAOe,MAAK1B,SNoiBZmB,IAAK,YACLR,MAAO,WMjiBP,MAAOe,MAAKlB,UNqiBZW,IAAK,UACLR,MAAO,WMliBP,MAAOe,MAAKjB,QNsiBZU,IAAK,gBACLR,MAAO,SMpiBM+C,GACThC,KAAK2F,YACR3D,IAEAhC,KAAK1B,MAAMsH,iBAAiB,OAAQ5D,ONyiB/BwD,IAGRpJ,GAAQkB,QM7lBakI,GNimBf,SAAUnJ,EAAQD,EAASH,GAEjC,YAmCA,SAAS4B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,GOpkBvF,QAAS+H,GAASC,GACjB,MAAmD,KAA5CC,KAAKC,MAAMD,KAAKE,SAAWH,GAjEnC,GAAAI,GAAAjK,EAAA,GPsmBIkK,EAAStI,EAAuBqI,GOrmBpCE,EAAAnK,EAAA,GPymBIoK,EAAaxI,EAAuBuI,GOvmBxCE,EAAArK,EAAA,GP2mBIsK,EAAS1I,EAAuByI,GO1mBpCE,EAAAvK,EAAA,GP8mBIwK,EAAW5I,EAAuB2I,GO7mBtCE,EAAAzK,EAAA,IPinBI0K,EAAc9I,EAAuB6I,GOhnBzCE,EAAA3K,EAAA,IPonBI4K,EAAShJ,EAAuB+I,GOnnBpCE,EAAA7K,EAAA,IPunBI8K,EAASlJ,EAAuBiJ,GOrnBpCE,EAAA/K,EAAA,IACAgL,EAAAhL,EAAA,GAZAA,GAAQ,GAcR,IAAMiL,GAASC,SAASC,cAAc,qBAEhCpC,EAAO,GAAAmB,GAAA7I,SAAUqE,MAAO,IAAKD,OAAQ,KAC3CsD,GAAKqC,mBAAmB,OAExB,IAAMC,GAAW,GAAAjB,GAAA/I,QAAa4J,GAAS/F,EAAG,EAAGC,EAAG,IAAKO,MAAO,IAAKD,OAAQ,KACzE4F,GAASC,SAASvC,EAElB,IAAMwC,GAAO,GAAAjB,GAAAjJ,QAAS0H,GAChByC,EAAS,GAAAhB,GAAAnJ,QAAA0J,EAAAU,QACd5G,UAAWK,EAAG,GAAIC,EAAG,KAGtBoG,GAAKG,UAAUF,GACfH,EAASM,aAAaH,EAEtB,KAAI,GAAItG,GAAI,EAAGA,EAAI6D,EAAKjG,KAAK4C,MAAM,GAAIR,GAAK,EAC3C,IAAI,GAAIC,GAAI,EAAGA,EAAI4D,EAAKjG,KAAK2C,OAAO,GAAIN,GAAK,EAAG,CAC/C,GAAIN,IAAYK,EAAO,GAAJA,EAAQC,EAAO,GAAJA,EAC9B,KAAK4D,EAAK6C,4BACT1G,EAAGL,EAASK,EACZC,EAAGN,EAASM,EACZO,MAAO,GACPD,OAAQ,KACL,CACH,GAAImE,EAAS,IAAK,CACjB2B,EAAKM,aAAa,GAAAnB,GAAArJ,QAAA2J,EAAAc,OACjBjH,SAAUA,IAGX,UAGD,GAAI+E,EAAS,IAAK,CACjB2B,EAAKQ,UAAU,GAAAnB,GAAAvJ,SACdwD,SAAUA,IAGX,UAGD,GAAI+E,EAAS,IAAK,CACjB2B,EAAKQ,UAAU,GAAAjB,GAAAzJ,SACdwD,SAAUA,IAGX,cPwoBE,SAAUzE,EAAQD,EAASH,GAEjC,YASA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHnB,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MQ7sB3gBgK,ERitBV,WQhtBV,QAAAA,GAAYlJ,GAAMhB,EAAAiC,KAAAiI,GACjBjI,KAAKiB,QAAQlC,GAEbiB,KAAKkI,SAAW,GAAIC,KRoxBrB,MA9DAjJ,GAAa+I,IACZxI,IAAK,YACLR,MAAO,SQrtBEmG,GACTpF,KAAKkI,SAASE,IAAIhD,GAClBA,EAAOJ,KAAOhF,QRwtBdP,IAAK,cACLR,MAAO,WQrtBP,MAAOe,MAAKkI,YRytBZzI,IAAK,UACLR,MAAO,SQvtBAF,GACPiB,KAAKjB,KAAOA,KR0tBZU,IAAK,UACLR,MAAO,WQvtBP,MAAOe,MAAKjB,QR2tBZU,IAAK,qBACLR,MAAO,SQztBWoJ,GAClBrI,KAAKqI,gBAAkBA,KR4tBvB5I,IAAK,qBACLR,MAAO,WQztBP,MAAOe,MAAKqI,mBR6tBZ5I,IAAK,iBACLR,MAAO,SQ3tBOqJ,EAASC,GACvBD,EAAQE,UAAYxI,KAAKqI,gBACzBC,EAAQG,SACPF,EAAOpH,EACPoH,EAAOnH,EACPpB,KAAKjB,KAAK4C,MACV3B,KAAKjB,KAAK2C,QAGX4G,EAAQI,YAAc,UACtBJ,EAAQK,WACPJ,EAAOpH,EACPoH,EAAOnH,EACPpB,KAAKjB,KAAK4C,MACV3B,KAAKjB,KAAK2C,WRqtBXjC,IAAK,6BACLR,MAAO,SQltBmBwC,GAC1B,MAAOzB,MAAKkF,8BAA8BzD,GAAYnC,OAAS,KRqtB/DG,IAAK,gCACLR,MAAO,SQntBsBwC,GAA0B,GAAdmH,GAAclI,UAAApB,OAAA,YAAAoB,UAAA,GAAAA,UAAA,MACnDwH,IAQJ,OANAlI,MAAKkI,SAASxJ,QAAQ,SAAC0G,GAClBA,EAAOpE,OAASoE,EAAOyD,mBAAmBpH,KAAgBmH,EAAQE,SAAS1D,IAC9E8C,EAASlJ,KAAKoG,KAIT8C,MRytBDD,IAGR7L,GAAQkB,QQ3xBa2K,GR+xBf,SAAU5L,EAAQD,EAASH,GAEjC,YASA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCSxqBhH,QAAS6K,GAAmB7B,EAAQnI,GACnCmI,EAAOvF,MAAQ5C,EAAK4C,MACpBuF,EAAOxF,OAAS3C,EAAK2C,OAGtB,QAASsH,GAA8CC,EAAgB3B,GACtE,OACCnG,EAAG8H,EAAe9H,EAAImG,EAASxG,SAASK,EACxCC,EAAG6H,EAAe7H,EAAIkG,EAASxG,SAASM,GT0pB1CrE,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MSxyB3gBiL,ET4yBN,WS3yBd,QAAAA,GAAYhC,EAAQpG,EAAU/B,GAAMhB,EAAAiC,KAAAkJ,GACnClJ,KAAKmJ,UAAUjC,GACflH,KAAKc,SAAWA,EAChBd,KAAKiB,QAAQlC,GAEbiB,KAAKoJ,gBT66BN,MA5HAlK,GAAagK,IACZzJ,IAAK,WACLR,MAAO,SShzBC+F,GACRhF,KAAKgF,KAAOA,KTmzBZvF,IAAK,YACLR,MAAO,SSjzBEiI,GACTlH,KAAKkH,OAASA,EACdlH,KAAKsI,QAAUpB,EAAOmC,WAAW,MAE7BrJ,KAAKjB,MACRgK,EAAmB7B,EAAQlH,KAAKjB,STqzBjCU,IAAK,eACLR,MAAO,SSlzBKmG,GACZpF,KAAKsJ,eAAiBlE,KTqzBtB3F,IAAK,UACLR,MAAO,SSnzBAF,GACPiB,KAAKjB,KAAOA,EAERiB,KAAKkH,QACR6B,EAAmB/I,KAAKkH,OAAQnI,MTuzBjCU,IAAK,gBACLR,MAAO,WSnzBPsK,OAAOC,sBAAsBxJ,KAAKyJ,OAAOC,KAAK1J,UTuzB9CP,IAAK,SACLR,MAAO,SSrzBDoC,GAEN,GAAIrB,KAAKsJ,eAAgB,CACxB,GAAIK,IACHxI,EAAGnB,KAAKsJ,eAAexI,SAASK,EAAKnB,KAAKjB,KAAK4C,MAAQ,EAAM3B,KAAKsJ,eAAevK,KAAK4C,MAAQ,EAC9FP,EAAGpB,KAAKsJ,eAAexI,SAASM,EAAKpB,KAAKjB,KAAK2C,OAAS,EAAM1B,KAAKsJ,eAAevK,KAAK2C,OAAS,EAG7FiI,GAAoBxI,EAAI,IAC3BwI,EAAoBxI,EAAI,GAGrBwI,EAAoBvI,EAAI,IAC3BuI,EAAoBvI,EAAI,GAGrBuI,EAAoBxI,EAAKnB,KAAKgF,KAAKjG,KAAK4C,MAAQ3B,KAAKjB,KAAK4C,QAC7DgI,EAAoBxI,EAAInB,KAAKgF,KAAKjG,KAAK4C,MAAQ3B,KAAKjB,KAAK4C,OAGtDgI,EAAoBvI,EAAKpB,KAAKgF,KAAKjG,KAAK2C,OAAS1B,KAAKjB,KAAK2C,SAC9DiI,EAAoBvI,EAAIpB,KAAKgF,KAAKjG,KAAK2C,OAAS1B,KAAKjB,KAAK2C,QAG3D1B,KAAKc,SAAW6I,EAGjB3J,KAAK4J,KAAKvI,GACVrB,KAAK6J,KAAKxI,GAEVkI,OAAOC,sBAAsBxJ,KAAKyJ,OAAOC,KAAK1J,UTwzB9CP,IAAK,OACLR,MAAO,SStzBHoC,GACJrB,KAAKgF,KAAKkD,SAASxJ,QAAQ,SAAC0G,GAC3BA,EAAOwE,KAAKvI,GAER+D,EAAOxE,QACVwE,EAAOxE,OAAOgJ,KAAKvI,QT2zBrB5B,IAAK,OACLR,MAAO,SSvzBHoC,GAAM,GAAAhB,GAAAL,IAEVA,MAAK8J,aAAa9J,KAAKsI,SAGvBtI,KAAKgF,KAAK+E,eAAe/J,KAAKsI,SAC7BnH,GAAInB,KAAKc,SAASK,EAClBC,GAAIpB,KAAKc,SAASM,IAGnBpB,KAAKgF,KAAKkD,SAASxJ,QAAQ,SAAC0G,GAE1BA,EAAO1H,eAAe,WACnB0H,EAAO1H,eAAe,aACtB0H,EAAOtE,SAASpD,eAAe,MAC/B0H,EAAOtE,SAASpD,eAAe,MAElC0H,EAAOxE,OAAOiJ,KAAKxJ,EAAKiI,QAASU,GAChC7H,EAAGiE,EAAOtE,SAASK,EAAIiE,EAAOtG,OAAOqC,EACrCC,EAAGgE,EAAOtE,SAASM,EAAIgE,EAAOtG,OAAOsC,GAFLf,ST4zBnCZ,IAAK,aACLR,MAAO,SSrzBGqJ,GACVA,EAAQI,YAAc,UAEtBJ,EAAQ0B,YACR1B,EAAQhD,OAAO,EAAG,GAClBgD,EAAQ2B,OAAOjK,KAAKjB,KAAK4C,MAAO3B,KAAKjB,KAAK2C,QAC1C4G,EAAQ4B,SAER5B,EAAQ0B,YACR1B,EAAQhD,OAAOtF,KAAKjB,KAAK4C,MAAO,GAChC2G,EAAQ2B,OAAO,EAAGjK,KAAKjB,KAAK2C,QAC5B4G,EAAQ4B,YTwzBRzK,IAAK,eACLR,MAAO,SStzBKqJ,GACZA,EAAQ6B,UACP,EACA,EACAnK,KAAKjB,KAAK4C,MACV3B,KAAKjB,KAAK2C,YTszBLwH,IAGR9M,GAAQkB,QSt7Ba4L,GTu8Bf,SAAU7M,EAAQD,EAASH,GAEjC,YAeA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAZhHnB,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MUh9BhiBmM,EAAAnO,EAAA,GVo9BIoO,EAEJ,SAAgCvM,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,IAFjDsM,GUl9BjBE,EVw9BV,WUv9BV,QAAAA,GAAYtF,GAAMjH,EAAAiC,KAAAsK,GACjBtK,KAAKgF,KAAOA,EAEZhF,KAAKyH,OACLzH,KAAKuK,WAAa,GAAIpC,KACtBnI,KAAKwK,QAAU,GAAIrC,KAEnBkC,EAAA/M,QAAOmN,UAAU,kBAAmBzK,KAAK0K,KAAKhB,KAAK1J,OVigCpD,MApCAd,GAAaoL,IACZ7K,IAAK,OACLR,MAAO,WU39BPmF,QAAQC,IAAI,WACZrE,KAAK2K,kBV+9BLlL,IAAK,YACLR,MAAO,SU79BE2L,GACT5K,KAAKyH,OAASmD,EAEd5K,KAAKgF,KAAK6F,UAAUD,MVg+BpBnL,IAAK,eACLR,MAAO,SU99BK6L,GACZ9K,KAAKuK,WAAWnC,IAAI0C,GAEpB9K,KAAKgF,KAAK6F,UAAUC,MVi+BpBrL,IAAK,YACLR,MAAO,SU/9BE8L,GACT/K,KAAKwK,QAAQpC,IAAI2C,GAEjB/K,KAAKgF,KAAK6F,UAAUE,MVk+BpBtL,IAAK,eACLR,MAAO,WU/9BPe,KAAKuK,WAAW7L,QAAQ,SAACsM,GACxBA,EAAUC,iBVq+BLX,IAGRlO,GAAQkB,QU5gCagN,GVghCf,SAAUjO,EAAQD,EAASH,GAEjC,YAiBA,SAAS4B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASkE,GAA2BC,EAAM7F,GAAQ,IAAK6F,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO9F,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B6F,EAAP7F,EAElO,QAAS+F,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIvE,WAAU,iEAAoEuE,GAAeD,GAAS/E,UAAYV,OAAO2F,OAAOD,GAAcA,EAAWhF,WAAakF,aAAe1D,MAAOuD,EAAUtF,cAAmBsC,YAAgBvC,mBAA6BwF,IAAY1F,OAAO6F,eAAiB7F,OAAO6F,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GApBje1F,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MW3hChiBiN,EAAAjP,EAAA,GX+hCIkP,EAAUtN,EAAuBqN,GW9hCrCd,EAAAnO,EAAA,GXkiCIoO,EAAWxM,EAAuBuM,GWhiCjBgB,EX0iCR,SAAUC,GWziCtB,QAAAD,GAAYpH,EAAMvD,GAAS1C,EAAAiC,KAAAoL,EAAA,IAAA/K,GAAA+B,EAAApC,MAAAoL,EAAAvI,WAAA9F,OAAA6G,eAAAwH,IAAA5O,KAAAwD,KACpBgE,EAAMvD,GADc,OAG1B8I,QAAO3D,iBAAiB,UAAWvF,EAAKiL,UAAU5B,KAAfrJ,IAHTA,EXslC3B,MA5CAkC,GAAU6I,EAAQC,GAWlBnM,EAAakM,IACZ3L,IAAK,YACLR,MAAO,SWjjCEsM,GACT,IAAKvL,KAAKuF,KAAM,CACf,GAAIJ,KAEc,aAAdoG,EAAM9L,MACT8L,EAAMC,iBACNrG,EAAcnF,KAAKyL,UAGF,eAAdF,EAAM9L,MACT8L,EAAMC,iBACNrG,EAAcnF,KAAK0L,aAGF,cAAdH,EAAM9L,MACT8L,EAAMC,iBACNrG,EAAcnF,KAAK2L,YAGF,cAAdJ,EAAM9L,MACT8L,EAAMC,iBACNrG,EAAcnF,KAAK4L,YAGhBzG,GACHkF,EAAA/M,QAAOuO,QAAQ,wBXujCXT,GACND,EAAQ7N,QAEVlB,GAAQkB,QW1lCa8N,GX8lCf,SAAU/O,EAAQD,EAASH,GAEjC,YAeA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCY//BhH,QAAS4N,GAAiCC,EAAmBzK,EAAQ0K,GAAgC,GAAhBC,KAAgBvL,UAAApB,OAAA,YAAAoB,UAAA,KAAAA,UAAA,EAGpG,IAAe,KAFfY,EAASyE,KAAKC,MAAM1E,IAGnB,MAAOyK,EAGR,IAAIE,EAAS,CACZ,GAAIC,IAAiBH,EAAoBzK,GAAU0K,CAEnD,OAAIE,GAAgB,EACZA,EAAgBF,EAGjBE,EAGR,IAAKD,EAAS,CACb,GAAIC,GAAgBH,EAAoBzK,CAExC,OAAI4K,GAAiBF,EAAiB,EAC7BA,EAAiB,EAGtBE,EAAgB,EACZ,EAGDA,GAIT,QAASC,GAA+B9N,GACvC,GAAI+N,GAAe,EACfC,EAAgB,CAYpB,OAVAhO,GAAOK,QAAQ,SAACE,GACXA,EAAMG,KAAK4C,MAAQyK,IACtBA,EAAexN,EAAMG,KAAK4C,OAGvB/C,EAAMG,KAAK2C,OAAS2K,IACvBA,EAAgBzN,EAAMG,KAAK2C,WAK5BC,MAAOyK,EACP1K,OAAQ2K,GZm8BVtP,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MY1mChiB6B,EAAA7D,EAAA,GZ8mCI4C,EAEJ,SAAgCf,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,IAF5CgC,GY5mCtBwM,EZknCR,WYjnCZ,QAAAA,GAAYjO,GAAsB,GAAdoC,GAAcC,UAAApB,OAAA,YAAAoB,UAAA,GAAAA,UAAA,KAAA3C,GAAAiC,KAAAsM,GACjCtM,KAAKuM,UAAUlO,GAEXoC,EAAQ/C,eAAe,QAC1BsC,KAAKjB,KAAO0B,EAAQ1B,KAEpBiB,KAAKjB,KAAOoN,EAA+BnM,KAAKwM,aAG7C/L,EAAQ/C,eAAe,YAC1BsC,KAAKlB,OAAS2B,EAAQ3B,QAGnB2B,EAAQ/C,eAAe,cAC1BsC,KAAKyM,qBAAqBhM,EAAQiM,YAElC1M,KAAKyM,qBAAqB,GAGvBhM,EAAQ/C,eAAe,mBAC1BsC,KAAK2M,mBAAmBlM,EAAQmM,iBAEhC5M,KAAK2M,mBAAmB,GAGrBlM,EAAQ/C,eAAe,WAC1BsC,KAAKiM,QAAUxL,EAAQwL,QAEvBjM,KAAKiM,WAGNjM,KAAK6M,oBAAsB,EZ8sC5B,MArFA3N,GAAaoN,IACZ7M,IAAK,YACLR,MAAO,WYxnCe,GAAbZ,GAAaqC,UAAApB,OAAA,YAAAoB,UAAA,GAAAA,UAAA,KAClBoM,OAAMC,QAAQ1O,GACjB2B,KAAK3B,OAASA,EACJA,uBACV2B,KAAK3B,QAAUA,GAEf2B,KAAK3B,aZ8nCNoB,IAAK,YACLR,MAAO,WY1nCP,MAAOe,MAAK3B,UZ8nCZoB,IAAK,qBACLR,MAAO,SY5nCW2N,GAClB5M,KAAK4M,gBAAkBA,KZ+nCvBnN,IAAK,qBACLR,MAAO,WY5nCP,MAAOe,MAAK4M,mBZgoCZnN,IAAK,uBACLR,MAAO,SY9nCa+N,GAChBhN,KAAK3B,OAAO2O,KACfhN,KAAK+L,kBAAoBiB,MZkoC1BvN,IAAK,kBACLR,MAAO,WY9nCP,MAAOe,MAAK3B,OAAO2B,KAAK+L,sBZkoCxBtM,IAAK,OACLR,MAAO,SYhoCHqJ,EAASxH,GACb,GAAImM,GAAejN,KAAKkN,iBAEpBD,IACH3E,EAAQ6E,UACPF,EAAaG,WACbH,EAAaI,YAAYlM,EAAG8L,EAAaI,YAAYjM,EACrD6L,EAAaK,UAAU3L,MAAOsL,EAAaK,UAAU5L,OACrDZ,EAASK,EAAGL,EAASM,EACrBpB,KAAKjB,KAAK4C,MAAO3B,KAAKjB,KAAK2C,WZ+nC7BjC,IAAK,OACLR,MAAO,SY3nCHoC,GACJ,GAAIuL,GAAkB5M,KAAKuN,oBAE3B,IAAwB,IAApBX,IAA4B5M,KAAKiM,SAAWjM,KAAK+L,oBAAuB/L,KAAK3B,OAAOiB,OAAS,GAAK,CACrG,GAAIkO,GAAyBnM,EAAOrB,KAAK6M,oBAErCY,EAAcD,GAA0B,IAAOZ,EAE/Ca,GAAc,IACjBA,EAAc1H,KAAK2H,MAAMD,IAGtBA,EAAc,IACjBA,EAAc1H,KAAK4H,KAAKF,IAGL,IAAhBA,IACHzN,KAAK6M,oBAAsBxL,EAC3BrB,KAAKyM,qBAAqBX,EAAiC9L,KAAK+L,kBAAmB0B,EAAazN,KAAK3B,OAAOiB,OAAQU,KAAKiM,eZgoC3HxM,IAAK,YACLR,MAAO,WY3nCPe,KAAK+L,kBAAoBD,EAAiC9L,KAAK+L,kBAAmB,EAAG/L,KAAK3B,OAAOiB,OAAQU,KAAKiM,YZ+nC9GxM,IAAK,gBACLR,MAAO,WY5nCPe,KAAK+L,kBAAoBD,EAAiC9L,KAAK+L,mBAAoB,EAAG/L,KAAK3B,OAAOiB,OAAQU,KAAKiM,aZioCzGK,IAGRlQ,GAAQkB,QYjvCagP,GZ4yCf,SAAUjQ,EAAQD,EAASH,GAEjC,YAeA,SAAS8B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASkE,GAA2BC,EAAM7F,GAAQ,IAAK6F,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO9F,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B6F,EAAP7F,EAElO,QAAS+F,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIvE,WAAU,iEAAoEuE,GAAeD,GAAS/E,UAAYV,OAAO2F,OAAOD,GAAcA,EAAWhF,WAAakF,aAAe1D,MAAOuD,EAAUtF,cAAmBsC,YAAgBvC,mBAA6BwF,IAAY1F,OAAO6F,eAAiB7F,OAAO6F,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAhBje1F,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,MavzChiBiN,EAAAjP,EAAA,Gb2zCIkP,EAEJ,SAAgCrN,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,IAFlDoN,GazzChB0C,Ebm0CL,SAAUvC,Gal0CzB,QAAAuC,GAAY5J,EAAMvD,GAAS,MAAA1C,GAAAiC,KAAA4N,GAAAxL,EAAApC,MAAA4N,EAAA/K,WAAA9F,OAAA6G,eAAAgK,IAAApR,KAAAwD,KACpBgE,EAAMvD,Ibm2Cb,MAjCA8B,GAAUqL,EAAWvC,GAQrBnM,EAAa0O,IACZnO,IAAK,WACLR,MAAO,Wax0CP,IAAKe,KAAKuF,KAAM,CACf,GAAIsI,GAAW9H,KAAKC,MAAsB,EAAhBD,KAAKE,SAEd,KAAb4H,GACH7N,KAAKyL,SAGW,IAAboC,GACH7N,KAAK0L,YAGW,IAAbmC,GACH7N,KAAK2L,WAGW,IAAbkC,GACH7N,KAAK4L,gBb+0CDgC,GACNzC,EAAQ7N,QAEVlB,GAAQkB,Qax2CasQ,Gb42Cf,SAAUvR,EAAQD,EAASH,GAEjC,YAiBA,SAAS4B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASkE,GAA2BC,EAAM7F,GAAQ,IAAK6F,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO9F,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B6F,EAAP7F,EAElO,QAAS+F,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIvE,WAAU,iEAAoEuE,GAAeD,GAAS/E,UAAYV,OAAO2F,OAAOD,GAAcA,EAAWhF,WAAakF,aAAe1D,MAAOuD,EAAUtF,cAAmBsC,YAAgBvC,mBAA6BwF,IAAY1F,OAAO6F,eAAiB7F,OAAO6F,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GApBje1F,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,Mcv3ChiBkF,EAAAlH,EAAA,Gd23CImH,EAAWvF,EAAuBsF,Gc13CtCE,EAAApH,EAAA,Gd83CI8G,EAAgBlF,EAAuBwF,Gc53CtByK,Eds4CV,SAAUpK,Gcr4CpB,QAAAoK,GAAYrN,GAAS1C,EAAAiC,KAAA8N,EAAA,IAAAzN,GAAA+B,EAAApC,MAAA8N,EAAAjL,WAAA9F,OAAA6G,eAAAkK,IAAAtR,KAAAwD,KACdS,IAGFsN,EAAc,GAAAhL,GAAAzF,QAAgB0F,KAAKC,MADX,wJAExB+K,EAAaD,EAAY7K,wBAC5B,UANmB,OASpB7C,GAAKM,UAAUqN,GACf3N,EAAKY,SAASU,MAAO,GAAID,OAAQ,KAEjCrB,EAAKU,gBACLV,EAAK2D,KAAO,OAbQ3D,Edg6CrB,MA1BAkC,GAAUuL,EAAMpK,GAmBhBxE,EAAa4O,IACZrO,IAAK,gBACLR,MAAO,Wc14CP,ad+4CM6O,GACN1K,EAAS9F,QAEXlB,GAAQkB,Qcp6CawQ,Gdw6Cf,SAAUzR,EAAQD,EAASH,GAEjC,YAiBA,SAAS4B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASkE,GAA2BC,EAAM7F,GAAQ,IAAK6F,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO9F,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B6F,EAAP7F,EAElO,QAAS+F,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIvE,WAAU,iEAAoEuE,GAAeD,GAAS/E,UAAYV,OAAO2F,OAAOD,GAAcA,EAAWhF,WAAakF,aAAe1D,MAAOuD,EAAUtF,cAAmBsC,YAAgBvC,mBAA6BwF,IAAY1F,OAAO6F,eAAiB7F,OAAO6F,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GApBje1F,OAAOC,eAAeZ,EAAS,cAC9B6C,UAGD,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/C,GAAI,EAAGA,EAAI+C,EAAMC,OAAQhD,IAAK,CAAE,GAAIiD,GAAaF,EAAM/C,EAAIiD,GAAWrC,WAAaqC,EAAWrC,eAAqBqC,EAAWtC,gBAAyB,SAAWsC,KAAYA,EAAWC,aAAiBzC,OAAOC,eAAeoC,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBlB,EAAYR,UAAWiC,GAAiBC,GAAaR,EAAiBlB,EAAa0B,GAAqB1B,Mep7ChiBkF,EAAAlH,EAAA,Gfw7CImH,EAAWvF,EAAuBsF,Gev7CtCE,EAAApH,EAAA,Gf27CI8G,EAAgBlF,EAAuBwF,Gez7CtB4K,Efm8CV,SAAUvK,Gel8CpB,QAAAuK,GAAYxN,GAAS1C,EAAAiC,KAAAiO,EAAA,IAAA5N,GAAA+B,EAAApC,MAAAiO,EAAApL,WAAA9F,OAAA6G,eAAAqK,IAAAzR,KAAAwD,KACdS,IAGFsN,EAAc,GAAAhL,GAAAzF,QAAgB0F,KAAKC,MADX,8JAExB+K,EAAaD,EAAY7K,wBAC5B,YANmB,OASpB7C,GAAKM,UAAUqN,GACf3N,EAAKY,SAASU,MAAO,GAAID,OAAQ,KACjCrB,EAAKa,WAAWC,EAAG,EAAGC,GAAI,KAE1Bf,EAAKU,gBACLV,EAAK2D,KAAO,OAdQ3D,Ef89CrB,MA3BAkC,GAAU0L,EAAMvK,GAoBhBxE,EAAa+O,IACZxO,IAAK,gBACLR,MAAO,Wev8CP,af48CMgP,GACN7K,EAAS9F,QAEXlB,GAAQkB,Qel+Ca2Q,Gfs+Cf,SAAU5R,EAAQD,EAASH,GAEjC,YAGAc,QAAOC,eAAeZ,EAAS,cAC9B6C,WAED7C,EAAQsL,agBj/CR,IAAArE,GAAApH,EAAA,GhBq/CI8G,EAEJ,SAAgCjF,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,IAF5CuF,EgBn/C9BqE,WACZ1D,KAAM,SACND,OACCP,UAAW,GACXD,SAAU,GAEX3C,OAQD,WACC,GACImN,GAAc,GAAAhL,GAAAzF,QAAgB0F,KAAKC,MADX,wpBAExBiL,EAAeH,EAAY7K,wBAC9B,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,iBAMD,OAHAgL,GAAajC,WACbiC,EAAavB,mBAAmB,IAEzBuB,KA7BPnP,MACC4C,MAAO,GACPD,OAAQ,IAETV,WhBugDK,SAAU3E,EAAQD,EAASH,GAEjC,YAGAc,QAAOC,eAAeZ,EAAS,cAC9B6C,WAED7C,EAAQ2L,YiB5hDR,IAAA1E,GAAApH,EAAA,GjBgiDI8G,EAEJ,SAAgCjF,GAAO,MAAOA,IAAOA,EAAIT,WAAaS,GAAQR,QAASQ,IAF5CuF,EiB9hD9B0E,UACZ/D,KAAM,QACND,OACCP,UAAW,GACXD,SAAU,GAEX3C,OAQD,WACC,GACImN,GAAc,GAAAhL,GAAAzF,QAAgB0F,KAAKC,MADX,iQAExBkL,EAAcJ,EAAY7K,wBAC7B,eACA,gBAKD,OAFAiL,GAAYxB,mBAAmB,GAExBwB,KAjBPpP,MACC4C,MAAO,GACPD,OAAQ,IAETV,WjBijDK,SAAU3E,EAAQD","file":"sorcerer.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Sprite = __webpack_require__(10);\n\nvar _Sprite2 = _interopRequireDefault(_Sprite);\n\nvar _SpriteFrame = __webpack_require__(4);\n\nvar _SpriteFrame2 = _interopRequireDefault(_SpriteFrame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SpriteAtlas = function () {\n\tfunction SpriteAtlas(definition) {\n\t\t_classCallCheck(this, SpriteAtlas);\n\n\t\tthis.frames = createFramesFromDefinition(definition);\n\t}\n\n\t_createClass(SpriteAtlas, [{\n\t\tkey: 'getFrame',\n\t\tvalue: function getFrame(frameName) {\n\t\t\treturn this.frames.find(function (frame) {\n\t\t\t\treturn frame.getName() === frameName;\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'createSpriteWithFrames',\n\t\tvalue: function createSpriteWithFrames(frameNames) {\n\t\t\tvar _this = this;\n\n\t\t\tvar frames = frameNames.map(function (frameName) {\n\t\t\t\treturn _this.getFrame(frameName);\n\t\t\t});\n\n\t\t\treturn new _Sprite2.default(frames);\n\t\t}\n\t}]);\n\n\treturn SpriteAtlas;\n}();\n\nexports.default = SpriteAtlas;\n\n\nfunction createFramesFromDefinition(definition) {\n\tvar frames = [];\n\n\tif (definition.hasOwnProperty('file')) {\n\t\tvar image = new Image();\n\t\timage.src = definition.file;\n\n\t\tdefinition.frames.forEach(function (frameData) {\n\t\t\tvar frame = new _SpriteFrame2.default(frameData.name, image, frameData.origin, frameData.size);\n\n\t\t\tframes.push(frame);\n\t\t});\n\t}\n\n\treturn frames;\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Entity = function () {\n\tfunction Entity() {\n\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t_classCallCheck(this, Entity);\n\n\t\tif (options.hasOwnProperty('sprite')) {\n\t\t\tthis.setSprite(options.sprite);\n\t\t}\n\n\t\tif (options.hasOwnProperty('position')) {\n\t\t\tthis.setPosition(options.position);\n\t\t}\n\n\t\tif (options.hasOwnProperty('solid')) {\n\t\t\tthis.setSolidity(options.solid);\n\t\t}\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.setSize(options.size);\n\t\t}\n\n\t\tif (options.hasOwnProperty('origin')) {\n\t\t\tthis.setOrigin(options.origin);\n\t\t} else {\n\t\t\tthis.setOrigin({ x: 0, y: 0 });\n\t\t}\n\t}\n\n\t_createClass(Entity, [{\n\t\tkey: 'step',\n\t\tvalue: function step(time) {}\n\t}, {\n\t\tkey: 'setSprite',\n\t\tvalue: function setSprite(sprite) {\n\t\t\tthis.sprite = sprite;\n\t\t}\n\t}, {\n\t\tkey: 'setPosition',\n\t\tvalue: function setPosition(position) {\n\t\t\tthis.position = position;\n\t\t}\n\t}, {\n\t\tkey: 'getPosition',\n\t\tvalue: function getPosition() {\n\t\t\treturn this.position;\n\t\t}\n\t}, {\n\t\tkey: 'setSolidity',\n\t\tvalue: function setSolidity(solid) {\n\t\t\tthis.solid = solid;\n\t\t}\n\t}, {\n\t\tkey: 'isSolid',\n\t\tvalue: function isSolid() {\n\t\t\treturn this.solid;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\t\t}\n\t}, {\n\t\tkey: 'getSize',\n\t\tvalue: function getSize() {\n\t\t\treturn this.size;\n\t\t}\n\t}, {\n\t\tkey: 'setOrigin',\n\t\tvalue: function setOrigin(origin) {\n\t\t\tthis.origin = origin;\n\t\t}\n\t}, {\n\t\tkey: 'getOrigin',\n\t\tvalue: function getOrigin() {\n\t\t\treturn this.origin;\n\t\t}\n\t}, {\n\t\tkey: 'changePosition',\n\t\tvalue: function changePosition(change) {\n\t\t\tvar currentPosition = this.getPosition();\n\n\t\t\tthis.setPosition({\n\t\t\t\tx: currentPosition.x + change.x,\n\t\t\t\ty: currentPosition.y + change.y\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'isWithinBoundaries',\n\t\tvalue: function isWithinBoundaries(boundaries) {\n\t\t\treturn this.position.y < boundaries.y + boundaries.height && this.position.x + this.size.width > boundaries.x && this.position.y + this.size.height > boundaries.y && this.position.x < boundaries.x + boundaries.width;\n\t\t}\n\t}]);\n\n\treturn Entity;\n}();\n\nexports.default = Entity;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar topics = new Map();\n\nvar PubSub = function () {\n\tfunction PubSub() {\n\t\t_classCallCheck(this, PubSub);\n\t}\n\n\t_createClass(PubSub, null, [{\n\t\tkey: \"subscribe\",\n\t\tvalue: function subscribe(topic, callback) {\n\t\t\tif (!topics.has(topic)) {\n\t\t\t\ttopics.set(topic, []);\n\t\t\t}\n\n\t\t\tvar topicCallbacks = topics.get(topic);\n\t\t\ttopicCallbacks.push(callback);\n\t\t}\n\t}, {\n\t\tkey: \"publish\",\n\t\tvalue: function publish(topic, data) {\n\t\t\tif (topics.has(topic)) {\n\t\t\t\ttopics.get(topic).forEach(function (callback) {\n\t\t\t\t\tcallback(data);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn PubSub;\n}();\n\nexports.default = PubSub;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Entity2 = __webpack_require__(1);\n\nvar _Entity3 = _interopRequireDefault(_Entity2);\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar STATS_DEFAULT = {\n\tstrength: 1,\n\tmaxHealth: 1\n};\n\nvar Actor = function (_Entity) {\n\t_inherits(Actor, _Entity);\n\n\tfunction Actor(creatureDefinition, options) {\n\t\t_classCallCheck(this, Actor);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Actor.__proto__ || Object.getPrototypeOf(Actor)).call(this, options));\n\n\t\t_this.applyCreatureDefinition(creatureDefinition);\n\n\t\t_this.health = _this.stats.maxHealth;\n\t\treturn _this;\n\t}\n\n\t_createClass(Actor, [{\n\t\tkey: 'applyCreatureDefinition',\n\t\tvalue: function applyCreatureDefinition(creatureDefinition) {\n\t\t\tthis.type = creatureDefinition.type;\n\t\t\tthis.applyStats(creatureDefinition.stats);\n\t\t\tthis.setSprite(creatureDefinition.sprite);\n\t\t\tthis.setSize(creatureDefinition.size);\n\t\t\tthis.setSolidity(creatureDefinition.solid);\n\t\t}\n\t}, {\n\t\tkey: 'applyStats',\n\t\tvalue: function applyStats(stats) {\n\t\t\tthis.stats = Object.assign({}, STATS_DEFAULT, stats);\n\t\t}\n\t}, {\n\t\tkey: 'bumpInto',\n\t\tvalue: function bumpInto(target) {\n\t\t\tif (target.canBeAttacked()) {\n\t\t\t\tconsole.log(this.type + ' attacks ' + target.type);\n\n\t\t\t\tthis.attackTarget(target);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}, {\n\t\tkey: 'attackTarget',\n\t\tvalue: function attackTarget(target) {\n\t\t\ttarget.applyDamage(this.calculateAttackDamage());\n\t\t}\n\t}, {\n\t\tkey: 'calculateAttackDamage',\n\t\tvalue: function calculateAttackDamage() {\n\t\t\treturn this.stats.strength;\n\t\t}\n\t}, {\n\t\tkey: 'applyDamage',\n\t\tvalue: function applyDamage(damage) {\n\t\t\tconsole.log(this.type + ' takes ' + damage + ' damage');\n\n\t\t\tthis.reduceHealth(damage);\n\t\t}\n\t}, {\n\t\tkey: 'restoreHealth',\n\t\tvalue: function restoreHealth(amount) {\n\t\t\tthis.changeHealth(this.health + amount);\n\t\t}\n\t}, {\n\t\tkey: 'reduceHealth',\n\t\tvalue: function reduceHealth(amount) {\n\t\t\tthis.changeHealth(this.health - amount);\n\t\t}\n\t}, {\n\t\tkey: 'changeHealth',\n\t\tvalue: function changeHealth(health) {\n\t\t\tif (health > this.stats.maxHealth) {\n\t\t\t\tthis.health = this.stats.maxHealth;\n\n\t\t\t\tconsole.log(this.type + ' health is now at maximum at ' + this.health);\n\t\t\t} else if (health <= 0) {\n\t\t\t\tthis.health = 0;\n\t\t\t\tthis.die();\n\n\t\t\t\tconsole.log(this.type + ' health is now ' + this.health);\n\t\t\t\tconsole.log(this.type + ' is dead');\n\t\t\t} else {\n\t\t\t\tthis.health = health;\n\n\t\t\t\tconsole.log(this.type + ' health is now ' + this.health);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'moveTo',\n\t\tvalue: function moveTo(position) {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (this.isInBoundsOfRoomAtPosition(this.room, position)) {\n\t\t\t\tvar entitiesAtPosition = this.room.findSolidEntitiesInBoundaries({\n\t\t\t\t\tx: position.x,\n\t\t\t\t\ty: position.y,\n\t\t\t\t\twidth: this.sprite.size.width,\n\t\t\t\t\theight: this.sprite.size.height\n\t\t\t\t}, [this]);\n\n\t\t\t\tif (entitiesAtPosition.length === 0) {\n\t\t\t\t\tthis.setPosition(position);\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (entitiesAtPosition.length > 0) {\n\t\t\t\t\tvar actionTaken = false;\n\n\t\t\t\t\tentitiesAtPosition.forEach(function (entity) {\n\t\t\t\t\t\tvar bumpIntoResult = _this2.bumpInto(entity);\n\n\t\t\t\t\t\tif (bumpIntoResult) {\n\t\t\t\t\t\t\tactionTaken = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn actionTaken;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}, {\n\t\tkey: 'moveUp',\n\t\tvalue: function moveUp() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.position.x,\n\t\t\t\ty: this.position.y - 16\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'moveRight',\n\t\tvalue: function moveRight() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.position.x + 16,\n\t\t\t\ty: this.position.y\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'moveDown',\n\t\tvalue: function moveDown() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.position.x,\n\t\t\t\ty: this.position.y + 16\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'moveLeft',\n\t\tvalue: function moveLeft() {\n\t\t\treturn this.moveTo({\n\t\t\t\tx: this.position.x - 16,\n\t\t\t\ty: this.position.y\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'canBeAttacked',\n\t\tvalue: function canBeAttacked() {\n\t\t\treturn !this.dead;\n\t\t}\n\t}, {\n\t\tkey: 'die',\n\t\tvalue: function die() {\n\t\t\tthis.dead = true;\n\t\t\tthis.sprite = getDeadSprite();\n\t\t}\n\t}, {\n\t\tkey: 'isInBoundsOfRoomAtPosition',\n\t\tvalue: function isInBoundsOfRoomAtPosition(room, position) {\n\t\t\treturn position.x >= 0 && position.y >= 0 && position.x + this.size.width <= room.size.width && position.y + this.size.height <= room.size.height;\n\t\t}\n\t}]);\n\n\treturn Actor;\n}(_Entity3.default);\n\nexports.default = Actor;\n\n\nfunction getDeadSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/grave-sheet.png\", \"frames\": [ { \"name\": \"grave_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar graveSprite = spriteAtlas.createSpriteWithFrames(['grave_0']);\n\n\treturn graveSprite;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SpriteFrame = function () {\n\tfunction SpriteFrame(name, image, position, size) {\n\t\t_classCallCheck(this, SpriteFrame);\n\n\t\tthis.setName(name);\n\t\tthis.setImage(image);\n\t\tthis.setOrigin(position);\n\t\tthis.setSize(size);\n\t}\n\n\t_createClass(SpriteFrame, [{\n\t\tkey: 'setName',\n\t\tvalue: function setName(name) {\n\t\t\tthis.name = name;\n\t\t}\n\t}, {\n\t\tkey: 'setImage',\n\t\tvalue: function setImage(image) {\n\t\t\tvar _this = this;\n\n\t\t\tthis.imageLoaded = false;\n\t\t\tthis.image = image;\n\n\t\t\tthis.image.addEventListener('load', function () {\n\t\t\t\t_this.imageLoaded = true;\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'setOrigin',\n\t\tvalue: function setOrigin(origin) {\n\t\t\tthis.origin = origin;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\t\t}\n\t}, {\n\t\tkey: 'getName',\n\t\tvalue: function getName() {\n\t\t\treturn this.name;\n\t\t}\n\t}, {\n\t\tkey: 'getImage',\n\t\tvalue: function getImage() {\n\t\t\treturn this.image;\n\t\t}\n\t}, {\n\t\tkey: 'getOrigin',\n\t\tvalue: function getOrigin() {\n\t\t\treturn this.origin;\n\t\t}\n\t}, {\n\t\tkey: 'getSize',\n\t\tvalue: function getSize() {\n\t\t\treturn this.size;\n\t\t}\n\t}, {\n\t\tkey: 'onImageLoaded',\n\t\tvalue: function onImageLoaded(callback) {\n\t\t\tif (this.imageLoaded) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\tthis.image.addEventListener('load', callback);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn SpriteFrame;\n}();\n\nexports.default = SpriteFrame;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _Room = __webpack_require__(6);\n\nvar _Room2 = _interopRequireDefault(_Room);\n\nvar _Viewport = __webpack_require__(7);\n\nvar _Viewport2 = _interopRequireDefault(_Viewport);\n\nvar _Game = __webpack_require__(8);\n\nvar _Game2 = _interopRequireDefault(_Game);\n\nvar _Player = __webpack_require__(9);\n\nvar _Player2 = _interopRequireDefault(_Player);\n\nvar _NonPlayer = __webpack_require__(11);\n\nvar _NonPlayer2 = _interopRequireDefault(_NonPlayer);\n\nvar _Wall = __webpack_require__(12);\n\nvar _Wall2 = _interopRequireDefault(_Wall);\n\nvar _Tree = __webpack_require__(13);\n\nvar _Tree2 = _interopRequireDefault(_Tree);\n\nvar _Knight = __webpack_require__(14);\n\nvar _Slime = __webpack_require__(15);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n__webpack_require__(16);\n\nvar canvas = document.querySelector('.canvas__sorcerer');\n\nvar room = new _Room2.default({ width: 272, height: 208 });\nroom.setBackgroundColor('#000');\n\nvar viewport = new _Viewport2.default(canvas, { x: 0, y: 0 }, { width: 240, height: 176 });\nviewport.showRoom(room);\n\nvar game = new _Game2.default(room);\nvar player = new _Player2.default(_Knight.Knight, {\n\tposition: { x: 16, y: 16 }\n});\n\ngame.setPlayer(player);\nviewport.followEntity(player);\n\nfor (var x = 0; x < room.size.width / 16; x += 1) {\n\tfor (var y = 0; y < room.size.height / 16; y += 1) {\n\t\tvar position = { x: x * 16, y: y * 16 };\n\t\tif (!room.hasSolidEntityInBoundaries({\n\t\t\tx: position.x,\n\t\t\ty: position.y,\n\t\t\twidth: 16,\n\t\t\theight: 16\n\t\t})) {\n\t\t\tif (onChance(80)) {\n\t\t\t\tgame.addNonPlayer(new _NonPlayer2.default(_Slime.Slime, {\n\t\t\t\t\tposition: position\n\t\t\t\t}));\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (onChance(30)) {\n\t\t\t\tgame.addObject(new _Wall2.default({\n\t\t\t\t\tposition: position\n\t\t\t\t}));\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (onChance(70)) {\n\t\t\t\tgame.addObject(new _Tree2.default({\n\t\t\t\t\tposition: position\n\t\t\t\t}));\n\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction onChance(denominator) {\n\treturn Math.round(Math.random() * denominator) === 1;\n}\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Room = function () {\n\tfunction Room(size) {\n\t\t_classCallCheck(this, Room);\n\n\t\tthis.setSize(size);\n\n\t\tthis.entities = new Set();\n\t}\n\n\t_createClass(Room, [{\n\t\tkey: 'addEntity',\n\t\tvalue: function addEntity(entity) {\n\t\t\tthis.entities.add(entity);\n\t\t\tentity.room = this;\n\t\t}\n\t}, {\n\t\tkey: 'getEntities',\n\t\tvalue: function getEntities() {\n\t\t\treturn this.entities;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\t\t}\n\t}, {\n\t\tkey: 'getSize',\n\t\tvalue: function getSize() {\n\t\t\treturn this.size;\n\t\t}\n\t}, {\n\t\tkey: 'setBackgroundColor',\n\t\tvalue: function setBackgroundColor(backgroundColor) {\n\t\t\tthis.backgroundColor = backgroundColor;\n\t\t}\n\t}, {\n\t\tkey: 'getBackgroundColor',\n\t\tvalue: function getBackgroundColor() {\n\t\t\treturn this.backgroundColor;\n\t\t}\n\t}, {\n\t\tkey: 'drawBackground',\n\t\tvalue: function drawBackground(context, offset) {\n\t\t\tcontext.fillStyle = this.backgroundColor;\n\t\t\tcontext.fillRect(offset.x, offset.y, this.size.width, this.size.height);\n\n\t\t\tcontext.strokeStyle = '#bad455';\n\t\t\tcontext.strokeRect(offset.x, offset.y, this.size.width, this.size.height);\n\t\t}\n\t}, {\n\t\tkey: 'hasSolidEntityInBoundaries',\n\t\tvalue: function hasSolidEntityInBoundaries(boundaries) {\n\t\t\treturn this.findSolidEntitiesInBoundaries(boundaries).length > 0;\n\t\t}\n\t}, {\n\t\tkey: 'findSolidEntitiesInBoundaries',\n\t\tvalue: function findSolidEntitiesInBoundaries(boundaries) {\n\t\t\tvar exclude = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n\t\t\tvar entities = [];\n\n\t\t\tthis.entities.forEach(function (entity) {\n\t\t\t\tif (entity.solid && entity.isWithinBoundaries(boundaries) && !exclude.includes(entity)) {\n\t\t\t\t\tentities.push(entity);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn entities;\n\t\t}\n\t}]);\n\n\treturn Room;\n}();\n\nexports.default = Room;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Viewport = function () {\n\tfunction Viewport(canvas, position, size) {\n\t\t_classCallCheck(this, Viewport);\n\n\t\tthis.useCanvas(canvas);\n\t\tthis.position = position;\n\t\tthis.setSize(size);\n\n\t\tthis.startUpdating();\n\t}\n\n\t_createClass(Viewport, [{\n\t\tkey: 'showRoom',\n\t\tvalue: function showRoom(room) {\n\t\t\tthis.room = room;\n\t\t}\n\t}, {\n\t\tkey: 'useCanvas',\n\t\tvalue: function useCanvas(canvas) {\n\t\t\tthis.canvas = canvas;\n\t\t\tthis.context = canvas.getContext('2d');\n\n\t\t\tif (this.size) {\n\t\t\t\tchangeCanvasToSize(canvas, this.size);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'followEntity',\n\t\tvalue: function followEntity(entity) {\n\t\t\tthis.entityToFollow = entity;\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(size) {\n\t\t\tthis.size = size;\n\n\t\t\tif (this.canvas) {\n\t\t\t\tchangeCanvasToSize(this.canvas, size);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'startUpdating',\n\t\tvalue: function startUpdating() {\n\t\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update(time) {\n\t\t\t// update position to follow entity\n\t\t\tif (this.entityToFollow) {\n\t\t\t\tvar newViewportPosition = {\n\t\t\t\t\tx: this.entityToFollow.position.x - this.size.width / 2 + this.entityToFollow.size.width / 2,\n\t\t\t\t\ty: this.entityToFollow.position.y - this.size.height / 2 + this.entityToFollow.size.height / 2\n\t\t\t\t};\n\n\t\t\t\tif (newViewportPosition.x < 0) {\n\t\t\t\t\tnewViewportPosition.x = 0;\n\t\t\t\t}\n\n\t\t\t\tif (newViewportPosition.y < 0) {\n\t\t\t\t\tnewViewportPosition.y = 0;\n\t\t\t\t}\n\n\t\t\t\tif (newViewportPosition.x > this.room.size.width - this.size.width) {\n\t\t\t\t\tnewViewportPosition.x = this.room.size.width - this.size.width;\n\t\t\t\t}\n\n\t\t\t\tif (newViewportPosition.y > this.room.size.height - this.size.height) {\n\t\t\t\t\tnewViewportPosition.y = this.room.size.height - this.size.height;\n\t\t\t\t}\n\n\t\t\t\tthis.position = newViewportPosition;\n\t\t\t}\n\n\t\t\tthis.step(time);\n\t\t\tthis.draw(time);\n\n\t\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step(time) {\n\t\t\tthis.room.entities.forEach(function (entity) {\n\t\t\t\tentity.step(time);\n\n\t\t\t\tif (entity.sprite) {\n\t\t\t\t\tentity.sprite.step(time);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'draw',\n\t\tvalue: function draw(time) {\n\t\t\tvar _this = this;\n\n\t\t\t// remove viewport drawings\n\t\t\tthis.clearDrawing(this.context);\n\n\t\t\t// draw room\n\t\t\tthis.room.drawBackground(this.context, {\n\t\t\t\tx: -this.position.x,\n\t\t\t\ty: -this.position.y\n\t\t\t});\n\n\t\t\tthis.room.entities.forEach(function (entity) {\n\t\t\t\tif (entity.hasOwnProperty('sprite') && entity.hasOwnProperty('position') && entity.position.hasOwnProperty('x') && entity.position.hasOwnProperty('y')) {\n\t\t\t\t\tentity.sprite.draw(_this.context, calculatePositionInViewportFromPositionInRoom({\n\t\t\t\t\t\tx: entity.position.x + entity.origin.x,\n\t\t\t\t\t\ty: entity.position.y + entity.origin.y\n\t\t\t\t\t}, _this));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'drawMiddle',\n\t\tvalue: function drawMiddle(context) {\n\t\t\tcontext.strokeStyle = '#bad455';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(0, 0);\n\t\t\tcontext.lineTo(this.size.width, this.size.height);\n\t\t\tcontext.stroke();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(this.size.width, 0);\n\t\t\tcontext.lineTo(0, this.size.height);\n\t\t\tcontext.stroke();\n\t\t}\n\t}, {\n\t\tkey: 'clearDrawing',\n\t\tvalue: function clearDrawing(context) {\n\t\t\tcontext.clearRect(0, 0, this.size.width, this.size.height);\n\t\t}\n\t}]);\n\n\treturn Viewport;\n}();\n\nexports.default = Viewport;\n\n\nfunction changeCanvasToSize(canvas, size) {\n\tcanvas.width = size.width;\n\tcanvas.height = size.height;\n}\n\nfunction calculatePositionInViewportFromPositionInRoom(positionInRoom, viewport) {\n\treturn {\n\t\tx: positionInRoom.x - viewport.position.x,\n\t\ty: positionInRoom.y - viewport.position.y\n\t};\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PubSub = __webpack_require__(2);\n\nvar _PubSub2 = _interopRequireDefault(_PubSub);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Game = function () {\n\tfunction Game(room) {\n\t\t_classCallCheck(this, Game);\n\n\t\tthis.room = room;\n\n\t\tthis.player;\n\t\tthis.nonPlayers = new Set();\n\t\tthis.objects = new Set();\n\n\t\t_PubSub2.default.subscribe('playerTurnTaken', this.tick.bind(this));\n\t}\n\n\t_createClass(Game, [{\n\t\tkey: 'tick',\n\t\tvalue: function tick() {\n\t\t\tconsole.log('tick...');\n\t\t\tthis.performTurns();\n\t\t}\n\t}, {\n\t\tkey: 'setPlayer',\n\t\tvalue: function setPlayer(playerEntity) {\n\t\t\tthis.player = playerEntity;\n\n\t\t\tthis.room.addEntity(playerEntity);\n\t\t}\n\t}, {\n\t\tkey: 'addNonPlayer',\n\t\tvalue: function addNonPlayer(nonPlayerEntity) {\n\t\t\tthis.nonPlayers.add(nonPlayerEntity);\n\n\t\t\tthis.room.addEntity(nonPlayerEntity);\n\t\t}\n\t}, {\n\t\tkey: 'addObject',\n\t\tvalue: function addObject(objectEntity) {\n\t\t\tthis.objects.add(objectEntity);\n\n\t\t\tthis.room.addEntity(objectEntity);\n\t\t}\n\t}, {\n\t\tkey: 'performTurns',\n\t\tvalue: function performTurns() {\n\t\t\tthis.nonPlayers.forEach(function (nonPlayer) {\n\t\t\t\tnonPlayer.takeTurn();\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Game;\n}();\n\nexports.default = Game;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Actor2 = __webpack_require__(3);\n\nvar _Actor3 = _interopRequireDefault(_Actor2);\n\nvar _PubSub = __webpack_require__(2);\n\nvar _PubSub2 = _interopRequireDefault(_PubSub);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Player = function (_Actor) {\n\t_inherits(Player, _Actor);\n\n\tfunction Player(type, options) {\n\t\t_classCallCheck(this, Player);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Player.__proto__ || Object.getPrototypeOf(Player)).call(this, type, options));\n\n\t\twindow.addEventListener('keydown', _this.onKeyDown.bind(_this));\n\t\treturn _this;\n\t}\n\n\t_createClass(Player, [{\n\t\tkey: 'onKeyDown',\n\t\tvalue: function onKeyDown(event) {\n\t\t\tif (!this.dead) {\n\t\t\t\tvar actionTaken = false;\n\n\t\t\t\tif (event.key === 'ArrowUp') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveUp();\n\t\t\t\t}\n\n\t\t\t\tif (event.key === 'ArrowRight') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveRight();\n\t\t\t\t}\n\n\t\t\t\tif (event.key === 'ArrowDown') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveDown();\n\t\t\t\t}\n\n\t\t\t\tif (event.key === 'ArrowLeft') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactionTaken = this.moveLeft();\n\t\t\t\t}\n\n\t\t\t\tif (actionTaken) {\n\t\t\t\t\t_PubSub2.default.publish('playerTurnTaken');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Player;\n}(_Actor3.default);\n\nexports.default = Player;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _SpriteFrame = __webpack_require__(4);\n\nvar _SpriteFrame2 = _interopRequireDefault(_SpriteFrame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Sprite = function () {\n\tfunction Sprite(frames) {\n\t\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\t_classCallCheck(this, Sprite);\n\n\t\tthis.setFrames(frames);\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.size = options.size;\n\t\t} else {\n\t\t\tthis.size = calculateMaximumSizeFromFrames(this.getFrames());\n\t\t}\n\n\t\tif (options.hasOwnProperty('origin')) {\n\t\t\tthis.origin = options.origin;\n\t\t}\n\n\t\tif (options.hasOwnProperty('frameIndex')) {\n\t\t\tthis.setCurrentFrameIndex(options.frameIndex);\n\t\t} else {\n\t\t\tthis.setCurrentFrameIndex(0);\n\t\t}\n\n\t\tif (options.hasOwnProperty('framesPerSecond')) {\n\t\t\tthis.setFramesPerSecond(options.framesPerSecond);\n\t\t} else {\n\t\t\tthis.setFramesPerSecond(1);\n\t\t}\n\n\t\tif (options.hasOwnProperty('looping')) {\n\t\t\tthis.looping = options.looping;\n\t\t} else {\n\t\t\tthis.looping = true;\n\t\t}\n\n\t\tthis.timeOfPreviousFrame = 0;\n\t}\n\n\t_createClass(Sprite, [{\n\t\tkey: 'setFrames',\n\t\tvalue: function setFrames() {\n\t\t\tvar frames = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\tif (Array.isArray(frames)) {\n\t\t\t\tthis.frames = frames;\n\t\t\t} else if (frames instanceof _SpriteFrame2.default) {\n\t\t\t\tthis.frames = [frames];\n\t\t\t} else {\n\t\t\t\tthis.frames = [];\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'getFrames',\n\t\tvalue: function getFrames() {\n\t\t\treturn this.frames;\n\t\t}\n\t}, {\n\t\tkey: 'setFramesPerSecond',\n\t\tvalue: function setFramesPerSecond(framesPerSecond) {\n\t\t\tthis.framesPerSecond = framesPerSecond;\n\t\t}\n\t}, {\n\t\tkey: 'getFramesPerSecond',\n\t\tvalue: function getFramesPerSecond() {\n\t\t\treturn this.framesPerSecond;\n\t\t}\n\t}, {\n\t\tkey: 'setCurrentFrameIndex',\n\t\tvalue: function setCurrentFrameIndex(newCurrentFrameIndex) {\n\t\t\tif (this.frames[newCurrentFrameIndex]) {\n\t\t\t\tthis.currentFrameIndex = newCurrentFrameIndex;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'getCurrentFrame',\n\t\tvalue: function getCurrentFrame() {\n\t\t\treturn this.frames[this.currentFrameIndex];\n\t\t}\n\t}, {\n\t\tkey: 'draw',\n\t\tvalue: function draw(context, position) {\n\t\t\tvar currentFrame = this.getCurrentFrame();\n\n\t\t\tif (currentFrame) {\n\t\t\t\tcontext.drawImage(currentFrame.getImage(), currentFrame.getOrigin().x, currentFrame.getOrigin().y, currentFrame.getSize().width, currentFrame.getSize().height, position.x, position.y, this.size.width, this.size.height);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step(time) {\n\t\t\tvar framesPerSecond = this.getFramesPerSecond();\n\n\t\t\tif (framesPerSecond !== 0 && !(!this.looping && this.currentFrameIndex === this.frames.length - 1)) {\n\t\t\t\tvar timeSincePreviousFrame = time - this.timeOfPreviousFrame;\n\n\t\t\t\tvar frameChange = timeSincePreviousFrame / (1000 / framesPerSecond);\n\n\t\t\t\tif (frameChange > 0) {\n\t\t\t\t\tframeChange = Math.floor(frameChange);\n\t\t\t\t}\n\n\t\t\t\tif (frameChange < 0) {\n\t\t\t\t\tframeChange = Math.ceil(frameChange);\n\t\t\t\t}\n\n\t\t\t\tif (frameChange !== 0) {\n\t\t\t\t\tthis.timeOfPreviousFrame = time;\n\t\t\t\t\tthis.setCurrentFrameIndex(calculateNewFrameIndexWithChange(this.currentFrameIndex, frameChange, this.frames.length, this.looping));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'nextFrame',\n\t\tvalue: function nextFrame() {\n\t\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, 1, this.frames.length, this.looping);\n\t\t}\n\t}, {\n\t\tkey: 'previousFrame',\n\t\tvalue: function previousFrame() {\n\t\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, -1, this.frames.length, this.looping);\n\t\t}\n\t}]);\n\n\treturn Sprite;\n}();\n\nexports.default = Sprite;\n\n\nfunction calculateNewFrameIndexWithChange(currentFrameIndex, change, amountOfFrames) {\n\tvar looping = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n\tchange = Math.round(change);\n\n\tif (change === 0) {\n\t\treturn currentFrameIndex;\n\t}\n\n\tif (looping) {\n\t\tvar newFrameIndex = (currentFrameIndex + change) % amountOfFrames;\n\n\t\tif (newFrameIndex < 0) {\n\t\t\treturn newFrameIndex + amountOfFrames;\n\t\t}\n\n\t\treturn newFrameIndex;\n\t}\n\n\tif (!looping) {\n\t\tvar _newFrameIndex = currentFrameIndex + change;\n\n\t\tif (_newFrameIndex > amountOfFrames - 1) {\n\t\t\treturn amountOfFrames - 1;\n\t\t}\n\n\t\tif (_newFrameIndex < 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn _newFrameIndex;\n\t}\n}\n\nfunction calculateMaximumSizeFromFrames(frames) {\n\tvar biggestWidth = 0;\n\tvar biggestHeight = 0;\n\n\tframes.forEach(function (frame) {\n\t\tif (frame.size.width > biggestWidth) {\n\t\t\tbiggestWidth = frame.size.width;\n\t\t}\n\n\t\tif (frame.size.height > biggestHeight) {\n\t\t\tbiggestHeight = frame.size.height;\n\t\t}\n\t});\n\n\treturn {\n\t\twidth: biggestWidth,\n\t\theight: biggestHeight\n\t};\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Actor2 = __webpack_require__(3);\n\nvar _Actor3 = _interopRequireDefault(_Actor2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar NonPlayer = function (_Actor) {\n\t_inherits(NonPlayer, _Actor);\n\n\tfunction NonPlayer(type, options) {\n\t\t_classCallCheck(this, NonPlayer);\n\n\t\treturn _possibleConstructorReturn(this, (NonPlayer.__proto__ || Object.getPrototypeOf(NonPlayer)).call(this, type, options));\n\t}\n\n\t_createClass(NonPlayer, [{\n\t\tkey: 'takeTurn',\n\t\tvalue: function takeTurn() {\n\t\t\tif (!this.dead) {\n\t\t\t\tvar decision = Math.round(Math.random() * 8);\n\n\t\t\t\tif (decision === 0) {\n\t\t\t\t\tthis.moveUp();\n\t\t\t\t}\n\n\t\t\t\tif (decision === 1) {\n\t\t\t\t\tthis.moveRight();\n\t\t\t\t}\n\n\t\t\t\tif (decision === 2) {\n\t\t\t\t\tthis.moveDown();\n\t\t\t\t}\n\n\t\t\t\tif (decision === 3) {\n\t\t\t\t\tthis.moveLeft();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn NonPlayer;\n}(_Actor3.default);\n\nexports.default = NonPlayer;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Entity2 = __webpack_require__(1);\n\nvar _Entity3 = _interopRequireDefault(_Entity2);\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Wall = function (_Entity) {\n\t_inherits(Wall, _Entity);\n\n\tfunction Wall(options) {\n\t\t_classCallCheck(this, Wall);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Wall.__proto__ || Object.getPrototypeOf(Wall)).call(this, options));\n\n\t\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/wall-sheet.png\", \"frames\": [ { \"name\": \"wall_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\t\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\t\tvar wallSprite = spriteAtlas.createSpriteWithFrames(['wall_0']);\n\n\t\t_this.setSprite(wallSprite);\n\t\t_this.setSize({ width: 16, height: 16 });\n\n\t\t_this.setSolidity(true);\n\t\t_this.type = 'wall';\n\t\treturn _this;\n\t}\n\n\t_createClass(Wall, [{\n\t\tkey: 'canBeAttacked',\n\t\tvalue: function canBeAttacked() {\n\t\t\treturn false;\n\t\t}\n\t}]);\n\n\treturn Wall;\n}(_Entity3.default);\n\nexports.default = Wall;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Entity2 = __webpack_require__(1);\n\nvar _Entity3 = _interopRequireDefault(_Entity2);\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Tree = function (_Entity) {\n\t_inherits(Tree, _Entity);\n\n\tfunction Tree(options) {\n\t\t_classCallCheck(this, Tree);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Tree.__proto__ || Object.getPrototypeOf(Tree)).call(this, options));\n\n\t\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/deadtree-sheet.png\", \"frames\": [ { \"name\": \"deadtree\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 32 } } ] }';\n\t\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\t\tvar wallSprite = spriteAtlas.createSpriteWithFrames(['deadtree']);\n\n\t\t_this.setSprite(wallSprite);\n\t\t_this.setSize({ width: 16, height: 16 });\n\t\t_this.setOrigin({ x: 0, y: -16 });\n\n\t\t_this.setSolidity(true);\n\t\t_this.type = 'wall';\n\t\treturn _this;\n\t}\n\n\t_createClass(Tree, [{\n\t\tkey: 'canBeAttacked',\n\t\tvalue: function canBeAttacked() {\n\t\t\treturn false;\n\t\t}\n\t}]);\n\n\treturn Tree;\n}(_Entity3.default);\n\nexports.default = Tree;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Knight = undefined;\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Knight = exports.Knight = {\n\ttype: 'knight',\n\tstats: {\n\t\tmaxHealth: 10,\n\t\tstrength: 3\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 16,\n\t\theight: 16\n\t},\n\tsolid: true\n};\n\nfunction getSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/character-sheet-green.png\", \"frames\": [ { \"name\": \"player_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_2\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_3\", \"origin\": { \"x\": 48, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, {\"name\": \"player_idle_4\", \"origin\": { \"x\": 64, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_5\", \"origin\": { \"x\": 80, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar knightSprite = spriteAtlas.createSpriteWithFrames(['player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_0', 'player_idle_1', 'player_idle_2', 'player_idle_3', 'player_idle_3', 'player_idle_3', 'player_idle_3', 'player_idle_4', 'player_idle_5']);\n\n\tknightSprite.looping = true;\n\tknightSprite.setFramesPerSecond(10);\n\n\treturn knightSprite;\n}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Slime = undefined;\n\nvar _SpriteAtlas = __webpack_require__(0);\n\nvar _SpriteAtlas2 = _interopRequireDefault(_SpriteAtlas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Slime = exports.Slime = {\n\ttype: 'slime',\n\tstats: {\n\t\tmaxHealth: 16,\n\t\tstrength: 1\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 16,\n\t\theight: 16\n\t},\n\tsolid: true\n};\n\nfunction getSprite() {\n\tvar spriteAtlasDefinition = '{ \"file\": \"assets/images/slime-sheet.png\", \"frames\": [ { \"name\": \"slime_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"slime_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tvar spriteAtlas = new _SpriteAtlas2.default(JSON.parse(spriteAtlasDefinition));\n\tvar slimeSprite = spriteAtlas.createSpriteWithFrames(['slime_idle_0', 'slime_idle_1']);\n\n\tslimeSprite.setFramesPerSecond(2);\n\n\treturn slimeSprite;\n}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// sorcerer.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 95d578c7ec69ee865173","import Sprite from './Sprite';\nimport SpriteFrame from './SpriteFrame';\n\nexport default class SpriteAtlas {\n\tconstructor(definition) {\n\t\tthis.frames = createFramesFromDefinition(definition);\n\t}\n\n\tgetFrame(frameName) {\n\t\treturn this.frames.find((frame) => {\n\t\t\treturn frame.getName() === frameName;\n\t\t});\n\t}\n\n\tcreateSpriteWithFrames(frameNames) {\n\t\tlet frames = frameNames.map((frameName) => {\n\t\t\treturn this.getFrame(frameName);\n\t\t})\n\n\t\treturn new Sprite(frames);\n\t}\n}\n\nfunction createFramesFromDefinition(definition) {\n\tlet frames = [];\n\n\tif (definition.hasOwnProperty('file')) {\n\t\tlet image = new Image();\n\t\timage.src = definition.file;\n\n\t\tdefinition.frames.forEach((frameData) => {\n\t\t\tlet frame = new SpriteFrame(\n\t\t\t\tframeData.name,\n\t\t\t\timage,\n\t\t\t\tframeData.origin,\n\t\t\t\tframeData.size,\n\t\t\t);\n\n\t\t\tframes.push(frame);\n\t\t});\n\t}\n\n\treturn frames;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/SpriteAtlas.js","export default class Entity {\n\tconstructor(options = {}) {\n\t\tif (options.hasOwnProperty('sprite')) {\n\t\t\tthis.setSprite(options.sprite);\n\t\t}\n\n\t\tif (options.hasOwnProperty('position')) {\n\t\t\tthis.setPosition(options.position);\n\t\t}\n\n\t\tif (options.hasOwnProperty('solid')) {\n\t\t\tthis.setSolidity(options.solid);\n\t\t}\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.setSize(options.size);\n\t\t}\n\n\t\tif (options.hasOwnProperty('origin')) {\n\t\t\tthis.setOrigin(options.origin);\n\t\t} else {\n\t\t\tthis.setOrigin({x: 0, y: 0});\n\t\t}\n\t}\n\n\tstep(time) {\n\n\t}\n\n\tsetSprite(sprite) {\n\t\tthis.sprite = sprite;\n\t}\n\n\tsetPosition(position) {\n\t\tthis.position = position;\n\t}\n\n\tgetPosition() {\n\t\treturn this.position;\n\t}\n\n\tsetSolidity(solid) {\n\t\tthis.solid = solid;\n\t}\n\n\tisSolid() {\n\t\treturn this.solid;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\t}\n\n\tgetSize() {\n\t\treturn this.size;\n\t}\n\n\tsetOrigin(origin) {\n\t\tthis.origin = origin;\n\t}\n\n\tgetOrigin() {\n\t\treturn this.origin;\n\t}\n\n\tchangePosition(change) {\n\t\tlet currentPosition = this.getPosition();\n\n\t\tthis.setPosition({\n\t\t\tx: currentPosition.x + change.x,\n\t\t\ty: currentPosition.y + change.y,\n\t\t});\n\t}\n\n\tisWithinBoundaries(boundaries) {\n\t\treturn (\n\t\t\tthis.position.y < boundaries.y + boundaries.height\n\t\t\t&& this.position.x + this.size.width > boundaries.x\n\t\t\t&& this.position.y + this.size.height > boundaries.y\n\t\t\t&& this.position.x < boundaries.x + boundaries.width\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Entity.js","const topics = new Map();\n\nexport default class PubSub {\n\tstatic subscribe(topic, callback) {\n\t\tif (!topics.has(topic)) {\n\t\t\ttopics.set(topic, []);\n\t\t}\n\n\t\tlet topicCallbacks = topics.get(topic);\n\t\ttopicCallbacks.push(callback);\n\t}\n\n\tstatic publish(topic, data) {\n\t\tif (topics.has(topic)) {\n\t\t\ttopics.get(topic).forEach((callback) => {\n\t\t\t\tcallback(data);\n\t\t\t});\n\t\t}\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/PubSub.js","import Entity from './../core/Entity';\nimport SpriteAtlas from './../core/SpriteAtlas';\n\nconst STATS_DEFAULT = {\n\tstrength: 1,\n\tmaxHealth: 1,\n}\n\nexport default class Actor extends Entity {\n\tconstructor (creatureDefinition, options) {\n\t\tsuper(options);\n\t\tthis.applyCreatureDefinition(creatureDefinition);\n\n\t\tthis.health = this.stats.maxHealth;\n\t}\n\n\tapplyCreatureDefinition(creatureDefinition) {\n\t\tthis.type = creatureDefinition.type;\n\t\tthis.applyStats(creatureDefinition.stats);\n\t\tthis.setSprite(creatureDefinition.sprite);\n\t\tthis.setSize(creatureDefinition.size);\n\t\tthis.setSolidity(creatureDefinition.solid);\n\t}\n\n\tapplyStats(stats) {\n\t\tthis.stats = Object.assign({}, STATS_DEFAULT, stats);\n\t}\n\n\tbumpInto(target) {\n\t\tif (target.canBeAttacked()) {\n\t\t\tconsole.log(`${this.type} attacks ${target.type}`);\n\n\t\t\tthis.attackTarget(target);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tattackTarget(target) {\n\t\ttarget.applyDamage(this.calculateAttackDamage());\n\t}\n\n\tcalculateAttackDamage() {\n\t\treturn this.stats.strength;\n\t}\n\n\tapplyDamage(damage) {\n\t\tconsole.log(`${this.type} takes ${damage} damage`);\n\n\t\tthis.reduceHealth(damage);\n\t}\n\n\trestoreHealth(amount) {\n\t\tthis.changeHealth(this.health + amount);\n\t}\n\n\treduceHealth(amount) {\n\t\tthis.changeHealth(this.health - amount);\n\t}\n\n\tchangeHealth(health) {\n\t\tif (health > this.stats.maxHealth) {\n\t\t\tthis.health = this.stats.maxHealth;\n\n\t\t\tconsole.log(`${this.type} health is now at maximum at ${this.health}`);\n\t\t} else if (health <= 0) {\n\t\t\tthis.health = 0;\n\t\t\tthis.die();\n\n\t\t\tconsole.log(`${this.type} health is now ${this.health}`);\n\t\t\tconsole.log(`${this.type} is dead`)\n\t\t} else {\n\t\t\tthis.health = health;\n\n\t\t\tconsole.log(`${this.type} health is now ${this.health}`);\n\t\t}\n\t}\n\n\tmoveTo(position) {\n\t\tif (this.isInBoundsOfRoomAtPosition(this.room, position)) {\n\t\t\tlet entitiesAtPosition = this.room.findSolidEntitiesInBoundaries({\n\t\t\t\tx: position.x,\n\t\t\t\ty: position.y,\n\t\t\t\twidth: this.sprite.size.width,\n\t\t\t\theight: this.sprite.size.height,\n\t\t\t}, [this]);\n\n\t\t\tif (entitiesAtPosition.length === 0) {\n\t\t\t\tthis.setPosition(position);\n\t\t\t\treturn true;\n\t\t\t} else if (entitiesAtPosition.length > 0) {\n\t\t\t\tlet actionTaken = false;\n\n\t\t\t\tentitiesAtPosition.forEach((entity) => {\n\t\t\t\t\tlet bumpIntoResult = this.bumpInto(entity);\n\n\t\t\t\t\tif (bumpIntoResult) {\n\t\t\t\t\t\tactionTaken = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn actionTaken;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tmoveUp() {\n\t\treturn this.moveTo({\n\t\t\tx: this.position.x,\n\t\t\ty: this.position.y - 16\n\t\t});\n\t}\n\n\tmoveRight() {\n\t\treturn this.moveTo({\n\t\t\tx: this.position.x + 16,\n\t\t\ty: this.position.y\n\t\t});\n\t}\n\n\tmoveDown() {\n\t\treturn this.moveTo({\n\t\t\tx: this.position.x,\n\t\t\ty: this.position.y + 16\n\t\t});\n\t}\n\n\tmoveLeft() {\n\t\treturn this.moveTo({\n\t\t\tx: this.position.x - 16,\n\t\t\ty: this.position.y\n\t\t});\n\t}\n\n\tcanBeAttacked() {\n\t\treturn !this.dead;\n\t}\n\n\tdie() {\n\t\tthis.dead = true;\n\t\tthis.sprite = getDeadSprite();\n\t}\n\n\tisInBoundsOfRoomAtPosition(room, position) {\n\t\treturn position.x >= 0\n\t\t\t&& position.y >= 0\n\t\t\t&& position.x + this.size.width <= room.size.width\n\t\t\t&& position.y + this.size.height <= room.size.height;\n\t}\n}\n\nfunction getDeadSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/grave-sheet.png\", \"frames\": [ { \"name\": \"grave_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet graveSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'grave_0',\n\t]);\n\n\treturn graveSprite;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Actor.js","export default class SpriteFrame {\n\tconstructor(name, image, position, size) {\n\t\tthis.setName(name);\n\t\tthis.setImage(image);\n\t\tthis.setOrigin(position);\n\t\tthis.setSize(size);\n\t}\n\n\tsetName(name) {\n\t\tthis.name = name;\n\t}\n\n\tsetImage(image) {\n\t\tthis.imageLoaded = false;\n\t\tthis.image = image;\n\n\t\tthis.image.addEventListener('load', () => {\n\t\t\tthis.imageLoaded = true;\n\t\t});\n\t}\n\n\tsetOrigin(origin) {\n\t\tthis.origin = origin;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\tgetImage() {\n\t\treturn this.image;\n\t}\n\n\tgetOrigin() {\n\t\treturn this.origin;\n\t}\n\n\tgetSize() {\n\t\treturn this.size;\n\t}\n\n\tonImageLoaded(callback) {\n\t\tif (this.imageLoaded) {\n\t\t\tcallback();\n\t\t} else {\n\t\t\tthis.image.addEventListener('load', callback);\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/SpriteFrame.js","require('../style/main.scss');\n\nimport Room from './core/Room';\nimport Viewport from './core/Viewport';\n\nimport Game from './entities/Game';\nimport Player from './entities/Player';\nimport NonPlayer from './entities/NonPlayer';\nimport Wall from './entities/Wall';\nimport Tree from './entities/Tree';\n\nimport {Knight} from './creatureTypes/Knight';\nimport {Slime} from './creatureTypes/Slime';\n\nconst canvas = document.querySelector('.canvas__sorcerer');\n\nconst room = new Room({width: 272, height: 208});\nroom.setBackgroundColor('#000');\n\nconst viewport = new Viewport(canvas, {x: 0, y: 0}, {width: 240, height: 176});\nviewport.showRoom(room);\n\nconst game = new Game(room);\nconst player = new Player(Knight, {\n\tposition: {x: 16, y: 16}\n});\n\ngame.setPlayer(player);\nviewport.followEntity(player);\n\nfor(let x = 0; x < room.size.width/16; x += 1) {\n\tfor(let y = 0; y < room.size.height/16; y += 1) {\n\t\tlet position = {x: x * 16, y: y * 16};\n\t\tif (!room.hasSolidEntityInBoundaries({\n\t\t\tx: position.x,\n\t\t\ty: position.y,\n\t\t\twidth: 16,\n\t\t\theight: 16,\n\t\t})) {\n\t\t\tif (onChance(80)) {\n\t\t\t\tgame.addNonPlayer(new NonPlayer(Slime, {\n\t\t\t\t\tposition: position,\n\t\t\t\t}));\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (onChance(30)) {\n\t\t\t\tgame.addObject(new Wall({\n\t\t\t\t\tposition: position,\n\t\t\t\t}));\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (onChance(70)) {\n\t\t\t\tgame.addObject(new Tree({\n\t\t\t\t\tposition: position,\n\t\t\t\t}));\n\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction onChance(denominator) {\n\treturn Math.round(Math.random() * denominator) === 1;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/main.js","export default class Room {\n\tconstructor(size) {\n\t\tthis.setSize(size);\n\n\t\tthis.entities = new Set();\n\t}\n\n\taddEntity(entity) {\n\t\tthis.entities.add(entity);\n\t\tentity.room = this;\n\t}\n\n\tgetEntities() {\n\t\treturn this.entities;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\t}\n\n\tgetSize() {\n\t\treturn this.size;\n\t}\n\n\tsetBackgroundColor(backgroundColor) {\n\t\tthis.backgroundColor = backgroundColor;\n\t}\n\n\tgetBackgroundColor() {\n\t\treturn this.backgroundColor;\n\t}\n\n\tdrawBackground(context, offset) {\n\t\tcontext.fillStyle = this.backgroundColor;\n\t\tcontext.fillRect(\n\t\t\toffset.x,\n\t\t\toffset.y,\n\t\t\tthis.size.width,\n\t\t\tthis.size.height,\n\t\t);\n\n\t\tcontext.strokeStyle = '#bad455';\n\t\tcontext.strokeRect(\n\t\t\toffset.x,\n\t\t\toffset.y,\n\t\t\tthis.size.width,\n\t\t\tthis.size.height,\n\t\t);\n\t}\n\n\thasSolidEntityInBoundaries(boundaries) {\n\t\treturn this.findSolidEntitiesInBoundaries(boundaries).length > 0;\n\t}\n\n\tfindSolidEntitiesInBoundaries(boundaries, exclude = []) {\n\t\tlet entities = [];\n\n\t\tthis.entities.forEach((entity) => {\n\t\t\tif (entity.solid && entity.isWithinBoundaries(boundaries) && !exclude.includes(entity)) {\n\t\t\t\tentities.push(entity);\n\t\t\t}\n\t\t});\n\n\t\treturn entities;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Room.js","export default class Viewport {\n\tconstructor(canvas, position, size) {\n\t\tthis.useCanvas(canvas);\n\t\tthis.position = position;\n\t\tthis.setSize(size);\n\n\t\tthis.startUpdating();\n\t}\n\n\tshowRoom(room) {\n\t\tthis.room = room;\n\t}\n\n\tuseCanvas(canvas) {\n\t\tthis.canvas = canvas;\n\t\tthis.context = canvas.getContext('2d');\n\n\t\tif (this.size) {\n\t\t\tchangeCanvasToSize(canvas, this.size);\n\t\t}\n\t}\n\n\tfollowEntity(entity) {\n\t\tthis.entityToFollow = entity;\n\t}\n\n\tsetSize(size) {\n\t\tthis.size = size;\n\n\t\tif (this.canvas) {\n\t\t\tchangeCanvasToSize(this.canvas, size);\n\t\t}\n\t}\n\n\tstartUpdating() {\n\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t}\n\n\tupdate(time) {\n\t\t// update position to follow entity\n\t\tif (this.entityToFollow) {\n\t\t\tlet newViewportPosition = {\n\t\t\t\tx: this.entityToFollow.position.x - (this.size.width / 2) + (this.entityToFollow.size.width / 2),\n\t\t\t\ty: this.entityToFollow.position.y - (this.size.height / 2) + (this.entityToFollow.size.height / 2),\n\t\t\t};\n\n\t\t\tif (newViewportPosition.x < 0) {\n\t\t\t\tnewViewportPosition.x = 0;\n\t\t\t}\n\n\t\t\tif (newViewportPosition.y < 0) {\n\t\t\t\tnewViewportPosition.y = 0;\n\t\t\t}\n\n\t\t\tif (newViewportPosition.x > (this.room.size.width - this.size.width)) {\n\t\t\t\tnewViewportPosition.x = this.room.size.width - this.size.width;\n\t\t\t}\n\n\t\t\tif (newViewportPosition.y > (this.room.size.height - this.size.height)) {\n\t\t\t\tnewViewportPosition.y = this.room.size.height - this.size.height;\n\t\t\t}\n\n\t\t\tthis.position = newViewportPosition;\n\t\t}\n\n\t\tthis.step(time);\n\t\tthis.draw(time);\n\n\t\twindow.requestAnimationFrame(this.update.bind(this));\n\t}\n\n\tstep(time) {\n\t\tthis.room.entities.forEach((entity) => {\n\t\t\tentity.step(time);\n\n\t\t\tif (entity.sprite) {\n\t\t\t\tentity.sprite.step(time);\n\t\t\t}\n\t\t});\n\t}\n\n\tdraw(time) {\n\t\t// remove viewport drawings\n\t\tthis.clearDrawing(this.context);\n\n\t\t// draw room\n\t\tthis.room.drawBackground(this.context, {\n\t\t\tx: -this.position.x,\n\t\t\ty: -this.position.y,\n\t\t});\n\n\t\tthis.room.entities.forEach((entity) => {\n\t\t\tif (\n\t\t\t\tentity.hasOwnProperty('sprite')\n\t\t\t\t&& entity.hasOwnProperty('position')\n\t\t\t\t&& entity.position.hasOwnProperty('x')\n\t\t\t\t&& entity.position.hasOwnProperty('y')\n\t\t\t) {\n\t\t\t\tentity.sprite.draw(this.context, calculatePositionInViewportFromPositionInRoom({\n\t\t\t\t\tx: entity.position.x + entity.origin.x,\n\t\t\t\t\ty: entity.position.y + entity.origin.y\n\t\t\t\t}, this));\n\t\t\t}\n\t\t});\n\t}\n\n\tdrawMiddle(context) {\n\t\tcontext.strokeStyle = '#bad455';\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(0, 0);\n\t\tcontext.lineTo(this.size.width, this.size.height);\n\t\tcontext.stroke();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(this.size.width, 0);\n\t\tcontext.lineTo(0, this.size.height);\n\t\tcontext.stroke();\n\t}\n\n\tclearDrawing(context) {\n\t\tcontext.clearRect(\n\t\t\t0,\n\t\t\t0,\n\t\t\tthis.size.width,\n\t\t\tthis.size.height\n\t\t);\n\t}\n}\n\nfunction changeCanvasToSize(canvas, size) {\n\tcanvas.width = size.width;\n\tcanvas.height = size.height;\n}\n\nfunction calculatePositionInViewportFromPositionInRoom(positionInRoom, viewport) {\n\treturn {\n\t\tx: positionInRoom.x - viewport.position.x,\n\t\ty: positionInRoom.y - viewport.position.y\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Viewport.js","import PubSub from './../core/PubSub';\n\nexport default class Game {\n\tconstructor(room) {\n\t\tthis.room = room;\n\n\t\tthis.player;\n\t\tthis.nonPlayers = new Set();\n\t\tthis.objects = new Set();\n\n\t\tPubSub.subscribe('playerTurnTaken', this.tick.bind(this));\n\t}\n\n\ttick() {\n\t\tconsole.log('tick...');\n\t\tthis.performTurns();\n\t}\n\n\tsetPlayer(playerEntity) {\n\t\tthis.player = playerEntity;\n\n\t\tthis.room.addEntity(playerEntity);\n\t}\n\n\taddNonPlayer(nonPlayerEntity) {\n\t\tthis.nonPlayers.add(nonPlayerEntity);\n\n\t\tthis.room.addEntity(nonPlayerEntity);\n\t}\n\n\taddObject(objectEntity) {\n\t\tthis.objects.add(objectEntity);\n\n\t\tthis.room.addEntity(objectEntity);\n\t}\n\n\tperformTurns() {\n\t\tthis.nonPlayers.forEach((nonPlayer) => {\n\t\t\tnonPlayer.takeTurn();\n\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Game.js","import Actor from './Actor';\nimport PubSub from './../core/PubSub';\n\nexport default class Player extends Actor {\n\tconstructor(type, options) {\n\t\tsuper(type, options);\n\n\t\twindow.addEventListener('keydown', this.onKeyDown.bind(this));\n\t}\n\n\tonKeyDown(event) {\n\t\tif (!this.dead) {\n\t\t\tlet actionTaken = false;\n\n\t\t\tif (event.key === 'ArrowUp') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveUp();\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowRight') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveRight();\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowDown') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveDown();\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowLeft') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tactionTaken = this.moveLeft();\n\t\t\t}\n\n\t\t\tif (actionTaken) {\n\t\t\t\tPubSub.publish('playerTurnTaken');\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Player.js","import SpriteFrame from './../core/SpriteFrame';\n\nexport default class Sprite {\n\tconstructor(frames, options = {}) {\n\t\tthis.setFrames(frames);\n\n\t\tif (options.hasOwnProperty('size')) {\n\t\t\tthis.size = options.size;\n\t\t} else {\n\t\t\tthis.size = calculateMaximumSizeFromFrames(this.getFrames());\n\t\t}\n\n\t\tif (options.hasOwnProperty('origin')) {\n\t\t\tthis.origin = options.origin;\n\t\t}\n\n\t\tif (options.hasOwnProperty('frameIndex')) {\n\t\t\tthis.setCurrentFrameIndex(options.frameIndex);\n\t\t} else {\n\t\t\tthis.setCurrentFrameIndex(0);\n\t\t}\n\n\t\tif (options.hasOwnProperty('framesPerSecond')) {\n\t\t\tthis.setFramesPerSecond(options.framesPerSecond);\n\t\t} else {\n\t\t\tthis.setFramesPerSecond(1);\n\t\t}\n\n\t\tif (options.hasOwnProperty('looping') ) {\n\t\t\tthis.looping = options.looping;\n\t\t} else {\n\t\t\tthis.looping = true;\n\t\t}\n\n\t\tthis.timeOfPreviousFrame = 0;\n\t}\n\n\tsetFrames(frames = []) {\n\t\tif (Array.isArray(frames)) {\n\t\t\tthis.frames = frames;\n\t\t} else if (frames instanceof SpriteFrame) {\n\t\t\tthis.frames = [frames];\n\t\t} else {\n\t\t\tthis.frames = [];\n\t\t}\n\t}\n\n\tgetFrames() {\n\t\treturn this.frames;\n\t}\n\n\tsetFramesPerSecond(framesPerSecond) {\n\t\tthis.framesPerSecond = framesPerSecond;\n\t}\n\n\tgetFramesPerSecond() {\n\t\treturn this.framesPerSecond;\n\t}\n\n\tsetCurrentFrameIndex(newCurrentFrameIndex) {\n\t\tif (this.frames[newCurrentFrameIndex]) {\n\t\t\tthis.currentFrameIndex = newCurrentFrameIndex;\n\t\t}\n\t}\n\n\tgetCurrentFrame() {\n\t\treturn this.frames[this.currentFrameIndex];\n\t}\n\n\tdraw(context, position) {\n\t\tlet currentFrame = this.getCurrentFrame();\n\n\t\tif (currentFrame) {\n\t\t\tcontext.drawImage(\n\t\t\t\tcurrentFrame.getImage(),\n\t\t\t\tcurrentFrame.getOrigin().x, currentFrame.getOrigin().y,\n\t\t\t\tcurrentFrame.getSize().width, currentFrame.getSize().height,\n\t\t\t\tposition.x, position.y,\n\t\t\t\tthis.size.width, this.size.height,\n\t\t\t);\n\t\t}\n\t}\n\n\tstep(time) {\n\t\tlet framesPerSecond = this.getFramesPerSecond();\n\n\t\tif (framesPerSecond !== 0 && !(!this.looping && this.currentFrameIndex === (this.frames.length - 1))) {\n\t\t\tlet timeSincePreviousFrame = time - this.timeOfPreviousFrame;\n\n\t\t\tlet frameChange = timeSincePreviousFrame / (1000 / framesPerSecond);\n\n\t\t\tif (frameChange > 0) {\n\t\t\t\tframeChange = Math.floor(frameChange);\n\t\t\t}\n\n\t\t\tif (frameChange < 0) {\n\t\t\t\tframeChange = Math.ceil(frameChange);\n\t\t\t}\n\n\t\t\tif (frameChange !== 0) {\n\t\t\t\tthis.timeOfPreviousFrame = time;\n\t\t\t\tthis.setCurrentFrameIndex(calculateNewFrameIndexWithChange(this.currentFrameIndex, frameChange, this.frames.length, this.looping));\n\t\t\t}\n\t\t}\n\t}\n\n\tnextFrame() {\n\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, 1, this.frames.length, this.looping);\n\t}\n\n\tpreviousFrame() {\n\t\tthis.currentFrameIndex = calculateNewFrameIndexWithChange(this.currentFrameIndex, -1, this.frames.length, this.looping);\n\t}\n}\n\nfunction calculateNewFrameIndexWithChange(currentFrameIndex, change, amountOfFrames, looping = true) {\n\tchange = Math.round(change);\n\n\tif (change === 0) {\n\t\treturn currentFrameIndex;\n\t}\n\n\tif (looping) {\n\t\tlet newFrameIndex = (currentFrameIndex + change) % amountOfFrames\n\n\t\tif (newFrameIndex < 0) {\n\t\t\treturn newFrameIndex + amountOfFrames;\n\t\t}\n\n\t\treturn newFrameIndex;\n\t}\n\n\tif (!looping) {\n\t\tlet newFrameIndex = currentFrameIndex + change;\n\n\t\tif (newFrameIndex > (amountOfFrames - 1)) {\n\t\t\treturn (amountOfFrames - 1);\n\t\t}\n\n\t\tif (newFrameIndex < 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn newFrameIndex;\n\t}\n}\n\nfunction calculateMaximumSizeFromFrames(frames) {\n\tlet biggestWidth = 0;\n\tlet biggestHeight = 0;\n\n\tframes.forEach((frame) => {\n\t\tif (frame.size.width > biggestWidth) {\n\t\t\tbiggestWidth = frame.size.width;\n\t\t}\n\n\t\tif (frame.size.height > biggestHeight) {\n\t\t\tbiggestHeight = frame.size.height;\n\t\t}\n\t});\n\n\treturn {\n\t\twidth: biggestWidth,\n\t\theight: biggestHeight,\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/core/Sprite.js","import Actor from './Actor';\n\nexport default class NonPlayer extends Actor {\n\tconstructor(type, options) {\n\t\tsuper(type, options);\n\t}\n\n\ttakeTurn() {\n\t\tif (!this.dead) {\n\t\t\tlet decision = Math.round(Math.random() * 8);\n\n\t\t\tif (decision === 0) {\n\t\t\t\tthis.moveUp();\n\t\t\t}\n\n\t\t\tif (decision === 1) {\n\t\t\t\tthis.moveRight();\n\t\t\t}\n\n\t\t\tif (decision === 2) {\n\t\t\t\tthis.moveDown();\n\t\t\t}\n\n\t\t\tif (decision === 3) {\n\t\t\t\tthis.moveLeft();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/NonPlayer.js","import Entity from './../core/Entity';\nimport SpriteAtlas from './../core/SpriteAtlas';\n\nexport default class Wall extends Entity {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/wall-sheet.png\", \"frames\": [ { \"name\": \"wall_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\t\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\t\tlet wallSprite = spriteAtlas.createSpriteWithFrames([\n\t\t\t'wall_0'\n\t\t]);\n\n\t\tthis.setSprite(wallSprite);\n\t\tthis.setSize({width: 16, height: 16});\n\n\t\tthis.setSolidity(true);\n\t\tthis.type = 'wall';\n\t}\n\n\tcanBeAttacked() {\n\t\treturn false;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Wall.js","import Entity from './../core/Entity';\nimport SpriteAtlas from './../core/SpriteAtlas';\n\nexport default class Tree extends Entity {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/deadtree-sheet.png\", \"frames\": [ { \"name\": \"deadtree\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 32 } } ] }';\n\t\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\t\tlet wallSprite = spriteAtlas.createSpriteWithFrames([\n\t\t\t'deadtree'\n\t\t]);\n\n\t\tthis.setSprite(wallSprite);\n\t\tthis.setSize({width: 16, height: 16});\n\t\tthis.setOrigin({x: 0, y: -16});\n\n\t\tthis.setSolidity(true);\n\t\tthis.type = 'wall';\n\t}\n\n\tcanBeAttacked() {\n\t\treturn false;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/entities/Tree.js","import SpriteAtlas from './../core/SpriteAtlas';\n\nexport const Knight = {\n\ttype: 'knight',\n\tstats: {\n\t\tmaxHealth: 10,\n\t\tstrength: 3,\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 16,\n\t\theight: 16,\n\t},\n\tsolid: true,\n};\n\nfunction getSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/character-sheet-green.png\", \"frames\": [ { \"name\": \"player_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_2\", \"origin\": { \"x\": 32, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_3\", \"origin\": { \"x\": 48, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, {\"name\": \"player_idle_4\", \"origin\": { \"x\": 64, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"player_idle_5\", \"origin\": { \"x\": 80, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet knightSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_0',\n\t\t'player_idle_1',\n\t\t'player_idle_2',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_3',\n\t\t'player_idle_4',\n\t\t'player_idle_5',\n\t]);\n\n\tknightSprite.looping = true;\n\tknightSprite.setFramesPerSecond(10);\n\n\treturn knightSprite\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/creatureTypes/Knight.js","import SpriteAtlas from './../core/SpriteAtlas';\n\nexport const Slime = {\n\ttype: 'slime',\n\tstats: {\n\t\tmaxHealth: 16,\n\t\tstrength: 1,\n\t},\n\tsprite: getSprite(),\n\tsize: {\n\t\twidth: 16,\n\t\theight: 16,\n\t},\n\tsolid: true,\n};\n\nfunction getSprite() {\n\tlet spriteAtlasDefinition = '{ \"file\": \"assets/images/slime-sheet.png\", \"frames\": [ { \"name\": \"slime_idle_0\", \"origin\": { \"x\": 0, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } }, { \"name\": \"slime_idle_1\", \"origin\": { \"x\": 16, \"y\": 0 }, \"size\": { \"width\": 16, \"height\": 16 } } ] }';\n\tlet spriteAtlas = new SpriteAtlas(JSON.parse(spriteAtlasDefinition));\n\tlet slimeSprite = spriteAtlas.createSpriteWithFrames([\n\t\t'slime_idle_0',\n\t\t'slime_idle_1',\n\t]);\n\n\tslimeSprite.setFramesPerSecond(2);\n\n\treturn slimeSprite;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/creatureTypes/Slime.js"],"sourceRoot":""}