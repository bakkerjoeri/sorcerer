!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=6)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=[];if(e.hasOwnProperty("file")){var i=new Image;i.src=e.file,e.frames.forEach(function(e){var n=new h.default(e.name,i,e.origin,e.size);t.push(n)})}return t}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(13),u=n(s),l=i(5),h=n(l),c=function(){function e(t){r(this,e),this.frames=o(t)}return a(e,[{key:"getFrame",value:function(e){return this.frames.find(function(t){return t.getName()===e})}},{key:"createSpriteWithFrames",value:function(e){var t=this,i=e.map(function(e){return t.getFrame(e)});return new u.default(i)}}]),e}();t.default=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=document.querySelector(".js-log"),a=function(){function e(){n(this,e)}return r(e,null,[{key:"showMessage",value:function(e){var t=document.createElement("li");t.classList.add("log__item"),t.innerHTML=e,o.appendChild(t)}}]),e}();t.default=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),t.hasOwnProperty("sprite")&&this.setSprite(t.sprite),t.hasOwnProperty("position")&&this.setPosition(t.position),t.hasOwnProperty("solid")&&this.setSolidity(t.solid),t.hasOwnProperty("size")&&this.setSize(t.size)}return r(e,[{key:"step",value:function(e){}},{key:"setSprite",value:function(e){this.sprite=e}},{key:"setPosition",value:function(e){this.position=e}},{key:"getPosition",value:function(){return this.position}},{key:"setSolidity",value:function(e){this.solid=e}},{key:"isSolid",value:function(){return this.solid}},{key:"setSize",value:function(e){this.size=e}},{key:"getSize",value:function(){return this.size}},{key:"changePosition",value:function(e){var t=this.getPosition();this.setPosition({x:t.x+e.x,y:t.y+e.y})}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=new Map,a=function(){function e(){n(this,e)}return r(e,null,[{key:"subscribe",value:function(e,t){o.has(e)||o.set(e,[]),o.get(e).push(t)}},{key:"publish",value:function(e,t){o.has(e)&&o.get(e).forEach(function(e){e(t)})}}]),e}();t.default=a},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){return new f.default(JSON.parse('{ "file": "assets/images/grave-sheet.png", "frames": [ { "name": "grave_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')).createSpriteWithFrames(["grave_0"])}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),h=n(l),c=i(0),f=n(c),d=i(1),y=n(d),p={strength:1,maxHealth:1},v=function(e){function t(e,i){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return n.applyCreatureDefinition(e),n.health=n.stats.maxHealth,n}return a(t,e),u(t,[{key:"applyCreatureDefinition",value:function(e){this.type=e.type,this.applyStats(e.stats),this.setSprite(e.sprite),this.setSize(e.size),this.setSolidity(e.solid)}},{key:"applyStats",value:function(e){this.stats=Object.assign({},p,e)}},{key:"bumpInto",value:function(e){return!!e.canBeAttacked()&&(y.default.showMessage("<em>"+this.type+"</em> attacks <em>"+e.type+"</em>"),this.attackTarget(e),!0)}},{key:"attackTarget",value:function(e){e.applyDamage(this.calculateAttackDamage())}},{key:"calculateAttackDamage",value:function(){return this.stats.strength}},{key:"applyDamage",value:function(e){y.default.showMessage("<em>"+this.type+"</em> takes "+e+" damage"),this.reduceHealth(e)}},{key:"restoreHealth",value:function(e){this.changeHealth(this.health+e)}},{key:"reduceHealth",value:function(e){this.changeHealth(this.health-e)}},{key:"changeHealth",value:function(e){e>this.stats.maxHealth?(this.health=this.stats.maxHealth,y.default.showMessage("<em>"+this.type+"</em> health max at "+this.health)):e<=0?(this.health=0,this.die()):(this.health=e,y.default.showMessage("<em>"+this.type+"</em> health is "+this.health+"/"+this.stats.maxHealth))}},{key:"moveTo",value:function(e){var t=this;if(!this.map.hasTileAtPosition(e))return!1;if(!this.map.hasSolidEntitiesInBoundaries(e,this.size,[this])&&this.map.areBoundariesWithinMapBoundaries(e,this.size))return this.map.moveActorFromPositionToPosition(this,this.mapPosition,e),this.updateMapPosition(e),!0;var i=this.map.getSolidActorsInBoundaries(e,this.size,[this]);if(i.length>0){var n=!1;return i.forEach(function(e){t.bumpInto(e)&&(n=!0)}),n}return!1}},{key:"moveUp",value:function(){return this.moveTo({x:this.mapPosition.x,y:this.mapPosition.y-1})}},{key:"moveRight",value:function(){return this.moveTo({x:this.mapPosition.x+1,y:this.mapPosition.y})}},{key:"moveDown",value:function(){return this.moveTo({x:this.mapPosition.x,y:this.mapPosition.y+1})}},{key:"moveLeft",value:function(){return this.moveTo({x:this.mapPosition.x-1,y:this.mapPosition.y})}},{key:"canBeAttacked",value:function(){return!this.dead}},{key:"die",value:function(){this.dead=!0,this.size={width:1,height:1},this.sprite=s(),y.default.showMessage("<em>"+this.type+"</em> is dead")}},{key:"updateMapPosition",value:function(e){this.mapPosition=e,this.position={x:16*e.x,y:16*e.y}}}]),t}(h.default);t.default=v},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i,r,o){n(this,e),this.setName(t),this.setImage(i),this.setOrigin(r),this.setSize(o)}return r(e,[{key:"setName",value:function(e){this.name=e}},{key:"setImage",value:function(e){var t=this;this.imageLoaded=!1,this.image=e,this.image.addEventListener("load",function(){t.imageLoaded=!0})}},{key:"setOrigin",value:function(e){this.origin=e}},{key:"setSize",value:function(e){this.size=e}},{key:"getName",value:function(){return this.name}},{key:"getImage",value:function(){return this.image}},{key:"getOrigin",value:function(){return this.origin}},{key:"getSize",value:function(){return this.size}},{key:"onImageLoaded",value:function(e){this.imageLoaded?e():this.image.addEventListener("load",e)}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return 1===Math.round(Math.random()*e)}var o=i(7),a=n(o),s=i(8),u=n(s),l=i(9),h=n(l),c=i(10),f=n(c),d=i(12),y=n(d),p=i(14),v=n(p),g=i(15),m=n(g),w=i(16),_=n(w),b=i(17),k=i(18),P=i(19),x=i(20);i(21);var O=document.querySelector(".canvas__sorcerer"),S=new a.default({width:544,height:416});S.setBackgroundColor("#000");var z=new u.default(O,{x:0,y:0},{width:240,height:176});z.showRoom(S);var E=new f.default({width:34,height:26},S),j=new h.default;j.setCurrentMap(E);var M=new y.default(k.GreenKnight);E.addActor(M,{x:17,y:13}),j.setPlayer(M),z.followEntity(M),E.forEachTile(function(e){if(!e.hasSolidEntities()){if(r(160))return void E.addActor(new v.default(P.Slime),e.position);if(r(240))return void E.addActor(new v.default(b.Knight),e.position);if(r(40))return void E.addStructure(new m.default,e.position);if(r(80))return void E.addStructure(new _.default,e.position)}if(!E.hasSolidEntitiesInBoundaries(e.position,x.KingSlime.size)&&E.areBoundariesWithinMapBoundaries(e.position,x.KingSlime.size)&&r(320))return void E.addActor(new v.default(x.KingSlime),e.position)})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.setSize(t),this.entities=new Set}return r(e,[{key:"addEntity",value:function(e){this.entities.add(e)}},{key:"getEntities",value:function(){return this.entities}},{key:"setSize",value:function(e){this.size=e}},{key:"getSize",value:function(){return this.size}},{key:"setBackgroundColor",value:function(e){this.backgroundColor=e}},{key:"getBackgroundColor",value:function(){return this.backgroundColor}},{key:"drawBackground",value:function(e,t){e.fillStyle=this.backgroundColor,e.fillRect(t.x,t.y,this.size.width,this.size.height),e.strokeStyle="#bad455",e.strokeRect(t.x,t.y,this.size.width,this.size.height)}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){e.width=t.width,e.height=t.height}function o(e,t){return{x:e.x-t.position.x,y:e.y-t.position.y}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r){n(this,e),this.useCanvas(t),this.position=i,this.setSize(r),this.startUpdating()}return a(e,[{key:"showRoom",value:function(e){this.room=e}},{key:"useCanvas",value:function(e){this.canvas=e,this.context=e.getContext("2d"),this.size&&r(e,this.size)}},{key:"followEntity",value:function(e){this.entityToFollow=e}},{key:"setSize",value:function(e){this.size=e,this.canvas&&r(this.canvas,e)}},{key:"startUpdating",value:function(){window.requestAnimationFrame(this.update.bind(this))}},{key:"update",value:function(e){if(this.entityToFollow){var t={x:this.entityToFollow.position.x-this.size.width/2+this.entityToFollow.sprite.size.width/2,y:this.entityToFollow.position.y-this.size.height/2+this.entityToFollow.sprite.size.height/2};t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x>this.room.size.width-this.size.width&&(t.x=this.room.size.width-this.size.width),t.y>this.room.size.height-this.size.height&&(t.y=this.room.size.height-this.size.height),this.position=t}this.step(e),this.draw(e),window.requestAnimationFrame(this.update.bind(this))}},{key:"step",value:function(e){this.room.entities.forEach(function(t){t.step(e),t.sprite&&t.sprite.step(e)})}},{key:"draw",value:function(e){var t=this;this.clearDrawing(this.context),this.room.drawBackground(this.context,{x:-this.position.x,y:-this.position.y}),this.room.entities.forEach(function(e){e.hasOwnProperty("sprite")&&e.hasOwnProperty("position")&&e.position.hasOwnProperty("x")&&e.position.hasOwnProperty("y")&&e.sprite.draw(t.context,o({x:e.position.x+e.sprite.origin.x,y:e.position.y+e.sprite.origin.y},t))})}},{key:"drawMiddle",value:function(e){e.strokeStyle="#bad455",e.beginPath(),e.moveTo(0,0),e.lineTo(this.size.width,this.size.height),e.stroke(),e.beginPath(),e.moveTo(this.size.width,0),e.lineTo(0,this.size.height),e.stroke()}},{key:"clearDrawing",value:function(e){e.clearRect(0,0,this.size.width,this.size.height)}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=n(a),u=i(1),l=(n(u),function(){function e(){r(this,e),this.player,s.default.subscribe("playerTurnTaken",this.tick.bind(this))}return o(e,[{key:"tick",value:function(){this.performNonPlayerTurns()}},{key:"setCurrentMap",value:function(e){this.map=e}},{key:"setPlayer",value:function(e){this.player=e}},{key:"performNonPlayerTurns",value:function(){var e=this;this.map.actors.forEach(function(t){t!==e.player&&t.takeTurn()})}}]),e}());t.default=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){for(var t=[],i=0;i<e.width;i+=1){t[i]=[];for(var n=0;n<e.height;n+=1)t[i][n]=new s.default({x:i,y:n})}return t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(11),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){function e(t,i){n(this,e),this.size=t,this.room=i,this.tiles=r(t),this.actors=new Set,this.structures=new Set}return o(e,[{key:"addActor",value:function(e,t){e.map=this,this.actors.add(e),this.forEachTileInBoundaries(t,e.size,function(t){t.addActor(e)}),e.updateMapPosition(t),this.room.addEntity(e)}},{key:"addStructure",value:function(e,t){e.map=this,this.structures.add(e),this.forEachTileInBoundaries(t,e.size,function(t){t.addStructure(e)}),e.updateMapPosition(t),this.room.addEntity(e)}},{key:"findTileAtPosition",value:function(e){return this.tiles[e.x][e.y]}},{key:"forEachTile",value:function(e){this.tiles.forEach(function(t){t.forEach(e)})}},{key:"forEachTileInBoundaries",value:function(e,t,i){for(var n=e.x;n<e.x+t.width;n+=1)for(var r=e.y;r<e.y+t.height;r+=1){var o={x:n,y:r};this.hasTileAtPosition(o)&&i(this.findTileAtPosition(o))}}},{key:"hasTileAtPosition",value:function(e){return Boolean(this.tiles[e.x]&&this.tiles[e.x][e.y])}},{key:"moveActorFromPositionToPosition",value:function(e,t,i){this.forEachTileInBoundaries(t,e.size,function(t){t.removeActor(e)}),this.forEachTileInBoundaries(i,e.size,function(t){t.addActor(e)})}},{key:"getSolidEntitiesInBoundaries",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[];return this.forEachTileInBoundaries(e,t,function(e){n=n.concat(e.getSolidEntities(i))}),n}},{key:"hasSolidEntitiesInBoundaries",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getSolidEntitiesInBoundaries(e,t,i).length>0}},{key:"getSolidActorsInBoundaries",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[];return this.forEachTileInBoundaries(e,t,function(e){n=n.concat(e.getSolidActors(i))}),n}},{key:"hasSolidActorsInBoundaries",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getSolidActorsInBoundaries(e,t,i).length>0}},{key:"areBoundariesWithinMapBoundaries",value:function(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=this.size.width&&e.y+t.height<=this.size.height}}]),e}();t.default=u},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.position=t,this.actors=[],this.structures=[]}return r(e,[{key:"addActor",value:function(e){this.actors.push(e)}},{key:"removeActor",value:function(e){var t=this.actors.indexOf(e);-1!==t&&this.actors.splice(t,1)}},{key:"addStructure",value:function(e){this.structures.push(e)}},{key:"removeStructure",value:function(e){var t=this.structures.findIndex(e);-1!==t&&this.actors.splice(t,1)}},{key:"getEntities",value:function(){return this.structures.concat(this.actors)}},{key:"getActors",value:function(){return this.actors}},{key:"getSolidEntities",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.getEntities().filter(function(t){return!0===t.solid&&!e.includes(t)})}},{key:"getSolidActors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.getActors().filter(function(t){return!0===t.solid&&!e.includes(t)})}},{key:"hasSolidEntities",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.getSolidEntities().length>0}},{key:"hasSolidActors",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.getSolidActors().length>0}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(4),l=n(u),h=i(3),c=n(h),f=i(1),d=n(f),y=function(e){function t(e,i){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return d.default.showMessage("<em>"+n.type+"</em> awakens..."),window.addEventListener("keydown",n.onKeyDown.bind(n)),n}return a(t,e),s(t,[{key:"onKeyDown",value:function(e){if(!this.dead){var t=!1;" "!==e.key&&"5"!==e.key||(e.preventDefault(),d.default.showMessage(this.type+" waits..."),t=!0),"ArrowUp"!==e.key&&"8"!==e.key||(e.preventDefault(),t=this.moveUp()),"ArrowRight"!==e.key&&"6"!==e.key||(e.preventDefault(),t=this.moveRight()),"ArrowDown"!==e.key&&"2"!==e.key||(e.preventDefault(),t=this.moveDown()),"ArrowLeft"!==e.key&&"4"!==e.key||(e.preventDefault(),t=this.moveLeft()),t&&c.default.publish("playerTurnTaken")}}}]),t}(l.default);t.default=y},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(0===(t=Math.round(t)))return e;if(n){var r=(e+t)%i;return r<0?r+i:r}if(!n){var o=e+t;return o>i-1?i-1:o<0?0:o}}function o(e){var t=0,i=0;return e.forEach(function(e){e.size.width>t&&(t=e.size.width),e.size.height>i&&(i=e.size.height)}),{width:t,height:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(5),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.setFrames(t),i.hasOwnProperty("size")?this.size=i.size:this.size=o(this.getFrames()),i.hasOwnProperty("origin")?this.setOrigin(i.origin):this.setOrigin({x:0,y:0}),i.hasOwnProperty("frameIndex")?this.setCurrentFrameIndex(i.frameIndex):this.setCurrentFrameIndex(0),i.hasOwnProperty("framesPerSecond")?this.setFramesPerSecond(i.framesPerSecond):this.setFramesPerSecond(1),i.hasOwnProperty("looping")?this.looping=i.looping:this.looping=!0,this.timeOfPreviousFrame=0}return a(e,[{key:"setFrames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)?this.frames=e:e instanceof u.default?this.frames=[e]:this.frames=[]}},{key:"getFrames",value:function(){return this.frames}},{key:"setFramesPerSecond",value:function(e){this.framesPerSecond=e}},{key:"getFramesPerSecond",value:function(){return this.framesPerSecond}},{key:"setCurrentFrameIndex",value:function(e){this.frames[e]&&(this.currentFrameIndex=e)}},{key:"getCurrentFrame",value:function(){return this.frames[this.currentFrameIndex]}},{key:"draw",value:function(e,t){var i=this.getCurrentFrame();i&&e.drawImage(i.getImage(),i.getOrigin().x,i.getOrigin().y,i.getSize().width,i.getSize().height,t.x,t.y,this.size.width,this.size.height)}},{key:"step",value:function(e){var t=this.getFramesPerSecond();if(0!==t&&(this.looping||this.currentFrameIndex!==this.frames.length-1)){var i=e-this.timeOfPreviousFrame,n=i/(1e3/t);n>0&&(n=Math.floor(n)),n<0&&(n=Math.ceil(n)),0!==n&&(this.timeOfPreviousFrame=e,this.setCurrentFrameIndex(r(this.currentFrameIndex,n,this.frames.length,this.looping)))}}},{key:"nextFrame",value:function(){this.currentFrameIndex=r(this.currentFrameIndex,1,this.frames.length,this.looping)}},{key:"previousFrame",value:function(){this.currentFrameIndex=r(this.currentFrameIndex,-1,this.frames.length,this.looping)}},{key:"setOrigin",value:function(e){this.origin=e}},{key:"getOrigin",value:function(){return this.origin}}]),e}();t.default=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(4),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e,i){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return o(t,e),a(t,[{key:"takeTurn",value:function(){if(!this.dead){var e=Math.round(8*Math.random());0===e&&this.moveUp(),1===e&&this.moveRight(),2===e&&this.moveDown(),3===e&&this.moveLeft()}}}]),t}(u.default);t.default=l},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(2),l=n(u),h=i(0),c=n(h),f=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=new c.default(JSON.parse('{ "file": "assets/images/wall-sheet.png", "frames": [ { "name": "wall_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')),a=n.createSpriteWithFrames(["wall_0"]);return i.setSprite(a),i.setSize({width:1,height:1}),i.setSolidity(!0),i.type="wall",i}return a(t,e),s(t,[{key:"canBeAttacked",value:function(){return!1}},{key:"updateMapPosition",value:function(e){this.mapPosition=e,this.position={x:16*e.x,y:16*e.y}}}]),t}(l.default);t.default=f},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(2),l=n(u),h=i(0),c=n(h),f=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=new c.default(JSON.parse('{ "file": "assets/images/deadtree-sheet.png", "frames": [ { "name": "deadtree", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 32 } } ] }')),a=n.createSpriteWithFrames(["deadtree"]);return i.setSprite(a),i.setSize({width:1,height:1}),i.sprite.setOrigin({x:0,y:-16}),i.setSolidity(!0),i.type="wall",i}return a(t,e),s(t,[{key:"canBeAttacked",value:function(){return!1}},{key:"updateMapPosition",value:function(e){this.mapPosition=e,this.position={x:16*e.x,y:16*e.y}}}]),t}(l.default);t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Knight=void 0;var n=i(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.Knight={type:"knight",stats:{maxHealth:10,strength:3},sprite:function(){var e=new r.default(JSON.parse('{ "file": "assets/images/character-sheet.png", "frames": [ { "name": "player_idle_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_1", "origin": { "x": 16, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_2", "origin": { "x": 32, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_3", "origin": { "x": 48, "y": 0 }, "size": { "width": 16, "height": 16 } }, {"name": "player_idle_4", "origin": { "x": 64, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_5", "origin": { "x": 80, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')),t=e.createSpriteWithFrames(["player_idle_0","player_idle_0","player_idle_0","player_idle_0","player_idle_0","player_idle_1","player_idle_2","player_idle_3","player_idle_3","player_idle_3","player_idle_3","player_idle_4","player_idle_5"]);return t.looping=!0,t.setFramesPerSecond(10),t}(),size:{width:1,height:1},solid:!0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GreenKnight=void 0;var n=i(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.GreenKnight={type:"green knight",stats:{maxHealth:10,strength:3},sprite:function(){var e=new r.default(JSON.parse('{ "file": "assets/images/character-sheet-green.png", "frames": [ { "name": "player_idle_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_1", "origin": { "x": 16, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_2", "origin": { "x": 32, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_3", "origin": { "x": 48, "y": 0 }, "size": { "width": 16, "height": 16 } }, {"name": "player_idle_4", "origin": { "x": 64, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_5", "origin": { "x": 80, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')),t=e.createSpriteWithFrames(["player_idle_0","player_idle_0","player_idle_0","player_idle_0","player_idle_0","player_idle_1","player_idle_2","player_idle_3","player_idle_3","player_idle_3","player_idle_3","player_idle_4","player_idle_5"]);return t.looping=!0,t.setFramesPerSecond(10),t}(),size:{width:1,height:1},solid:!0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slime=void 0;var n=i(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.Slime={type:"slime",stats:{maxHealth:16,strength:1},sprite:function(){var e=new r.default(JSON.parse('{ "file": "assets/images/slime-sheet.png", "frames": [ { "name": "slime_idle_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "slime_idle_1", "origin": { "x": 16, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')),t=e.createSpriteWithFrames(["slime_idle_0","slime_idle_1"]);return t.setFramesPerSecond(2),t}(),size:{width:1,height:1},solid:!0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KingSlime=void 0;var n=i(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.KingSlime={type:"king slime",stats:{maxHealth:28,strength:2},sprite:function(){var e=new r.default(JSON.parse('{ "file": "assets/images/king-slime-sheet.png", "frames": [ { "name": "slime_idle_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 32, "height": 32 } }, { "name": "slime_idle_1", "origin": { "x": 32, "y": 0 }, "size": { "width": 32, "height": 32 } } ] }')),t=e.createSpriteWithFrames(["slime_idle_0","slime_idle_1"]);return t.setFramesPerSecond(1),t}(),size:{width:2,height:2},solid:!0}},function(e,t){}]);
//# sourceMappingURL=sorcerer.min.js.map