!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=5)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=new Map,a=function(){function e(){i(this,e)}return r(e,null,[{key:"subscribe",value:function(e,t){o.has(e)||o.set(e,[]),o.get(e).push(t)}},{key:"publish",value:function(e,t){o.has(e)&&o.get(e).forEach(function(e){e(t)})}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=[];if(e.hasOwnProperty("file")){var n=new Image;n.src=e.file,e.frames.forEach(function(e){var i=new f.default(e.name,n,e.origin,e.size);t.push(i)})}return t}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),u=i(s),c=n(4),f=i(c),l=function(){function e(t){r(this,e),this.frames=o(t)}return a(e,[{key:"getFrame",value:function(e){return this.frames.find(function(t){return t.getName()===e})}},{key:"createSpriteWithFrames",value:function(e){var t=this,n=e.map(function(e){return t.getFrame(e)});return new u.default(n)}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"moveUp",value:function(){return!!this.canMoveToPosition({x:this.position.x,y:this.position.y-16})&&(this.changePosition({x:0,y:-16}),!0)}},{key:"moveRight",value:function(){return!!this.canMoveToPosition({x:this.position.x+16,y:this.position.y})&&(this.changePosition({x:16,y:0}),!0)}},{key:"moveDown",value:function(){return!!this.canMoveToPosition({x:this.position.x,y:this.position.y+16})&&(this.changePosition({x:0,y:16}),!0)}},{key:"moveLeft",value:function(){return!!this.canMoveToPosition({x:this.position.x-16,y:this.position.y})&&(this.changePosition({x:-16,y:0}),!0)}},{key:"canMoveToPosition",value:function(e){return!this.room.hasSolidEntityInBoundaries({x:e.x,y:e.y,width:this.sprite.size.width,height:this.sprite.size.height})}}]),t}(u.default);t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),t.hasOwnProperty("sprite")&&this.setSprite(t.sprite),t.hasOwnProperty("position")&&this.setPosition(t.position),t.hasOwnProperty("solid")&&this.setSolidity(t.solid),t.hasOwnProperty("boundaries")&&this.setBoundaries(t.boundaries),this.context=t.context}return r(e,[{key:"step",value:function(e){}},{key:"setSprite",value:function(e){this.sprite=e}},{key:"setPosition",value:function(e){this.position=e}},{key:"getPosition",value:function(){return this.position}},{key:"setSolidity",value:function(e){this.solid=e}},{key:"isSolid",value:function(){return this.solid}},{key:"setBoundaries",value:function(e){this.boundaries=e}},{key:"getBoundaries",value:function(){return this.boundaries}},{key:"changePosition",value:function(e){var t=this.getPosition();this.setPosition({x:t.x+e.x,y:t.y+e.y})}},{key:"isWithinBoundaries",value:function(e){return this.position.y<e.y+e.height&&this.position.x+this.boundaries.width>e.x&&this.position.y+this.boundaries.height>e.y&&this.position.x<e.x+e.width}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n,r,o){i(this,e),this.setName(t),this.setImage(n),this.setOrigin(r),this.setSize(o)}return r(e,[{key:"setName",value:function(e){this.name=e}},{key:"setImage",value:function(e){var t=this;this.imageLoaded=!1,this.image=e,this.image.addEventListener("load",function(){t.imageLoaded=!0})}},{key:"setOrigin",value:function(e){this.origin=e}},{key:"setSize",value:function(e){this.size=e}},{key:"getName",value:function(){return this.name}},{key:"getImage",value:function(){return this.image}},{key:"getOrigin",value:function(){return this.origin}},{key:"getSize",value:function(){return this.size}},{key:"onImageLoaded",value:function(e){this.imageLoaded?e():this.image.addEventListener("load",e)}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(6),o=i(r),a=n(7),s=i(a),u=n(8),c=i(u),f=n(9),l=i(f),h=n(11),d=i(h),y=n(12),p=i(y);n(13);var v=document.querySelector(".canvas__sorcerer"),m=new o.default({width:1e3,height:500});m.setBackgroundColor("#000"),new s.default(v,{x:0,y:0},{width:240,height:160}).showRoom(m);var g=new c.default(m);g.setPlayer(new l.default({position:{x:16,y:16}})),g.addNonPlayer(new d.default({position:{x:144,y:64}})),g.addObject(new p.default({position:{x:48,y:32}})),g.addObject(new p.default({position:{x:64,y:32}})),g.addObject(new p.default({position:{x:64,y:48}}))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.setSize(t),this.entities=new Set}return r(e,[{key:"addEntity",value:function(e){this.entities.add(e),e.room=this}},{key:"getEntities",value:function(){return this.entities}},{key:"setSize",value:function(e){this.size=e}},{key:"getSize",value:function(){return this.size}},{key:"setBackgroundColor",value:function(e){this.backgroundColor=e}},{key:"getBackgroundColor",value:function(){return this.backgroundColor}},{key:"drawBackground",value:function(e){e.fillStyle=this.backgroundColor,e.fillRect(0,0,this.size.width,this.size.height)}},{key:"hasSolidEntityInBoundaries",value:function(e){return this.findSolidEntitiesInBoundaries(e).length>0}},{key:"findSolidEntitiesInBoundaries",value:function(e){var t=[];return this.entities.forEach(function(n){n.solid&&n.isWithinBoundaries(e)&&t.push(n)}),t}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){e.width=t.width,e.height=t.height}function o(e,t){return{x:e.x-t.position.x,y:e.y-t.position.y}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n,r){i(this,e),this.useCanvas(t),this.position=n,this.setSize(r),this.startUpdating()}return a(e,[{key:"showRoom",value:function(e){this.room=e}},{key:"useCanvas",value:function(e){this.canvas=e,this.context=e.getContext("2d"),this.size&&r(e,this.size)}},{key:"setSize",value:function(e){this.size=e,this.canvas&&r(this.canvas,e)}},{key:"startUpdating",value:function(){window.requestAnimationFrame(this.update.bind(this))}},{key:"update",value:function(e){this.step(e),this.draw(e),window.requestAnimationFrame(this.update.bind(this))}},{key:"step",value:function(e){this.room.entities.forEach(function(t){t.step(e),t.sprite.step(e)})}},{key:"draw",value:function(e){var t=this;this.clearDrawing(this.context),this.room.drawBackground(this.context),this.room.entities.forEach(function(e){e.sprite.draw(t.context,o({x:e.position.x,y:e.position.y},t))})}},{key:"clearDrawing",value:function(e){e.clearRect(0,0,this.size.width,this.size.height)}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){i(this,e),this.room=t,this.player,this.nonPlayers=new Set,this.objects=new Set,a.default.subscribe("playerTurnTaken",this.tick.bind(this))}return r(e,[{key:"tick",value:function(){this.performTurns()}},{key:"setPlayer",value:function(e){this.player=e,this.room.addEntity(e)}},{key:"addNonPlayer",value:function(e){this.nonPlayers.add(e),this.room.addEntity(e)}},{key:"addObject",value:function(e){this.objects.add(e),this.room.addEntity(e)}},{key:"performTurns",value:function(){console.log("Time for turns!"),this.nonPlayers.forEach(function(e){e.takeTurn()})}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),c=i(u),f=n(1),l=i(f),h=n(0),d=i(h),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=new l.default(JSON.parse('{ "file": "assets/images/character-sheet.png", "frames": [ { "name": "player_idle_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_1", "origin": { "x": 16, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_2", "origin": { "x": 32, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_3", "origin": { "x": 48, "y": 0 }, "size": { "width": 16, "height": 16 } }, {"name": "player_idle_4", "origin": { "x": 64, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "player_idle_5", "origin": { "x": 80, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')),a=i.createSpriteWithFrames(["player_idle_0","player_idle_0","player_idle_0","player_idle_0","player_idle_0","player_idle_1","player_idle_2","player_idle_3","player_idle_3","player_idle_3","player_idle_3","player_idle_4","player_idle_5"]);return a.setFramesPerSecond(10),n.setSprite(a),n.setBoundaries({width:16,height:16}),n.setSolidity(!0),window.addEventListener("keydown",n.onKeyDown.bind(n)),n}return a(t,e),s(t,[{key:"onKeyDown",value:function(e){var t=!1;"ArrowUp"===e.key&&(e.preventDefault(),t=this.moveUp()),"ArrowRight"===e.key&&(e.preventDefault(),t=this.moveRight()),"ArrowDown"===e.key&&(e.preventDefault(),t=this.moveDown()),"ArrowLeft"===e.key&&(e.preventDefault(),t=this.moveLeft()),t&&d.default.publish("playerTurnTaken")}}]),t}(c.default);t.default=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){if(0===(t=Math.round(t)))return e;var i=(e+t)%n;return i<0?i+n:i}function o(e){var t=0,n=0;return e.forEach(function(e){e.size.width>t&&(t=e.size.width),e.size.height>n&&(n=e.size.height)}),{width:t,height:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.setFrames(t),n.hasOwnProperty("size")?this.size=n.size:this.size=o(this.getFrames()),n.hasOwnProperty("origin")&&(this.origin=n.origin),n.hasOwnProperty("frameIndex")?this.setCurrentFrameIndex(n.frameIndex):this.setCurrentFrameIndex(0),n.hasOwnProperty("framesPerSecond")?this.setFramesPerSecond(n.framesPerSecond):this.setFramesPerSecond(1),this.timeOfPreviousFrame=0}return a(e,[{key:"setFrames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)?this.frames=e:e instanceof u.default?this.frames=[e]:this.frames=[]}},{key:"getFrames",value:function(){return this.frames}},{key:"setFramesPerSecond",value:function(e){this.framesPerSecond=e}},{key:"getFramesPerSecond",value:function(){return this.framesPerSecond}},{key:"setCurrentFrameIndex",value:function(e){this.frames[e]&&(this.currentFrameIndex=e)}},{key:"getCurrentFrame",value:function(){return this.frames[this.currentFrameIndex]}},{key:"draw",value:function(e,t){var n=this.getCurrentFrame();n&&e.drawImage(n.getImage(),n.getOrigin().x,n.getOrigin().y,n.getSize().width,n.getSize().height,t.x,t.y,this.size.width,this.size.height)}},{key:"step",value:function(e){var t=this.getFramesPerSecond();if(0!==t){var n=e-this.timeOfPreviousFrame,i=n/(1e3/t);i>0&&(i=Math.floor(i)),i<0&&(i=Math.ceil(i)),0!==i&&(this.timeOfPreviousFrame=e,this.setCurrentFrameIndex(r(this.currentFrameIndex,i,this.frames.length)))}}},{key:"nextFrame",value:function(){this.currentFrameIndex=r(this.currentFrameIndex,1,this.frames.length)}},{key:"previousFrame",value:function(){this.currentFrameIndex=r(this.currentFrameIndex,-1,this.frames.length)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),c=i(u),f=n(1),l=i(f),h=n(0),d=(i(h),function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=new l.default(JSON.parse('{ "file": "assets/images/slime-sheet.png", "frames": [ { "name": "slime_idle_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } }, { "name": "slime_idle_1", "origin": { "x": 16, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')),a=i.createSpriteWithFrames(["slime_idle_0","slime_idle_1"]);return a.setFramesPerSecond(2),n.setSprite(a),n.setBoundaries({width:16,height:16}),n.setSolidity(!0),n}return a(t,e),s(t,[{key:"takeTurn",value:function(){var e=Math.round(11*Math.random());0===e&&this.moveUp(),1===e&&this.moveRight(),2===e&&this.moveDown(),3===e&&this.moveLeft()}}]),t}(c.default));t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),u=i(s),c=n(1),f=i(c),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=new f.default(JSON.parse('{ "file": "assets/images/wall-sheet.png", "frames": [ { "name": "wall_0", "origin": { "x": 0, "y": 0 }, "size": { "width": 16, "height": 16 } } ] }')),a=i.createSpriteWithFrames(["wall_0"]);return n.setSprite(a),n.setBoundaries({width:16,height:16}),n.setSolidity(!0),n}return a(t,e),t}(u.default);t.default=l},function(e,t){}]);
//# sourceMappingURL=sorcerer.min.js.map